var Wr=Object.defineProperty;var Ir=(t,i)=>{for(var r in i)Wr(t,r,{get:i[r],enumerable:!0,configurable:!0,set:(a)=>i[r]=()=>a})};var qr={Stringify:1,BeforeStream:2,Stream:3},k=(t,i)=>{let r=new String(t);return r.isEscaped=!0,r.callbacks=i,r},Ur=/[&<>'"]/,ai=async(t,i)=>{let r="";i||=[];let a=await Promise.all(t);for(let v=a.length-1;;v--){if(r+=a[v],v--,v<0)break;let s=a[v];if(typeof s==="object")i.push(...s.callbacks||[]);let F=s.isEscaped;if(s=await(typeof s==="object"?s.toString():s),typeof s==="object")i.push(...s.callbacks||[]);if(s.isEscaped??F)r+=s;else{let o=[r];h(s,o),r=o[0]}}return k(r,i)},h=(t,i)=>{let r=t.search(Ur);if(r===-1){i[0]+=t;return}let a,v,s=0;for(v=r;v<t.length;v++){switch(t.charCodeAt(v)){case 34:a="&quot;";break;case 39:a="&#39;";break;case 38:a="&amp;";break;case 60:a="&lt;";break;case 62:a="&gt;";break;default:continue}i[0]+=t.substring(s,v)+a,s=v+1}i[0]+=t.substring(s,v)},ni=(t)=>{let i=t.callbacks;if(!i?.length)return t;let r=[t],a={};return i.forEach((v)=>v({phase:qr.Stringify,buffer:r,context:a})),r[0]};var V=Symbol("RENDERER"),d=Symbol("ERROR_HANDLER"),H=Symbol("STASH"),$t=Symbol("INTERNAL"),ft=Symbol("MEMO"),x=Symbol("PERMALINK");var vi=(t)=>{return t[$t]=!0,t};var si=(t)=>({value:i,children:r})=>{if(!r)return;let a={children:[{tag:vi(()=>{t.push(i)}),props:{}}]};if(Array.isArray(r))a.children.push(...r.flat());else a.children.push(r);a.children.push({tag:vi(()=>{t.pop()}),props:{}});let v={tag:"",props:a,type:""};return v[d]=(s)=>{throw t.pop(),s},v},st=(t)=>{let i=[t],r=si(i);return r.values=i,r.Provider=r,b.push(r),r};var b=[],Qi=(t)=>{let i=[t],r=(a)=>{i.push(a.value);let v;try{v=a.children?(Array.isArray(a.children)?new Fi("",{},a.children):a.children).toString():""}catch(s){throw i.pop(),s}if(v instanceof Promise)return v.finally(()=>i.pop()).then((s)=>k(s,s.callbacks));else return i.pop(),k(v)};return r.values=i,r.Provider=r,r[V]=si(i),b.push(r),r},Q=(t)=>{return t.values.at(-1)};var j={title:[],script:["src"],style:["data-href"],link:["href"],meta:["name","httpEquiv","charset","itemProp"]},Ft={},e="data-precedence";var ct={};Ir(ct,{title:()=>Jr,style:()=>Xr,script:()=>Cr,meta:()=>Kr,link:()=>br,input:()=>Rr,form:()=>Or,button:()=>hr});var p=(t)=>Array.isArray(t)?t:[t];var Wi=new WeakMap,Ii=(t,i,r,a)=>({buffer:v,context:s})=>{if(!v)return;let F=Wi.get(s)||{};Wi.set(s,F);let o=F[t]||=[],l=!1,u=j[t];if(u.length>0)t:for(let[,P]of o)for(let c of u)if((P?.[c]??null)===r?.[c]){l=!0;break t}if(l)v[0]=v[0].replaceAll(i,"");else if(u.length>0)o.push([i,r,a]);else o.unshift([i,r,a]);if(v[0].indexOf("</head>")!==-1){let P;if(a===void 0)P=o.map(([c])=>c);else{let c=[];P=o.map(([w,,B])=>{let T=c.indexOf(B);if(T===-1)c.push(B),T=c.length-1;return[w,T]}).sort((w,B)=>w[1]-B[1]).map(([w])=>w)}P.forEach((c)=>{v[0]=v[0].replaceAll(c,"")}),v[0]=v[0].replace(/(?=<\/head>)/,P.join(""))}},ot=(t,i,r)=>k(new W(t,r,p(i??[])).toString()),ut=(t,i,r,a)=>{if("itemProp"in r)return ot(t,i,r);let{precedence:v,blocking:s,...F}=r;if(v=a?v??"":void 0,a)F[e]=v;let o=new W(t,F,p(i||[])).toString();if(o instanceof Promise)return o.then((l)=>k(o,[...l.callbacks||[],Ii(t,l,F,v)]));else return k(o,[Ii(t,o,F,v)])},Jr=({children:t,...i})=>{let r=Bt();if(r){let a=Q(r);if(a==="svg"||a==="head")return new W("title",i,p(t??[]))}return ut("title",t,i,!1)},Cr=({children:t,...i})=>{let r=Bt();if(["src","async"].some((a)=>!i[a])||r&&Q(r)==="head")return ot("script",t,i);return ut("script",t,i,!1)},Xr=({children:t,...i})=>{if(!["href","precedence"].every((r)=>(r in i)))return ot("style",t,i);return i["data-href"]=i.href,delete i.href,ut("style",t,i,!0)},br=({children:t,...i})=>{if(["onLoad","onError"].some((r)=>(r in i))||i.rel==="stylesheet"&&(!("precedence"in i)||("disabled"in i)))return ot("link",t,i);return ut("link",t,i,"precedence"in i)},Kr=({children:t,...i})=>{let r=Bt();if(r&&Q(r)==="head")return ot("meta",t,i);return ut("meta",t,i,!1)},qi=(t,{children:i,...r})=>new W(t,r,p(i??[])),Or=(t)=>{if(typeof t.action==="function")t.action=x in t.action?t.action[x]:void 0;return qi("form",t)},Ui=(t,i)=>{if(typeof i.formAction==="function")i.formAction=x in i.formAction?i.formAction[x]:void 0;return qi(t,i)},Rr=(t)=>Ui("input",t),hr=(t)=>Ui("button",t);var Sr=new Map([["className","class"],["htmlFor","for"],["crossOrigin","crossorigin"],["httpEquiv","http-equiv"],["itemProp","itemprop"],["fetchPriority","fetchpriority"],["noModule","nomodule"],["formAction","formaction"]]),tt=(t)=>Sr.get(t)||t,Tt=(t,i)=>{for(let[r,a]of Object.entries(t)){let v=r[0]==="-"||!/[A-Z]/.test(r)?r:r.replace(/[A-Z]/g,(s)=>`-${s.toLowerCase()}`);i(v,a==null?null:typeof a==="number"?!v.match(/^(?:a|border-im|column(?:-c|s)|flex(?:$|-[^b])|grid-(?:ar|[^a])|font-w|li|or|sca|st|ta|wido|z)|ty$/)?`${a}px`:`${a}`:a)}};var lt=void 0,Bt=()=>lt,Nr=(t)=>/[A-Z]/.test(t)&&t.match(/^(?:al|basel|clip(?:Path|Rule)$|co|do|fill|fl|fo|gl|let|lig|i|marker[EMS]|o|pai|pointe|sh|st[or]|text[^L]|tr|u|ve|w)/)?t.replace(/([A-Z])/g,"-$1").toLowerCase():t,pr=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],Er=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],ui=(t,i)=>{for(let r=0,a=t.length;r<a;r++){let v=t[r];if(typeof v==="string")h(v,i);else if(typeof v==="boolean"||v===null||v===void 0)continue;else if(v instanceof W)v.toStringToBuffer(i);else if(typeof v==="number"||v.isEscaped)i[0]+=v;else if(v instanceof Promise)i.unshift("",v);else ui(v,i)}},W=class{tag;props;key;children;isEscaped=!0;localContexts;constructor(t,i,r){this.tag=t,this.props=i,this.children=r}get type(){return this.tag}get ref(){return this.props.ref||null}toString(){let t=[""];this.localContexts?.forEach(([i,r])=>{i.values.push(r)});try{this.toStringToBuffer(t)}finally{this.localContexts?.forEach(([i])=>{i.values.pop()})}return t.length===1?"callbacks"in t?ni(k(t[0],t.callbacks)).toString():t[0]:ai(t,t.callbacks)}toStringToBuffer(t){let i=this.tag,r=this.props,{children:a}=this;t[0]+=`<${i}`;let v=lt&&Q(lt)==="svg"?(s)=>Nr(tt(s)):(s)=>tt(s);for(let[s,F]of Object.entries(r))if(s=v(s),s==="children");else if(s==="style"&&typeof F==="object"){let o="";Tt(F,(l,u)=>{if(u!=null)o+=`${o?";":""}${l}:${u}`}),t[0]+=' style="',h(o,t),t[0]+='"'}else if(typeof F==="string")t[0]+=` ${s}="`,h(F,t),t[0]+='"';else if(F===null||F===void 0);else if(typeof F==="number"||F.isEscaped)t[0]+=` ${s}="${F}"`;else if(typeof F==="boolean"&&Er.includes(s)){if(F)t[0]+=` ${s}=""`}else if(s==="dangerouslySetInnerHTML"){if(a.length>0)throw Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");a=[k(F.__html)]}else if(F instanceof Promise)t[0]+=` ${s}="`,t.unshift('"',F);else if(typeof F==="function"){if(!s.startsWith("on")&&s!=="ref")throw Error(`Invalid prop '${s}' of type 'function' supplied to '${i}'.`)}else t[0]+=` ${s}="`,h(F.toString(),t),t[0]+='"';if(pr.includes(i)&&a.length===0){t[0]+="/>";return}t[0]+=">",ui(a,t),t[0]+=`</${i}>`}},oi=class extends W{toStringToBuffer(t){let{children:i}=this,r={...this.props};if(i.length)r.children=i.length===1?i[0]:i;let a=this.tag.call(null,r);if(typeof a==="boolean"||a==null)return;else if(a instanceof Promise)if(b.length===0)t.unshift("",a);else{let v=b.map((s)=>[s,s.values.at(-1)]);t.unshift("",a.then((s)=>{if(s instanceof W)s.localContexts=v;return s}))}else if(a instanceof W)a.toStringToBuffer(t);else if(typeof a==="number"||a.isEscaped){if(t[0]+=a,a.callbacks)t.callbacks||=[],t.callbacks.push(...a.callbacks)}else h(a,t)}},Fi=class extends W{toStringToBuffer(t){ui(this.children,t)}};var Ji=!1,Lt=(t,i,r)=>{if(!Ji){for(let a in Ft)ct[a][V]=Ft[a];Ji=!0}if(typeof t==="function")return new oi(t,i,r);else if(ct[t])return new oi(ct[t],i,r);else if(t==="svg"||t==="head")return lt||=Qi(""),new W(t,i,[new oi(lt,{value:t},r)]);else return new W(t,i,r)};var K=({children:t})=>{return new Fi("",{children:t},Array.isArray(t)?t:t?[t]:[])};var wt="_hp",Dr={Change:"Input",DoubleClick:"DblClick"},Vr={svg:"2000/svg",math:"1998/Math/MathML"},S=[],li=new WeakMap,it=void 0,hi=()=>it,O=(t)=>("t"in t),ci={onClick:["click",!1]},Ci=(t)=>{if(!t.startsWith("on"))return;if(ci[t])return ci[t];let i=t.match(/^on([A-Z][a-zA-Z]+?(?:PointerCapture)?)(Capture)?$/);if(i){let[,r,a]=i;return ci[t]=[(Dr[r]||r).toLowerCase(),!!a]}return},Xi=(t,i)=>it&&t instanceof SVGElement&&/[A-Z]/.test(i)&&((i in t.style)||i.match(/^(?:o|pai|str|u|ve)/))?i.replace(/([A-Z])/g,"-$1").toLowerCase():i,dr=(t,i,r)=>{i||={};for(let a in i){let v=i[a];if(a!=="children"&&(!r||r[a]!==v)){a=tt(a);let s=Ci(a);if(s){if(r?.[a]!==v){if(r)t.removeEventListener(s[0],r[a],s[1]);if(v!=null){if(typeof v!=="function")throw Error(`Event handler for "${a}" is not a function`);t.addEventListener(s[0],v,s[1])}}}else if(a==="dangerouslySetInnerHTML"&&v)t.innerHTML=v.__html;else if(a==="ref"){let F;if(typeof v==="function")F=v(t)||(()=>v(null));else if(v&&"current"in v)v.current=t,F=()=>v.current=null;li.set(t,F)}else if(a==="style"){let F=t.style;if(typeof v==="string")F.cssText=v;else if(F.cssText="",v!=null)Tt(v,F.setProperty.bind(F))}else{if(a==="value"){let o=t.nodeName;if(o==="INPUT"||o==="TEXTAREA"||o==="SELECT"){if(t.value=v===null||v===void 0||v===!1?null:v,o==="TEXTAREA"){t.textContent=v;continue}else if(o==="SELECT"){if(t.selectedIndex===-1)t.selectedIndex=0;continue}}}else if(a==="checked"&&t.nodeName==="INPUT"||a==="selected"&&t.nodeName==="OPTION")t[a]=v;let F=Xi(t,a);if(v===null||v===void 0||v===!1)t.removeAttribute(F);else if(v===!0)t.setAttribute(F,"");else if(typeof v==="string"||typeof v==="number")t.setAttribute(F,v);else t.setAttribute(F,v.toString())}}}if(r)for(let a in r){let v=r[a];if(a!=="children"&&!(a in i)){a=tt(a);let s=Ci(a);if(s)t.removeEventListener(s[0],v,s[1]);else if(a==="ref")li.get(t)?.();else t.removeAttribute(Xi(t,a))}}},xr=(t,i)=>{i[H][0]=0,S.push([t,i]);let r=i.tag[V]||i.tag,a=r.defaultProps?{...r.defaultProps,...i.props}:i.props;try{return[r.call(null,a)]}finally{S.pop()}},Si=(t,i,r,a,v)=>{if(t.vR?.length)a.push(...t.vR),delete t.vR;if(typeof t.tag==="function")t[H][1][zt]?.forEach((s)=>v.push(s));t.vC.forEach((s)=>{if(O(s))r.push(s);else if(typeof s.tag==="function"||s.tag===""){s.c=i;let F=r.length;if(Si(s,i,r,a,v),s.s){for(let o=F;o<r.length;o++)r[o].s=!0;s.s=!1}}else if(r.push(s),s.vR?.length)a.push(...s.vR),delete s.vR})},jr=(t)=>{for(;;t=t.tag===wt||!t.vC||!t.pP?t.nN:t.vC[0]){if(!t)return null;if(t.tag!==wt&&t.e)return t.e}},Ni=(t)=>{if(!O(t)){if(t[H]?.[1][zt]?.forEach((i)=>i[2]?.()),li.get(t.e)?.(),t.p===2)t.vC?.forEach((i)=>i.p=2);t.vC?.forEach(Ni)}if(!t.p)t.e?.remove(),delete t.e;if(typeof t.tag==="function")Pt.delete(t),Ht.delete(t),delete t[H][3],t.a=!0},Pi=(t,i,r)=>{t.c=i,pi(t,i,r)},bi=(t,i)=>{if(!i)return;for(let r=0,a=t.length;r<a;r++)if(t[r]===i)return r;return},Ki=Symbol(),pi=(t,i,r)=>{let a=[],v=[],s=[];Si(t,i,a,v,s),v.forEach(Ni);let F=r?void 0:i.childNodes,o,l=null;if(r)o=-1;else if(!F.length)o=0;else{let u=bi(F,jr(t.nN));if(u!==void 0)l=F[u],o=u;else o=bi(F,a.find((P)=>P.tag!==wt&&P.e)?.e)??-1;if(o===-1)r=!0}for(let u=0,P=a.length;u<P;u++,o++){let c=a[u],w;if(c.s&&c.e)w=c.e,c.s=!1;else{let B=r||!c.e;if(O(c)){if(c.e&&c.d)c.e.textContent=c.t;c.d=!1,w=c.e||=document.createTextNode(c.t)}else w=c.e||=c.n?document.createElementNS(c.n,c.tag):document.createElement(c.tag),dr(w,c.props,c.pP),pi(c,w,B)}if(c.tag===wt)o--;else if(r){if(!w.parentNode)i.appendChild(w)}else if(F[o]!==w&&F[o-1]!==w)if(F[o+1]===w)i.appendChild(F[o]);else i.insertBefore(w,l||F[o]||null)}if(t.pP)delete t.pP;if(s.length){let u=[],P=[];if(s.forEach(([,c,,w,B])=>{if(c)u.push(c);if(w)P.push(w);B?.()}),u.forEach((c)=>c()),P.length)requestAnimationFrame(()=>{P.forEach((c)=>c())})}},er=(t,i)=>!!(t&&t.length===i.length&&t.every((r,a)=>r[1]===i[a][1])),Ht=new WeakMap,Mt=(t,i,r)=>{let a=!r&&i.pC;if(r)i.pC||=i.vC;let v;try{if(r||=typeof i.tag=="function"?xr(t,i):p(i.props.children),r[0]?.tag===""&&r[0][d])v=r[0][d],t[5].push([t,v,i]);let s=a?[...i.pC]:i.vC?[...i.vC]:void 0,F=[],o;for(let l=0;l<r.length;l++){if(Array.isArray(r[l]))r.splice(l,1,...r[l].flat());let u=Ei(r[l]);if(u){if(typeof u.tag==="function"&&!u.tag[$t]){if(b.length>0)u[H][2]=b.map((c)=>[c,c.values.at(-1)]);if(t[5]?.length)u[H][3]=t[5].at(-1)}let P;if(s&&s.length){let c=s.findIndex(O(u)?(w)=>O(w):u.key!==void 0?(w)=>w.key===u.key&&w.tag===u.tag:(w)=>w.tag===u.tag);if(c!==-1)P=s[c],s.splice(c,1)}if(P)if(O(u)){if(P.t!==u.t)P.t=u.t,P.d=!0;u=P}else{let c=P.pP=P.props;if(P.props=u.props,P.f||=u.f||i.f,typeof u.tag==="function"){let w=P[H][2];if(P[H][2]=u[H][2]||[],P[H][3]=u[H][3],!P.f&&((P.o||P)===u.o||P.tag[ft]?.(c,P.props))&&er(w,P[H][2]))P.s=!0}u=P}else if(!O(u)&&it){let c=Q(it);if(c)u.n=c}if(!O(u)&&!u.s)Mt(t,u),delete u.f;if(F.push(u),o&&!o.s&&!u.s)for(let c=o;c&&!O(c);c=c.vC?.at(-1))c.nN=u;o=u}}if(i.vR=a?[...i.vC,...s||[]]:s||[],i.vC=F,a)delete i.pC}catch(s){if(i.f=!0,s===Ki)if(v)return;else throw s;let[F,o,l]=i[H]?.[3]||[];if(o){let u=()=>gt([0,!1,t[2]],l),P=Ht.get(l)||[];P.push(u),Ht.set(l,P);let c=o(s,()=>{let w=Ht.get(l);if(w){let B=w.indexOf(u);if(B!==-1)return w.splice(B,1),u()}});if(c){if(t[0]===1)t[1]=!0;else if(Mt(t,l,[c]),(o.length===1||t!==F)&&l.c){Pi(l,l.c,!1);return}throw Ki}}throw s}finally{if(v)t[5].pop()}},Ei=(t)=>{if(t===void 0||t===null||typeof t==="boolean")return;else if(typeof t==="string"||typeof t==="number")return{t:t.toString(),d:!0};else{if("vR"in t)t={tag:t.tag,props:t.props,key:t.key,f:t.f,type:t.tag,ref:t.props.ref,o:t.o||t};if(typeof t.tag==="function")t[H]=[0,[]];else{let i=Vr[t.tag];if(i)it||=st(""),t.props.children=[{tag:it,props:{value:t.n=`http://www.w3.org/${i}`,children:t.props.children}}]}return t}},Di=(t,i,r)=>{if(t.c===i)t.c=r,t.vC.forEach((a)=>Di(a,i,r))},Oi=(t,i)=>{i[H][2]?.forEach(([r,a])=>{r.values.push(a)});try{Mt(t,i,void 0)}catch{return}if(i.a){delete i.a;return}if(i[H][2]?.forEach(([r])=>{r.values.pop()}),t[0]!==1||!t[1])Pi(i,i.c,!1)},Pt=new WeakMap,Ri=[],gt=async(t,i)=>{t[5]||=[];let r=Pt.get(i);if(r)r[0](void 0);let a,v=new Promise((s)=>a=s);if(Pt.set(i,[a,()=>{if(t[2])t[2](t,i,(s)=>{Oi(s,i)}).then(()=>a(i));else Oi(t,i),a(i)}]),Ri.length)Ri.at(-1).add(i);else{await Promise.resolve();let s=Pt.get(i);if(s)Pt.delete(i),s[1]()}return v},ta=(t,i)=>{let r=[];r[5]=[],r[4]=!0,Mt(r,t,void 0),r[4]=!1;let a=document.createDocumentFragment();Pi(t,a,!0),Di(t,a,i),i.replaceChildren(a)},wi=(t,i)=>{ta(Ei({tag:"",props:{children:t}}),i)};var gi=(t,i,r)=>({tag:wt,props:{children:t},key:r,e:i,p:1});var ia=0,zt=1,ra=2,aa=3,na=4,yi=new WeakMap,mi=(t,i)=>!t||!i||t.length!==i.length||i.some((r,a)=>r!==t[a]);var va=void 0;var Vi=[];var A=(t)=>{let i=()=>typeof t==="function"?t():t,r=S.at(-1);if(!r)return[i(),()=>{}];let[,a]=r,v=a[H][1][ia]||=[],s=a[H][0]++;return v[s]||=[i(),(F)=>{let o=va,l=v[s];if(typeof F==="function")F=F(l[0]);if(!Object.is(F,l[0]))if(l[0]=F,Vi.length){let[u,P]=Vi.at(-1);Promise.all([u===3?a:gt([u,!1,o],a),P]).then(([c])=>{if(!c||!(u===2||u===3))return;let w=c.vC;requestAnimationFrame(()=>{setTimeout(()=>{if(w!==c.vC)return;gt([u===3?1:0,!1,o],c)})})})}else gt([0,!1,o],a)}]};var sa=(t,i,r)=>{let a=S.at(-1);if(!a)return;let[,v]=a,s=v[H][1][zt]||=[],F=v[H][0]++,[o,,l]=s[F]||=[];if(mi(o,r)){if(l)l();let u=()=>{P[t]=void 0,P[2]=i()},P=[r,void 0,void 0,void 0,void 0];P[t]=u,s[F]=P}},L=(t,i)=>sa(3,t,i);var g=(t,i)=>{let r=S.at(-1);if(!r)return t;let[,a]=r,v=a[H][1][ra]||=[],s=a[H][0]++,F=v[s];if(mi(F?.[1],i))v[s]=[t,i];else t=v[s][0];return t},z=(t)=>{let i=S.at(-1);if(!i)return{current:t};let[,r]=i,a=r[H][1][na]||=[],v=r[H][0]++;return a[v]||={current:t}},Ai=(t)=>{let i=yi.get(t);if(i){if(i.length===2)throw i[1];return i[0]}throw t.then((r)=>yi.set(t,[r]),(r)=>yi.set(t,[void 0,r])),t},$i=(t,i)=>{let r=S.at(-1);if(!r)return t();let[,a]=r,v=a[H][1][aa]||=[],s=a[H][0]++,F=v[s];if(mi(F?.[1],i))v[s]=[t(),i];return v[s][0]};var xi=st({pending:!1,data:null,method:null,action:null}),di=new Set,ji=(t)=>{di.add(t),t.finally(()=>di.delete(t))};var fi=(t,i)=>{return $i(()=>(r)=>{let a;if(t){if(typeof t==="function")a=t(r)||(()=>{t(null)});else if(t&&"current"in t)t.current=r,a=()=>{t.current=null}}let v=i(r);return()=>{v?.(),a?.()}},[t])},ei=Object.create(null),tr=Object.create(null),yt=(t,i,r,a,v)=>{if(i?.itemProp)return{tag:t,props:i,type:t,ref:i.ref};let s=document.head,{onLoad:F,onError:o,precedence:l,blocking:u,...P}=i,c=null,w=!1,B=j[t],T=void 0;if(B.length>0){let m=s.querySelectorAll(t);t:for(let f of m)for(let y of j[t])if(f.getAttribute(y)===i[y]){c=f;break t}if(!c){let f=B.reduce((y,$)=>i[$]===void 0?y:`${y}-${$}-${i[$]}`,t);w=!tr[f],c=tr[f]||=(()=>{let y=document.createElement(t);for(let $ of B){if(i[$]!==void 0)y.setAttribute($,i[$]);if(i.rel)y.setAttribute("rel",i.rel)}return y})()}}else T=s.querySelectorAll(t);if(l=a?l??"":void 0,a)P[e]=l;let M=g((m)=>{if(B.length>0){let f=!1;for(let y of s.querySelectorAll(t)){if(f&&y.getAttribute(e)!==l){s.insertBefore(m,y);return}if(y.getAttribute(e)===l)f=!0}s.appendChild(m)}else if(T){let f=!1;for(let y of T)if(y===m){f=!0;break}if(!f)s.insertBefore(m,s.contains(T[0])?T[0]:s.querySelector(t));T=void 0}},[l]),Y=fi(i.ref,(m)=>{let f=B[0];if(r===2)m.innerHTML="";if(w||T)M(m);if(!o&&!F)return;let y=ei[m.getAttribute(f)]||=new Promise(($,G)=>{m.addEventListener("load",$),m.addEventListener("error",G)});if(F)y=y.then(F);if(o)y=y.catch(o);y.catch(()=>{})});if(v&&u==="render"){let m=j[t][0];if(i[m]){let f=i[m],y=ei[f]||=new Promise(($,G)=>{M(c),c.addEventListener("load",$),c.addEventListener("error",G)});Ai(y)}}let Z={tag:t,type:t,props:{...P,ref:Y},ref:Y};if(Z.p=r,c)Z.e=c;return gi(Z,s)},Fa=(t)=>{let i=hi();if((i&&Q(i))?.endsWith("svg"))return{tag:"title",props:t,type:"title",ref:t.ref};return yt("title",t,void 0,!1,!1)},oa=(t)=>{if(!t||["src","async"].some((i)=>!t[i]))return{tag:"script",props:t,type:"script",ref:t.ref};return yt("script",t,1,!1,!0)},ua=(t)=>{if(!t||!["href","precedence"].every((i)=>(i in t)))return{tag:"style",props:t,type:"style",ref:t.ref};return t["data-href"]=t.href,delete t.href,yt("style",t,2,!0,!0)},ca=(t)=>{if(!t||["onLoad","onError"].some((i)=>(i in t))||t.rel==="stylesheet"&&(!("precedence"in t)||("disabled"in t)))return{tag:"link",props:t,type:"link",ref:t.ref};return yt("link",t,1,"precedence"in t,!0)},la=(t)=>{return yt("meta",t,void 0,!1,!1)},ir=Symbol(),Pa=(t)=>{let{action:i,...r}=t;if(typeof i!=="function")r.action=i;let[a,v]=A([null,!1]),s=g(async(u)=>{let P=u.isTrusted?i:u.detail[ir];if(typeof P!=="function")return;u.preventDefault();let c=new FormData(u.target);v([c,!0]);let w=P(c);if(w instanceof Promise)ji(w),await w;v([null,!0])},[]),F=fi(t.ref,(u)=>{return u.addEventListener("submit",s),()=>{u.removeEventListener("submit",s)}}),[o,l]=a;return a[1]=!1,{tag:xi,props:{value:{pending:o!==null,data:o,method:o?"post":null,action:o?i:null},children:{tag:"form",props:{...r,ref:F},type:"form",ref:F}},f:l}},rr=(t,{formAction:i,...r})=>{if(typeof i==="function"){let a=g((v)=>{v.preventDefault(),v.currentTarget.form.dispatchEvent(new CustomEvent("submit",{detail:{[ir]:i}}))},[]);r.ref=fi(r.ref,(v)=>{return v.addEventListener("click",a),()=>{v.removeEventListener("click",a)}})}return{tag:t,props:r,type:t,ref:r.ref}},wa=(t)=>rr("input",t),ga=(t)=>rr("button",t);Object.assign(Ft,{title:Fa,script:oa,style:ua,link:ca,meta:la,form:Pa,input:wa,button:ga});var rt="#222244,#2D2B55,#B362FF,#FFFFFF,#2D2B55,#A599E9,#3AD900,#FAD000,#3B3768,#7E74A8",Bi=[{name:"meet-ai Default",schema:"#194234,#9c2e33,#E7C12e,#194234,#9c2e33,#FFFFFF,#ee6030,#9C2E33,#9c2e33,#FFFFFF"},{name:"One Dark Pro",schema:"#282C34,#2C313A,#528BFF,#FFFFFF,#2C313A,#ABB2BF,#98C379,#E06C75,#3E4451,#5C6370"},{name:"Dracula",schema:"#282A36,#343746,#BD93F9,#FFFFFF,#343746,#F8F8F2,#50FA7B,#FF79C6,#44475A,#6272A4"},{name:"GitHub Dark",schema:"#0D1117,#161B22,#1F6FEB,#FFFFFF,#161B22,#C9D1D9,#3FB950,#F85149,#21262D,#8B949E"},{name:"Nord",schema:"#2E3440,#3B4252,#88C0D0,#ECEFF4,#3B4252,#D8DEE9,#A3BE8C,#BF616A,#434C5E,#4C566A"},{name:"Monokai",schema:"#272822,#3E3D32,#F92672,#FFFFFF,#3E3D32,#F8F8F2,#A6E22E,#F92672,#49483E,#75715E"},{name:"Solarized Dark",schema:"#002B36,#073642,#2AA198,#FFFFFF,#073642,#839496,#859900,#DC322F,#073642,#586E75"},{name:"Tokyo Night",schema:"#1A1B26,#24283B,#7AA2F7,#FFFFFF,#24283B,#A9B1D6,#73DACA,#F7768E,#2F3549,#565F89"},{name:"Catppuccin Mocha",schema:"#1E1E2E,#313244,#89B4FA,#FFFFFF,#313244,#CDD6F4,#A6E3A1,#F38BA8,#45475A,#6C7086"},{name:"Gruvbox Dark",schema:"#282828,#3C3836,#FABD2F,#282828,#3C3836,#EBDBB2,#B8BB26,#FB4934,#504945,#928374"},{name:"Ayu Dark",schema:"#0B0E14,#131721,#E6B450,#0B0E14,#131721,#BFBDB6,#AAD94C,#F07178,#11151C,#565B66"},{name:"Ayu Mirage",schema:"#1F2430,#272D38,#FFCC66,#1F2430,#272D38,#CCCAC2,#D5FF80,#F28779,#171B24,#5C6166"},{name:"Ayu Light",schema:"#FAFAFA,#F0F0F0,#FF9940,#FFFFFF,#F0F0F0,#575F66,#86B300,#F07171,#E8E8E8,#ABB0B6"},{name:"Night Owl",schema:"#011627,#0B2942,#7E57C2,#FFFFFF,#0B2942,#D6DEEB,#ADDB67,#EF5350,#122D42,#5F7E97"},{name:"One Light",schema:"#FAFAFA,#EAEAEB,#4078F2,#FFFFFF,#EAEAEB,#383A42,#50A14F,#E45649,#D4D4D4,#A0A1A7"},{name:"Shades of Purple",schema:"#222244,#2D2B55,#B362FF,#FFFFFF,#2D2B55,#A599E9,#3AD900,#FAD000,#3B3768,#7E74A8"}],Ti=["Column BG","Menu Hover","Active Item","Active Text","Hover Item","Text Color","Presence","Badge","Divider","Alt Text"],U={apiKey:"meet-ai-key",handle:"meet-ai-handle",colorSchema:"meet-ai-color-schema"};function Li(){return localStorage.getItem(U.apiKey)}function vr(t){localStorage.setItem(U.apiKey,t)}function ma(){localStorage.removeItem(U.apiKey)}function at(){let t=Li(),i={"Content-Type":"application/json"};if(t)i.Authorization="Bearer "+t;return i}async function sr(){let t=await fetch("/api/rooms",{headers:at()});if(t.status===401)return ma(),location.href="/key",[];return t.json()}async function Fr(t){let i=await fetch(`/api/rooms/${t}/messages`,{headers:at()});if(!i.ok)return[];return i.json()}async function or(t,i){let r=await fetch(`/api/rooms/${t}/messages?since_seq=${i}`,{headers:at()});if(!r.ok)return[];return r.json()}async function ur(t){let i=await fetch(`/api/rooms/${t}/logs`,{headers:at()});if(!i.ok)return[];return(await i.json()).map((a)=>({...a,type:"log"}))}async function mt(t,i,r){let a=await fetch(`/api/rooms/${t}/messages`,{method:"POST",headers:at(),body:JSON.stringify({sender:i,content:r})});if(!a.ok)throw Error("HTTP "+a.status)}async function Gt(t){let i=await fetch("/api/auth/claim/"+encodeURIComponent(t));if(!i.ok)throw Error("Link expired or invalid");return i.json()}async function cr(){let t=await fetch("/api/auth/share",{method:"POST",headers:at()});if(!t.ok)throw Error("Failed to create share link");return t.json()}function n(t,i,r){let a;if(!i||!("children"in i))a=Lt(t,i,[]);else{let v=i.children;a=Array.isArray(v)?Lt(t,i,v):Lt(t,i,[v])}return a.key=r,a}function _t({onLogin:t}){let[i,r]=A(""),[a,v]=A(!1),s=z(null);L(()=>{s.current?.focus()},[]);let F=g(async()=>{let l=s.current?.value.trim();if(!l)return;r(""),v(!0);try{if(l.startsWith("http")&&l.includes("/auth/")){let u=l.split("/auth/").pop()?.split("?")[0]?.split("#")[0];if(!u){r("Invalid link"),v(!1);return}let P=await Gt(u);t(P.api_key)}else if(l.startsWith("mai_"))t(l);else r("Invalid link or key"),v(!1)}catch(u){r(u.message||"Connection error. Try again."),v(!1)}},[t]),o=g((l)=>{if(l.key==="Enter")l.preventDefault(),F()},[F]);return n("div",{class:"main",style:"height:100dvh",children:n("div",{class:"login-prompt",children:[n("h2",{children:"Welcome to meet-ai"},void 0,!1,void 0,this),n("p",{children:"Paste a login link from another device or enter your API key to continue."},void 0,!1,void 0,this),n("div",{class:"login-prompt-form",children:[n("input",{ref:s,type:"text",placeholder:"Paste login link or API key",autocomplete:"off",spellcheck:!1,onKeyDown:o},void 0,!1,void 0,this),n("button",{onClick:F,disabled:a,children:a?"...":"Go"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"login-error",children:i},void 0,!1,void 0,this),n("div",{class:"login-or",children:["or ",n("a",{href:"/",children:"get an API key"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function Yt({token:t,onLogin:i}){let[r,a]=A(""),[v,s]=A(!1),F=window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches,o=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,l=/Android/.test(navigator.userAgent),u=g(async()=>{s(!0),a("");try{let w=await Gt(t);i(w.api_key)}catch(w){a(w.message||"Connection error. Try again."),s(!1)}},[t,i]),P=v?"Connecting...":F?"Connect":"Connect in browser",c=null;if(!F)if(o)c=n("div",{class:"install-steps",children:[n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"1"},void 0,!1,void 0,this),n("div",{class:"step-text",children:["Tap the ",n("strong",{children:"Share"},void 0,!1,void 0,this)," button at the bottom of Safari"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"2"},void 0,!1,void 0,this),n("div",{class:"step-text",children:["Scroll down and tap ",n("strong",{children:"Add to Home Screen"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"3"},void 0,!1,void 0,this),n("div",{class:"step-text",children:["Tap ",n("strong",{children:"Add"},void 0,!1,void 0,this)," in the top right corner"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"4"},void 0,!1,void 0,this),n("div",{class:"step-text",children:["Open the app from your Home Screen and tap ",n("strong",{children:"Connect"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);else if(l)c=n("div",{class:"install-steps",children:[n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"1"},void 0,!1,void 0,this),n("div",{class:"step-text",children:["Tap the ",n("strong",{children:"menu"},void 0,!1,void 0,this)," button ⋮ in Chrome"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"2"},void 0,!1,void 0,this),n("div",{class:"step-text",children:["Tap ",n("strong",{children:"Install app"},void 0,!1,void 0,this)," or ",n("strong",{children:"Add to Home screen"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"3"},void 0,!1,void 0,this),n("div",{class:"step-text",children:["Open the app from your Home Screen and tap ",n("strong",{children:"Connect"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);else c=n("div",{class:"install-steps",children:[n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"1"},void 0,!1,void 0,this),n("div",{class:"step-text",children:"Install the app using your browser's install option"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"2"},void 0,!1,void 0,this),n("div",{class:"step-text",children:["Open the app and tap ",n("strong",{children:"Connect"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);return n("div",{class:"main",style:"height:100dvh",children:n("div",{class:"token-screen",children:[n("h2",{children:F?"Connect to chat":"Install meet-ai"},void 0,!1,void 0,this),n("p",{children:F?"Tap the button below to activate your session.":"Add meet-ai to your Home Screen for the best experience."},void 0,!1,void 0,this),F?n("div",{class:"token-card",children:[n("button",{type:"button",class:"connect-btn",onClick:u,disabled:v,children:P},void 0,!1,void 0,this),n("div",{class:"connect-error",children:r},void 0,!1,void 0,this)]},void 0,!0,void 0,this):n(K,{children:[c&&n("div",{class:"token-card",children:c},void 0,!1,void 0,this),n("div",{class:"separator"},void 0,!1,void 0,this),n("p",{class:"alt-text",children:"Or connect directly in this browser:"},void 0,!1,void 0,this),n("div",{class:"token-card",children:[n("button",{type:"button",class:"connect-btn",onClick:u,disabled:v,children:P},void 0,!1,void 0,this),n("div",{class:"connect-error",children:r},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function Zt({onSettingsClick:t,onCloseClick:i}){return n("div",{class:"sidebar-header",children:[n("span",{children:"meet-ai"},void 0,!1,void 0,this),n("div",{class:"sidebar-header-actions",children:[n("button",{title:"Color Settings",onClick:t,children:n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"},void 0,!1,void 0,this),n("circle",{cx:"12",cy:"12",r:"3"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),n("button",{class:"sidebar-close-btn",title:"Close sidebar",onClick:i,children:n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("path",{d:"M18 6L6 18"},void 0,!1,void 0,this),n("path",{d:"M6 6l12 12"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function kt({rooms:t,currentRoomId:i,onSelectRoom:r}){return n(K,{children:[n("div",{class:"sidebar-section-label",children:"Channels"},void 0,!1,void 0,this),n("div",{class:"room-list",children:t.map((a)=>n("div",{class:`room-item${a.id===i?" active":""}`,onClick:()=>r(a),children:[n("span",{class:"room-hash",children:"#"},void 0,!1,void 0,this)," ",a.name]},a.id,!0,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Qt({onIOSInstall:t}){let[i,r]=A(null),[a,v]=A(!1),[s,F]=A(!1);L(()=>{if(window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches)return;if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){v(!0),F(!0);return}let P=(w)=>{w.preventDefault(),r(w),F(!0)};window.addEventListener("beforeinstallprompt",P);let c=()=>{F(!1),r(null)};return window.addEventListener("appinstalled",c),()=>{window.removeEventListener("beforeinstallprompt",P),window.removeEventListener("appinstalled",c)}},[]);let o=g(async()=>{if(a){t();return}if(i){await i.prompt();let{outcome:l}=await i.userChoice;if(l==="accepted")F(!1);r(null)}},[a,i,t]);if(!s)return null;return n("button",{class:"install-btn",title:"Install app",onClick:o,children:[n("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},void 0,!1,void 0,this),n("polyline",{points:"7 10 12 15 17 10"},void 0,!1,void 0,this),n("line",{x1:"12",y1:"15",x2:"12",y2:"3"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"Install"]},void 0,!0,void 0,this)}function Wt({userName:t,onNameChange:i,onInstallClick:r}){let[a,v]=A(!1),[s,F]=A(t),o=g(()=>{F(t),v(!0)},[t]),l=g(()=>{let P=s.trim();if(P)i(P);v(!1)},[s,i]),u=g((P)=>{if(P.key==="Enter")P.preventDefault(),l();if(P.key==="Escape")F(t),v(!1)},[l,t]);return n("div",{class:"sidebar-footer",children:[n("span",{class:"user-presence",style:"width:8px;height:8px;border-radius:50%;background:var(--c-presence);flex-shrink:0;"},void 0,!1,void 0,this),a?n("input",{type:"text",value:s,maxLength:30,style:"background:var(--c-hover-item);color:inherit;border:1px solid var(--c-sidebar-border);border-radius:4px;padding:2px 6px;font-size:16px;width:130px;outline:none;font-weight:600;",onInput:(P)=>F(P.target.value),onKeyDown:u,onBlur:l,ref:(P)=>P?.focus()},void 0,!1,void 0,this):n("span",{class:"user-handle",title:"Click to change your name",onClick:o,children:t},void 0,!1,void 0,this),n("div",{class:"sidebar-footer-actions",children:[n(Qt,{onIOSInstall:r},void 0,!1,void 0,this),n("button",{title:"API Key settings",onClick:()=>{location.href="/key"},children:n("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:n("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function It({rooms:t,currentRoomId:i,userName:r,isOpen:a,onSelectRoom:v,onNameChange:s,onSettingsClick:F,onClose:o,onInstallClick:l}){return n("aside",{class:`sidebar${a?" open":""}`,children:[n(Zt,{onSettingsClick:F,onCloseClick:o},void 0,!1,void 0,this),n(kt,{rooms:t,currentRoomId:i,onSelectRoom:v},void 0,!1,void 0,this),n(Wt,{userName:r,onNameChange:s,onInstallClick:l},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function qt({onClick:t}){return n("div",{class:"sidebar-backdrop",onClick:t,style:"display:block"},void 0,!1,void 0,this)}function Ut({roomName:t,showInvite:i,showTeamToggle:r,onMobileToggle:a,onTeamToggle:v,onInviteClick:s}){return n("div",{class:"main-header",children:[n("div",{class:"main-header-left",children:[n("button",{class:"mobile-toggle",onClick:a,children:"☰"},void 0,!1,void 0,this),n("span",{class:"channel-hash",children:"#"},void 0,!1,void 0,this),n("span",{class:"channel-name",children:t},void 0,!1,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"main-header-right",children:[i&&n("button",{class:"invite-btn",title:"Open on phone",onClick:s,children:n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},void 0,!1,void 0,this),n("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),r&&n("button",{class:"team-toggle",title:"Team members",onClick:v,children:n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},void 0,!1,void 0,this),n("circle",{cx:"9",cy:"7",r:"4"},void 0,!1,void 0,this),n("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"},void 0,!1,void 0,this),n("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function Jt({message:t="Select or create a channel to start chatting",showBackLink:i}){return n("div",{class:"empty-state",children:[n("div",{class:"icon",children:"#"},void 0,!1,void 0,this),n("div",{children:t},void 0,!1,void 0,this),i&&n("div",{style:"font-size:13px;margin-top:4px",children:n("a",{href:"/chat",style:"color:var(--c-primary)",children:"Back to channels"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Hi(t){let i=t.split(",").map((r)=>r.trim());while(i.length<10)i.push("#888888");return i}function Ct(t){if(t=t.replace("#",""),t.length===3)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];let i=parseInt(t,16);return[i>>16&255,i>>8&255,i&255]}function N(t){let[i,r,a]=Ct(t).map((v)=>{return v=v/255,v<=0.04045?v/12.92:Math.pow((v+0.055)/1.055,2.4)});return 0.2126*i+0.7152*r+0.0722*a}function I(t,i){let r=N(t),a=N(i),v=Math.max(r,a),s=Math.min(r,a);return(v+0.05)/(s+0.05)}function lr(t,i,r){if(I(t,i)>=r)return t;let a=I("#FFFFFF",i),v=I("#000000",i);return a>=v?"#FFFFFF":"#000000"}function Aa(t){if(N(t)>=0.5)return"#FFFFFF";let[r,a,v]=Ct(t);return"#"+[r,a,v].map((s)=>Math.max(0,Math.round(s*0.78+2)).toString(16).padStart(2,"0")).join("")}function $a(t,i){if(N(t)>=0.5)return"#1D1C1D";return i||"#ABB2BF"}function fa(t,i){if(N(t)>=0.5)return"#E0E0E0";return i||"#3e4451"}function R(t){let i=Hi(t),r=document.documentElement,a=N(i[0])<0.5,v=lr(i[5],i[0],3),s=lr(i[3],i[2],3);r.style.setProperty("--c-sidebar-bg",i[0]),r.style.setProperty("--c-sidebar-text",v),r.style.setProperty("--c-active-item",i[2]),r.style.setProperty("--c-active-item-text",s),r.style.setProperty("--c-hover-item",i[4]||i[1]),r.style.setProperty("--c-presence",i[6]),r.style.setProperty("--c-primary",i[6]),r.style.setProperty("--c-sidebar-border",i[8]||(a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"));let F=Aa(i[0]),o=$a(F,v),l=fa(i[0],i[8]);r.style.setProperty("--c-header-bg",F),r.style.setProperty("--c-header-text",o),r.style.setProperty("--c-chat-bg",F),r.style.setProperty("--c-msg-text",o),r.style.setProperty("--c-border",l),document.body.style.background=F,r.style.setProperty("--c-input-bg",a?i[0]:F);let u=I("#FFFFFF",i[6]),P=I("#000000",i[6]);r.style.setProperty("--c-primary-text",u>=P?"#FFFFFF":"#000000")}function Xt(t){let i=0;for(let a=0;a<t.length;a++)i=t.charCodeAt(a)+((i<<5)-i);return`hsl(${(i%360+360)%360}, 60%, 45%)`}function Pr(t){let i=0;for(let a=0;a<t.length;a++)i=t.charCodeAt(a)+((i<<5)-i);return`hsl(${(i%360+360)%360}, 50%, 35%)`}var Mi=(()=>{let t=document.createElement("div");return t.style.display="none",document.body.appendChild(t),t})();function zi(t){Mi.style.color="",Mi.style.color=t;let r=getComputedStyle(Mi).color.match(/(\d+)/g);if(!r||r.length<3)return t;return"#"+r.slice(0,3).map((a)=>parseInt(a).toString(16).padStart(2,"0")).join("")}function E(t){let i=zi(t),r=getComputedStyle(document.documentElement).getPropertyValue("--c-chat-bg").trim()||"#FFFFFF";if(I(i,r)>=3)return t;let a=N(r),[v,s,F]=Ct(i);if(a<0.5){for(let o=1.5;o<=3;o+=0.3){let l="#"+[v,s,F].map((u)=>Math.min(255,Math.round(u*o)).toString(16).padStart(2,"0")).join("");if(I(l,r)>=3)return l}return"#CCCCCC"}else{for(let o=0.5;o>=0.2;o-=0.1){let l="#"+[v,s,F].map((u)=>Math.round(u*o).toString(16).padStart(2,"0")).join("");if(I(l,r)>=3)return l}return"#555555"}}function wr(t){return DOMPurify.sanitize(marked.parse(t,{breaks:!0}))}function gr(t){if(window.highlightAllCode)window.highlightAllCode(t)}function Ba(t){let i=document.createElement("div");return i.textContent=t,i.innerHTML}function Ta(t){if(!t)return"";try{let i=new Date(t);if(isNaN(i.getTime()))return"";return i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}}function bt({sender:t,content:i,color:r,timestamp:a,tempId:v,status:s="sent",onRetry:F}){let o=z(null),l=r?E(r):Xt(t),u=r?E(r):Pr(t),P=t.slice(0,2).toUpperCase(),c=zi(u),w=I("#FFFFFF",c)>=I("#000000",c)?"#FFFFFF":"#000000",B=s==="pending"?" msg-pending":s==="failed"?" msg-failed":"",T=s==="pending"?"sending":s==="failed"?"failed":Ta(a);return L(()=>{if(o.current)o.current.innerHTML=wr(i),gr(o.current)},[i]),n("div",{class:`msg${B}`,"data-temp-id":v,"data-content":v?i:void 0,children:[n("div",{class:"msg-avatar",style:`background:${u};color:${w}`,children:Ba(P)},void 0,!1,void 0,this),n("div",{class:"msg-body",children:[n("div",{class:"msg-header",children:[n("span",{class:"msg-sender",style:`color:${l}`,children:t},void 0,!1,void 0,this),n("span",{class:"msg-time",children:T},void 0,!1,void 0,this),s==="failed"&&F&&n("span",{class:"msg-retry",onClick:F,style:"display:inline",children:"retry"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"msg-content",ref:o},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function Gi(t){if(!t)return"";try{let i=new Date(t);if(isNaN(i.getTime()))return"";return i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return""}}function La(t){let i=[...new Set(t.map((a)=>a.sender))],r=t.length;if(i.length===1)return`${r} log ${r===1?"entry":"entries"} from ${i[0]}`;return`${r} log entries from ${i.length} agents`}function Kt({logs:t}){let[i,r]=A(!1);if(t.length===0)return null;let a=Gi(t[0].created_at),v=t.length>1?Gi(t[t.length-1].created_at):null,s=v&&v!==a?`${a} - ${v}`:a;return n("div",{class:"log-group",children:[n("div",{class:"log-group-header",onClick:()=>r(!i),children:[n("span",{class:"log-group-toggle",children:i?"▾":"▸"},void 0,!1,void 0,this),n("span",{class:"log-group-summary",children:La(t)},void 0,!1,void 0,this),n("span",{class:"log-group-time",children:s},void 0,!1,void 0,this)]},void 0,!0,void 0,this),i&&n("div",{class:"log-group-entries",children:t.map((F,o)=>{let l=F.color?E(F.color):Xt(F.sender);return n("div",{class:"log-entry",children:[n("span",{class:"log-entry-time",children:Gi(F.created_at)},void 0,!1,void 0,this),n("span",{class:"log-entry-sender",style:`color:${l}`,children:[F.sender,":"]},void 0,!0,void 0,this),n("span",{class:"log-entry-content",children:F.content},void 0,!1,void 0,this)]},`${F.sender}-${F.created_at}-${o}`,!0,void 0,this)})},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Ot({count:t,onClick:i}){if(t===0)return null;return n("div",{class:"new-messages-pill",onClick:i,children:[t," new message",t===1?"":"s"," ↓"]},void 0,!0,void 0,this)}function yr(t){let i=z(!0),[r,a]=A(!0),v=z(0);L(()=>{let o=t.current;if(!o)return;let l=()=>{let u=o.scrollHeight-o.scrollTop-o.clientHeight<150;i.current=u,a(u)};return o.addEventListener("scroll",l,{passive:!0}),()=>o.removeEventListener("scroll",l)},[t]);let s=g(()=>i.current??!0,[]),F=g(()=>{cancelAnimationFrame(v.current),v.current=requestAnimationFrame(()=>{let o=t.current;if(!o)return;o.scrollTop=o.scrollHeight,i.current=!0,a(!0)})},[t]);return L(()=>()=>cancelAnimationFrame(v.current),[]),{isAtBottom:s,atBottom:r,scrollToBottom:F}}function Ha(t){let i=new Map,r=[];for(let F=0;F<t.length;F++){let o=t[F];if(o.type==="log"&&o.message_id){let l=i.get(o.message_id)||[];l.push(o),i.set(o.message_id,l)}else r.push({index:F,msg:o})}let a=[],v=[];function s(){if(v.length>0)a.push({kind:"log-group",logs:v}),v=[]}for(let{index:F,msg:o}of r)if(o.type==="log")v.push(o);else{s(),a.push({kind:"message",msg:o,index:F});let l=o.id?i.get(o.id):void 0;if(l&&l.length>0)a.push({kind:"log-group",logs:l})}return s(),a}function Rt({messages:t,unreadCount:i,forceScrollCounter:r,onScrollToBottom:a,onRetry:v}){let s=z(null),{isAtBottom:F,atBottom:o,scrollToBottom:l}=yr(s),u=z(0);L(()=>{if(t.length>(u.current??0)&&F())l();u.current=t.length},[t.length]),L(()=>{if(o&&i>0)a()},[o,i,a]),L(()=>{if(r>0)l()},[r]),L(()=>{l()},[]);let P=Ha(t);return n("div",{class:"messages",ref:s,children:[P.map((c,w)=>{if(c.kind==="log-group"){let T=c.logs[0];return n(Kt,{logs:c.logs},`log-group-${T.sender}-${T.created_at}-${w}`,!1,void 0,this)}let B=c.msg;return n(bt,{sender:B.sender,content:B.content,color:B.color,timestamp:B.created_at,tempId:B.tempId,status:B.status,onRetry:B.tempId&&v?()=>v(B.tempId):void 0},B.tempId||`${B.sender}-${B.created_at}-${c.index}`,!1,void 0,this)}),n(Ot,{count:i,onClick:()=>{l(),a()}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Ma(t,i){let{selectionStart:r,selectionEnd:a,value:v}=t,s=v.slice(r,a),F;switch(i){case"bold":F=`**${s||"text"}**`;break;case"italic":F=`*${s||"text"}*`;break;case"code":F=s.includes(`
`)?`\`\`\`
${s||"code"}
\`\`\``:`\`${s||"code"}\``;break;case"link":F=`[${s||"text"}](url)`;break;default:return}t.value=v.slice(0,r)+F+v.slice(a),t.focus();let o=r+F.length;t.setSelectionRange(o,o)}var J=(t)=>t.preventDefault();function ht({textareaRef:t,onSend:i}){let r=(a)=>{if(t.current)Ma(t.current,a)};return n("div",{class:"chat-input-toolbar",children:[n("button",{class:"fmt-btn",title:"Bold",onMouseDown:J,onTouchStart:J,onTouchEnd:()=>r("bold"),onClick:()=>r("bold"),children:n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:n("path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),n("button",{class:"fmt-btn",title:"Italic",onMouseDown:J,onTouchStart:J,onTouchEnd:()=>r("italic"),onClick:()=>r("italic"),children:n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("line",{x1:"19",x2:"10",y1:"4",y2:"4"},void 0,!1,void 0,this),n("line",{x1:"14",x2:"5",y1:"20",y2:"20"},void 0,!1,void 0,this),n("line",{x1:"15",x2:"9",y1:"4",y2:"20"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),n("button",{class:"fmt-btn",title:"Code",onMouseDown:J,onTouchStart:J,onTouchEnd:()=>r("code"),onClick:()=>r("code"),children:n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("polyline",{points:"16 18 22 12 16 6"},void 0,!1,void 0,this),n("polyline",{points:"8 6 2 12 8 18"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),n("button",{class:"fmt-btn",title:"Link",onMouseDown:J,onTouchStart:J,onTouchEnd:()=>r("link"),onClick:()=>r("link"),children:n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},void 0,!1,void 0,this),n("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),n("div",{class:"toolbar-spacer"},void 0,!1,void 0,this),n("button",{class:"send-btn",title:"Send",onMouseDown:J,onTouchStart:J,onTouchEnd:i,onClick:i,children:n("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"},void 0,!1,void 0,this),n("path",{d:"m21.854 2.147-10.94 10.939"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function mr(t){let i=g(()=>{let a=t.current;if(!a)return;a.style.height="auto",a.style.height=Math.min(a.scrollHeight,200)+"px"},[t]),r=g(()=>{let a=t.current;if(!a)return;a.value="",a.style.height="auto"},[t]);return{resize:i,reset:r}}function St({roomName:t,onSend:i}){let r=z(null),{resize:a,reset:v}=mr(r),s=g(()=>{let o=r.current,l=o?.value.trim();if(!l||!o)return;i(l),v(),o.focus(),requestAnimationFrame(()=>o.focus())},[i,v]),F=g((o)=>{if(o.key==="Enter"&&!o.shiftKey&&!matchMedia("(pointer: coarse)").matches)o.preventDefault(),s()},[s]);return n("div",{class:"chat-input-area",children:n("div",{class:"chat-input-box",children:[n("textarea",{ref:r,placeholder:`Message #${t}`,rows:1,onInput:a,onKeyDown:F},void 0,!1,void 0,this),n(ht,{textareaRef:r,onSend:s},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}var _i=1000,za=30000;function Ar(t,i,r,a){let v=z(null),s=z(r);s.current=r;let F=z(a?.onTeamInfo);F.current=a?.onTeamInfo;let o=z(0),l=z(_i),[u,P]=A(!0);return L(()=>{if(!t||!i)return;async function c(){if(!t||o.current===0)return;try{let T=await or(t,o.current);for(let M of T){if(M.seq&&M.seq>o.current)o.current=M.seq;s.current?.(M)}}catch{}}function w(){if(v.current)v.current.close();let T=location.protocol==="https:"?"wss:":"ws:",M=`?token=${encodeURIComponent(i)}`,Y=new WebSocket(`${T}//${location.host}/api/rooms/${t}/ws${M}`);Y.onopen=()=>{P(!0),l.current=_i,c()},Y.onmessage=(Z)=>{try{let m=JSON.parse(Z.data);if(m.type==="team_info"){F.current?.(m);return}let f=m;if(!f.sender||!f.content)return;if(f.seq&&f.seq>o.current)o.current=f.seq;s.current?.(f)}catch{}},Y.onerror=()=>console.error("WebSocket error"),Y.onclose=()=>{P(!1);let Z=l.current;l.current=Math.min(Z*2,za),setTimeout(()=>{if(v.current===Y)w()},Z)},v.current=Y}w();let B=()=>{if(document.visibilityState==="visible")if(!v.current||v.current.readyState!==WebSocket.OPEN)l.current=_i,w();else c()};return document.addEventListener("visibilitychange",B),()=>{if(document.removeEventListener("visibilitychange",B),v.current){let T=v.current;v.current=null,T.close()}}},[t,i]),{wsRef:v,connected:u}}function Nt(){return new Promise((t,i)=>{let r=indexedDB.open("meet-ai-queue",1);r.onupgradeneeded=()=>{let a=r.result;if(!a.objectStoreNames.contains("outbox"))a.createObjectStore("outbox",{keyPath:"tempId"})},r.onsuccess=()=>t(r.result),r.onerror=()=>i(r.error)})}async function Ga(t){let r=(await Nt()).transaction("outbox","readwrite");if(r.objectStore("outbox").put(t),await new Promise((a,v)=>{r.oncomplete=()=>a(),r.onerror=()=>v(r.error)}),"serviceWorker"in navigator&&"SyncManager"in window)await(await navigator.serviceWorker.ready).sync.register("send-messages")}async function _a(t){try{(await Nt()).transaction("outbox","readwrite").objectStore("outbox").delete(t)}catch{}}async function Ya(t){let a=(await Nt()).transaction("outbox","readonly").objectStore("outbox").getAll();return(await new Promise((s,F)=>{a.onsuccess=()=>s(a.result),a.onerror=()=>F(a.error)})).filter((s)=>s.roomId===t)}async function Za(){let r=(await Nt()).transaction("outbox","readonly").objectStore("outbox").getAll();return new Promise((a,v)=>{r.onsuccess=()=>a(r.result),r.onerror=()=>v(r.error)})}function $r(){let t=g(Ga,[]),i=g(_a,[]),r=g(Ya,[]),a=g(Za,[]);return{queue:t,remove:i,getForRoom:r,getAll:a}}async function fr(){if(!("Notification"in window))return"denied";if(Notification.permission!=="default")return Notification.permission;return Notification.requestPermission()}function Br(t,i){if(!("Notification"in window))return;if(Notification.permission!=="granted")return;if(document.visibilityState!=="hidden")return;if(t.type==="log")return;if(t.sender===i)return;let r=new Notification(t.sender,{body:t.content.slice(0,100),tag:t.id??t.message_id??void 0,icon:"/favicon.ico"});r.onclick=()=>{window.focus(),r.close()}}function pt({room:t,apiKey:i,userName:r,onTeamInfo:a}){let[v,s]=A([]),[F,o]=A(0),[l,u]=A(0),{queue:P,remove:c,getForRoom:w}=$r();L(()=>{let m=!1;async function f(){let[y,$]=await Promise.all([Fr(t.id),ur(t.id)]);if(m)return;let G=[...y,...$].sort((C,q)=>new Date(C.created_at).getTime()-new Date(q.created_at).getTime());s(G.map((C)=>({...C,status:"sent"})));try{let C=await w(t.id);if(m||C.length===0)return;if(s((q)=>[...q,...C.map((X)=>({sender:X.sender,content:X.content,created_at:new Date(X.timestamp).toISOString(),tempId:X.tempId,status:"failed"}))]),navigator.onLine)for(let q of C)try{if(await mt(q.roomId,q.sender,q.content),await c(q.tempId),!m)s((X)=>X.map((At)=>At.tempId===q.tempId?{...At,status:"sent"}:At))}catch{}}catch{}}return f(),()=>{m=!0}},[t.id]),L(()=>{fr()},[]);let B=g((m)=>{if(Br(m,r),m.sender===r)s((f)=>{let y=f.findIndex(($)=>$.tempId&&$.content===m.content);if(y!==-1){let $=[...f];return $.splice(y,1),[...$,{...m,status:"sent"}]}return[...f,{...m,status:"sent"}]});else s((f)=>[...f,{...m,status:"sent"}]),o((f)=>f+1)},[r]),T=g((m)=>{a?.(m)},[a]),{connected:M}=Ar(t.id,i,B,{onTeamInfo:T});L(()=>{let m=async()=>{try{let f=await w(t.id);for(let y of f){s(($)=>$.map((G)=>G.tempId===y.tempId?{...G,status:"pending"}:G));try{await mt(y.roomId,y.sender,y.content),await c(y.tempId),s(($)=>$.map((G)=>G.tempId===y.tempId?{...G,status:"sent"}:G))}catch{s(($)=>$.map((G)=>G.tempId===y.tempId?{...G,status:"failed"}:G))}}}catch{}};return window.addEventListener("online",m),()=>window.removeEventListener("online",m)},[t.id]);let Y=g(async(m)=>{let f="pending-"+Date.now()+"-"+Math.random().toString(36).slice(2,6);s((y)=>[...y,{sender:r,content:m,created_at:new Date().toISOString(),tempId:f,status:"pending"}]),u((y)=>y+1);try{await mt(t.id,r,m),s((y)=>y.map(($)=>$.tempId===f?{...$,status:"sent"}:$))}catch{await P({tempId:f,roomId:t.id,sender:r,content:m,apiKey:i,timestamp:Date.now()}),s((y)=>y.map(($)=>$.tempId===f?{...$,status:"failed"}:$))}},[t.id,r,i]),Z=g(async(m)=>{let f=v.find((y)=>y.tempId===m);if(!f)return;s((y)=>y.map(($)=>$.tempId===m?{...$,status:"pending"}:$));try{await mt(t.id,r,f.content),s((y)=>y.map(($)=>$.tempId===m?{...$,status:"sent"}:$)),await c(m)}catch{s((y)=>y.map(($)=>$.tempId===m?{...$,status:"failed"}:$))}},[t.id,r,v]);return n(K,{children:[!M&&n("div",{class:"reconnecting-bar",children:"Reconnecting..."},void 0,!1,void 0,this),n(Rt,{messages:v,unreadCount:F,forceScrollCounter:l,onScrollToBottom:()=>o(0),onRetry:Z},void 0,!1,void 0,this),n(St,{roomName:t.name,onSend:Y},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Et({currentRoom:t,apiKey:i,userName:r,showInvite:a,showTeamToggle:v,onMobileToggle:s,onTeamToggle:F,onInviteClick:o,onTeamInfo:l}){let u=t?.name??"Select a channel";return n("div",{class:"main",children:[n(Ut,{roomName:u,showInvite:a&&!!t,showTeamToggle:v,onMobileToggle:s,onTeamToggle:F,onInviteClick:o},void 0,!1,void 0,this),t?n(pt,{room:t,apiKey:i,userName:r,onTeamInfo:l},t.id,!1,void 0,this):n(Jt,{},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Tr({member:t,inactive:i}){return n("div",{class:`team-member${i?" team-member--inactive":""}`,children:[n("span",{class:"team-member-dot",style:{background:i?"#555":E(t.color)}},void 0,!1,void 0,this),n("span",{class:"team-member-name",children:t.name},void 0,!1,void 0,this),n("span",{class:"team-member-model",children:t.model},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Dt({teamInfo:t,isOpen:i,onClose:r}){let a=t.members.filter((s)=>s.status==="active"),v=t.members.filter((s)=>s.status==="inactive");return n("div",{class:`team-sidebar${i?" open":""}`,children:[n("div",{class:"team-sidebar-header",children:[n("span",{children:t.team_name},void 0,!1,void 0,this),n("span",{class:"team-sidebar-count",children:[a.length,"/",t.members.length]},void 0,!0,void 0,this),n("button",{class:"team-sidebar-close-btn",onClick:r,children:"×"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),a.length>0&&n("div",{class:"team-section",children:[n("div",{class:"team-section-label",children:"Active"},void 0,!1,void 0,this),a.map((s)=>n(Tr,{member:s},s.name,!1,void 0,this))]},void 0,!0,void 0,this),v.length>0&&n("div",{class:"team-section",children:[n("div",{class:"team-section-label",children:"Inactive"},void 0,!1,void 0,this),v.map((s)=>n(Tr,{member:s,inactive:!0},s.name,!1,void 0,this))]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function Vt({schema:t}){let i=Hi(t);return n("div",{class:"color-preview",children:i.map((r,a)=>n("div",{class:"color-swatch",style:`background:${r}`,title:Ti[a],children:Ti[a]},a,!1,void 0,this))},void 0,!1,void 0,this)}function dt({currentSchema:t,onSave:i,onClose:r}){let[a,v]=A(t),[s,F]=A(()=>{let T=Bi.find((M)=>M.schema===t);return T?T.schema:""}),o=t,l=g((T)=>{let M=T.target.value;v(M),F(""),R(M.trim())},[]),u=g((T)=>{let M=T.target.value;if(F(M),M)v(M),R(M)},[]),P=g(()=>{i(a.trim())},[a,i]),c=g(()=>{R(o),r()},[o,r]),w=g(()=>{v(rt),F(rt),R(rt)},[]),B=g((T)=>{if(T.target.classList.contains("settings-overlay"))R(o),r()},[o,r]);return n("div",{class:"settings-overlay",onClick:B,children:n("div",{class:"settings-panel",children:[n("h2",{children:"Color Schema"},void 0,!1,void 0,this),n("label",{children:"Theme Presets"},void 0,!1,void 0,this),n("select",{value:s,onChange:u,children:[n("option",{value:"",children:"Custom"},void 0,!1,void 0,this),Bi.map((T)=>n("option",{value:T.schema,children:T.name},T.name,!1,void 0,this))]},void 0,!0,void 0,this),n("label",{children:"Schema string (10 comma-separated hex colors)"},void 0,!1,void 0,this),n("input",{type:"text",value:a,onInput:l},void 0,!1,void 0,this),n(Vt,{schema:a},void 0,!1,void 0,this),n("div",{class:"btn-row",children:[n("button",{class:"btn-reset",onClick:w,children:"Reset"},void 0,!1,void 0,this),n("button",{class:"btn-cancel",onClick:c,children:"Cancel"},void 0,!1,void 0,this),n("button",{class:"btn-save",onClick:P,children:"Save"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function xt({onClose:t,onToast:i}){let[r,a]=A(null),[v,s]=A(null),[F,o]=A(!1);L(()=>{let P=!1;async function c(){try{let w=await cr();if(P)return;a(w.url)}catch(w){if(!P)s(w.message||"Failed to create share link")}}return c(),()=>{P=!0}},[]),L(()=>{if(!r)return;let P=document.getElementById("qr-container");if(!P)return;try{let c=qrcode(0,"M");c.addData(r),c.make(),P.innerHTML=c.createImgTag(5,8)}catch{}},[r]);let l=g(async()=>{if(!r)return;try{await navigator.clipboard.writeText(r),o(!0),setTimeout(()=>o(!1),2000)}catch{let P=document.getElementById("qr-url");if(P){let c=document.createRange();c.selectNodeContents(P),window.getSelection()?.removeAllRanges(),window.getSelection()?.addRange(c)}}},[r]),u=g((P)=>{if(P.target.classList.contains("qr-overlay"))t()},[t]);return n("div",{class:"qr-overlay",onClick:u,children:n("div",{class:"qr-panel",children:[n("h2",{children:"Login on another device"},void 0,!1,void 0,this),n("p",{class:"qr-subtitle",children:"Scan with your phone camera to sign in"},void 0,!1,void 0,this),n("div",{class:"qr-container",id:"qr-container",children:[!r&&!v&&n("div",{style:"width:200px;height:200px;display:flex;align-items:center;justify-content:center;margin:0 auto",children:n("div",{style:"width:32px;height:32px;border:3px solid var(--c-border);border-top-color:var(--c-primary);border-radius:50%;animation:spin 0.8s linear infinite"},void 0,!1,void 0,this)},void 0,!1,void 0,this),v&&n("p",{style:"color:#F85149",children:v},void 0,!1,void 0,this)]},void 0,!0,void 0,this),r&&n("div",{class:"qr-url",id:"qr-url",onClick:l,title:"Click to copy",children:r},void 0,!1,void 0,this),n("div",{class:"qr-copied",children:F?"Copied to clipboard!":""},void 0,!1,void 0,this),n("div",{class:"qr-expires",children:"Expires in 5 minutes"},void 0,!1,void 0,this),n("button",{class:"btn-close",onClick:t,children:"Close"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function jt({onClose:t}){return n("div",{class:"ios-install-overlay",onClick:t,children:n("div",{class:"ios-install-panel",onClick:(i)=>i.stopPropagation(),children:[n("h3",{children:"Install meet-ai"},void 0,!1,void 0,this),n("div",{class:"ios-install-steps",children:[n("div",{class:"ios-install-step",children:[n("span",{class:"ios-step-num",children:"1"},void 0,!1,void 0,this),n("span",{class:"ios-step-text",children:["Tap the ",n("strong",{children:"Share"},void 0,!1,void 0,this)," button",n("svg",{class:"ios-share-icon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"},void 0,!1,void 0,this),n("polyline",{points:"16 6 12 2 8 6"},void 0,!1,void 0,this),n("line",{x1:"12",y1:"2",x2:"12",y2:"15"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"in the toolbar"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"ios-install-step",children:[n("span",{class:"ios-step-num",children:"2"},void 0,!1,void 0,this),n("span",{class:"ios-step-text",children:["Scroll down and tap ",n("strong",{children:"Add to Home Screen"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"ios-install-step",children:[n("span",{class:"ios-step-num",children:"3"},void 0,!1,void 0,this),n("span",{class:"ios-step-text",children:["Tap ",n("strong",{children:"Add"},void 0,!1,void 0,this)," in the top right"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n("button",{class:"ios-install-close",onClick:t,children:"Got it"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function et({text:t,onDone:i}){return L(()=>{let r=setTimeout(i,2100);return()=>clearTimeout(r)},[i]),n("div",{class:"toast",children:t},void 0,!1,void 0,this)}function Lr(t,i){let r=z(null),a=z(i);a.current=i,L(()=>{if(!t)return;function v(){let s=location.protocol==="https:"?"wss:":"ws:",F=`?token=${encodeURIComponent(t)}`,o=new WebSocket(`${s}//${location.host}/api/lobby/ws${F}`);o.onmessage=(l)=>{try{let u=JSON.parse(l.data);if(u.type==="room_created")a.current?.(u.id,u.name)}catch{}},o.onclose=()=>{setTimeout(()=>{if(r.current===o)v()},3000)},r.current=o}return v(),()=>{if(r.current){let s=r.current;r.current=null,s.close()}}},[t])}function ti(){let t=location.pathname.match(/^\/chat\/([a-f0-9-]+)$/i);return t?t[1]:null}function Hr(t,i){L(()=>{let v=()=>{let s=ti();i(s)};return window.addEventListener("popstate",v),()=>window.removeEventListener("popstate",v)},[t,i]);let r=g((v)=>{history.pushState({roomId:v},"","/chat/"+v)},[]),a=g((v)=>{history.replaceState(null,"",v)},[]);return{pushRoom:r,replaceUrl:a}}function ii({apiKey:t,userName:i,colorSchema:r,onNameChange:a,onSchemaChange:v}){let[s,F]=A([]),[o,l]=A(null),[u,P]=A(!1),[c,w]=A(!1),[B,T]=A(!1),[M,Y]=A(null),[Z,m]=A(null),[f,y]=A(!1),[$,G]=A(!1),C=window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches;L(()=>{let _=!1;async function vt(){let D=await sr();if(_)return;F(D);let Zi=ti();if(Zi){let ki=D.find((Qr)=>Qr.id===Zi);if(ki)l(ki)}}return vt(),()=>{_=!0}},[]);let q=g((_,vt)=>{F((D)=>[...D,{id:_,name:vt}])},[]);Lr(t,q);let{pushRoom:X,replaceUrl:At}=Hr(s,g((_)=>{if(_){let vt=s.find((D)=>D.id===_);l(vt??null)}else l(null)},[s])),Yr=g((_)=>{l(_),P(!1),X(_.id)},[X]),Zr=g(()=>{P(!1),G(!0)},[]),kr=g((_)=>{v(_),w(!1)},[v]);return L(()=>{if(!ti())history.replaceState({roomId:null},"",location.pathname)},[]),n(K,{children:[n(It,{rooms:s,currentRoomId:o?.id??null,userName:i,isOpen:u,onSelectRoom:Yr,onNameChange:a,onSettingsClick:()=>w(!0),onClose:()=>P(!1),onInstallClick:Zr},void 0,!1,void 0,this),u&&n(qt,{onClick:()=>P(!1)},void 0,!1,void 0,this),n(Et,{currentRoom:o,apiKey:t,userName:i,showInvite:!C,showTeamToggle:!!Z,onMobileToggle:()=>P((_)=>!_),onTeamToggle:()=>y((_)=>!_),onInviteClick:()=>T(!0),onTeamInfo:m},void 0,!1,void 0,this),Z&&n(Dt,{teamInfo:Z,isOpen:f,onClose:()=>y(!1)},void 0,!1,void 0,this),f&&n("div",{class:"team-sidebar-backdrop",onClick:()=>y(!1),style:"display:block"},void 0,!1,void 0,this),c&&n(dt,{currentSchema:r,onSave:kr,onClose:()=>w(!1)},void 0,!1,void 0,this),B&&n(xt,{onClose:()=>T(!1),onToast:(_)=>{Y(_),T(!1)}},void 0,!1,void 0,this),$&&n(jt,{onClose:()=>G(!1)},void 0,!1,void 0,this),M&&n(et,{text:M,onDone:()=>Y(null)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Yi(t,i){let[r,a]=A(()=>{return localStorage.getItem(t)??i}),v=g((s)=>{a(s),localStorage.setItem(t,s)},[t]);return[r,v]}var Mr=["curious","bold","swift","quiet","bright","keen","calm","wild","lazy","witty","brave","sly","warm","cool","zen"],zr=["panda","fox","otter","hawk","wolf","owl","lynx","bear","deer","raven","hare","seal","wren","crane","moth"];function ka(){let t=Mr[Math.floor(Math.random()*Mr.length)],i=zr[Math.floor(Math.random()*zr.length)],r=Math.floor(Math.random()*100);return`${t}-${i}-${r}`}function Gr(){let t=localStorage.getItem(U.handle);if(!t)t=ka(),localStorage.setItem(U.handle,t);return t}function ri(){let[t,i]=A(()=>Li()),[r,a]=Yi(U.handle,Gr()),[v,s]=Yi(U.colorSchema,rt),F=new URLSearchParams(location.search).get("token");L(()=>{R(v)},[v]);let o=g((u)=>{vr(u),i(u),history.replaceState(null,"","/chat"),location.reload()},[]),l=g((u)=>{s(u),R(u)},[]);if(F&&t)history.replaceState(null,"",location.pathname);if(F&&!t)return n(Yt,{token:F,onLogin:o},void 0,!1,void 0,this);if(!t)return n(_t,{onLogin:o},void 0,!1,void 0,this);return n(ii,{apiKey:t,userName:r,colorSchema:v,onNameChange:a,onSchemaChange:l},void 0,!1,void 0,this)}var _r=document.getElementById("root");if(_r)wi(n(ri,{},void 0,!1,void 0,this),_r);
