var Qr=Object.defineProperty;var Wr=(t,i)=>{for(var r in i)Qr(t,r,{get:i[r],enumerable:!0,configurable:!0,set:(a)=>i[r]=()=>a})};var kr={Stringify:1,BeforeStream:2,Stream:3},I=(t,i)=>{let r=new String(t);return r.isEscaped=!0,r.callbacks=i,r},Cr=/[&<>'"]/,ii=async(t,i)=>{let r="";i||=[];let a=await Promise.all(t);for(let v=a.length-1;;v--){if(r+=a[v],v--,v<0)break;let s=a[v];if(typeof s==="object")i.push(...s.callbacks||[]);let o=s.isEscaped;if(s=await(typeof s==="object"?s.toString():s),typeof s==="object")i.push(...s.callbacks||[]);if(s.isEscaped??o)r+=s;else{let u=[r];O(s,u),r=u[0]}}return I(r,i)},O=(t,i)=>{let r=t.search(Cr);if(r===-1){i[0]+=t;return}let a,v,s=0;for(v=r;v<t.length;v++){switch(t.charCodeAt(v)){case 34:a="&quot;";break;case 39:a="&#39;";break;case 38:a="&amp;";break;case 60:a="&lt;";break;case 62:a="&gt;";break;default:continue}i[0]+=t.substring(s,v)+a,s=v+1}i[0]+=t.substring(s,v)},ri=(t)=>{let i=t.callbacks;if(!i?.length)return t;let r=[t],a={};return i.forEach((v)=>v({phase:kr.Stringify,buffer:r,context:a})),r[0]};var E=Symbol("RENDERER"),D=Symbol("ERROR_HANDLER"),z=Symbol("STASH"),mt=Symbol("INTERNAL"),ft=Symbol("MEMO"),V=Symbol("PERMALINK");var ai=(t)=>{return t[mt]=!0,t};var ni=(t)=>({value:i,children:r})=>{if(!r)return;let a={children:[{tag:ai(()=>{t.push(i)}),props:{}}]};if(Array.isArray(r))a.children.push(...r.flat());else a.children.push(r);a.children.push({tag:ai(()=>{t.pop()}),props:{}});let v={tag:"",props:a,type:""};return v[D]=(s)=>{throw t.pop(),s},v},vt=(t)=>{let i=[t],r=ni(i);return r.values=i,r.Provider=r,U.push(r),r};var U=[],Ii=(t)=>{let i=[t],r=(a)=>{i.push(a.value);let v;try{v=a.children?(Array.isArray(a.children)?new vi("",{},a.children):a.children).toString():""}catch(s){throw i.pop(),s}if(v instanceof Promise)return v.finally(()=>i.pop()).then((s)=>I(s,s.callbacks));else return i.pop(),I(v)};return r.values=i,r.Provider=r,r[E]=ni(i),U.push(r),r},Q=(t)=>{return t.values.at(-1)};var d={title:[],script:["src"],style:["data-href"],link:["href"],meta:["name","httpEquiv","charset","itemProp"]},st={},x="data-precedence";var Ft={};Wr(Ft,{title:()=>qr,style:()=>Jr,script:()=>Ur,meta:()=>br,link:()=>Xr,input:()=>Or,form:()=>Kr,button:()=>Rr});var S=(t)=>Array.isArray(t)?t:[t];var Qi=new WeakMap,Wi=(t,i,r,a)=>({buffer:v,context:s})=>{if(!v)return;let o=Qi.get(s)||{};Qi.set(s,o);let u=o[t]||=[],c=!1,F=d[t];if(F.length>0)t:for(let[,P]of u)for(let l of F)if((P?.[l]??null)===r?.[l]){c=!0;break t}if(c)v[0]=v[0].replaceAll(i,"");else if(F.length>0)u.push([i,r,a]);else u.unshift([i,r,a]);if(v[0].indexOf("</head>")!==-1){let P;if(a===void 0)P=u.map(([l])=>l);else{let l=[];P=u.map(([g,,L])=>{let B=l.indexOf(L);if(B===-1)l.push(L),B=l.length-1;return[g,B]}).sort((g,L)=>g[1]-L[1]).map(([g])=>g)}P.forEach((l)=>{v[0]=v[0].replaceAll(l,"")}),v[0]=v[0].replace(/(?=<\/head>)/,P.join(""))}},ot=(t,i,r)=>I(new W(t,r,S(i??[])).toString()),ut=(t,i,r,a)=>{if("itemProp"in r)return ot(t,i,r);let{precedence:v,blocking:s,...o}=r;if(v=a?v??"":void 0,a)o[x]=v;let u=new W(t,o,S(i||[])).toString();if(u instanceof Promise)return u.then((c)=>I(u,[...c.callbacks||[],Wi(t,c,o,v)]));else return I(u,[Wi(t,u,o,v)])},qr=({children:t,...i})=>{let r=At();if(r){let a=Q(r);if(a==="svg"||a==="head")return new W("title",i,S(t??[]))}return ut("title",t,i,!1)},Ur=({children:t,...i})=>{let r=At();if(["src","async"].some((a)=>!i[a])||r&&Q(r)==="head")return ot("script",t,i);return ut("script",t,i,!1)},Jr=({children:t,...i})=>{if(!["href","precedence"].every((r)=>(r in i)))return ot("style",t,i);return i["data-href"]=i.href,delete i.href,ut("style",t,i,!0)},Xr=({children:t,...i})=>{if(["onLoad","onError"].some((r)=>(r in i))||i.rel==="stylesheet"&&(!("precedence"in i)||("disabled"in i)))return ot("link",t,i);return ut("link",t,i,"precedence"in i)},br=({children:t,...i})=>{let r=At();if(r&&Q(r)==="head")return ot("meta",t,i);return ut("meta",t,i,!1)},ki=(t,{children:i,...r})=>new W(t,r,S(i??[])),Kr=(t)=>{if(typeof t.action==="function")t.action=V in t.action?t.action[V]:void 0;return ki("form",t)},Ci=(t,i)=>{if(typeof i.formAction==="function")i.formAction=V in i.formAction?i.formAction[V]:void 0;return ki(t,i)},Or=(t)=>Ci("input",t),Rr=(t)=>Ci("button",t);var hr=new Map([["className","class"],["htmlFor","for"],["crossOrigin","crossorigin"],["httpEquiv","http-equiv"],["itemProp","itemprop"],["fetchPriority","fetchpriority"],["noModule","nomodule"],["formAction","formaction"]]),j=(t)=>hr.get(t)||t,$t=(t,i)=>{for(let[r,a]of Object.entries(t)){let v=r[0]==="-"||!/[A-Z]/.test(r)?r:r.replace(/[A-Z]/g,(s)=>`-${s.toLowerCase()}`);i(v,a==null?null:typeof a==="number"?!v.match(/^(?:a|border-im|column(?:-c|s)|flex(?:$|-[^b])|grid-(?:ar|[^a])|font-w|li|or|sca|st|ta|wido|z)|ty$/)?`${a}px`:`${a}`:a)}};var ct=void 0,At=()=>ct,Sr=(t)=>/[A-Z]/.test(t)&&t.match(/^(?:al|basel|clip(?:Path|Rule)$|co|do|fill|fl|fo|gl|let|lig|i|marker[EMS]|o|pai|pointe|sh|st[or]|text[^L]|tr|u|ve|w)/)?t.replace(/([A-Z])/g,"-$1").toLowerCase():t,Nr=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],pr=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],oi=(t,i)=>{for(let r=0,a=t.length;r<a;r++){let v=t[r];if(typeof v==="string")O(v,i);else if(typeof v==="boolean"||v===null||v===void 0)continue;else if(v instanceof W)v.toStringToBuffer(i);else if(typeof v==="number"||v.isEscaped)i[0]+=v;else if(v instanceof Promise)i.unshift("",v);else oi(v,i)}},W=class{tag;props;key;children;isEscaped=!0;localContexts;constructor(t,i,r){this.tag=t,this.props=i,this.children=r}get type(){return this.tag}get ref(){return this.props.ref||null}toString(){let t=[""];this.localContexts?.forEach(([i,r])=>{i.values.push(r)});try{this.toStringToBuffer(t)}finally{this.localContexts?.forEach(([i])=>{i.values.pop()})}return t.length===1?"callbacks"in t?ri(I(t[0],t.callbacks)).toString():t[0]:ii(t,t.callbacks)}toStringToBuffer(t){let i=this.tag,r=this.props,{children:a}=this;t[0]+=`<${i}`;let v=ct&&Q(ct)==="svg"?(s)=>Sr(j(s)):(s)=>j(s);for(let[s,o]of Object.entries(r))if(s=v(s),s==="children");else if(s==="style"&&typeof o==="object"){let u="";$t(o,(c,F)=>{if(F!=null)u+=`${u?";":""}${c}:${F}`}),t[0]+=' style="',O(u,t),t[0]+='"'}else if(typeof o==="string")t[0]+=` ${s}="`,O(o,t),t[0]+='"';else if(o===null||o===void 0);else if(typeof o==="number"||o.isEscaped)t[0]+=` ${s}="${o}"`;else if(typeof o==="boolean"&&pr.includes(s)){if(o)t[0]+=` ${s}=""`}else if(s==="dangerouslySetInnerHTML"){if(a.length>0)throw Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");a=[I(o.__html)]}else if(o instanceof Promise)t[0]+=` ${s}="`,t.unshift('"',o);else if(typeof o==="function"){if(!s.startsWith("on")&&s!=="ref")throw Error(`Invalid prop '${s}' of type 'function' supplied to '${i}'.`)}else t[0]+=` ${s}="`,O(o.toString(),t),t[0]+='"';if(Nr.includes(i)&&a.length===0){t[0]+="/>";return}t[0]+=">",oi(a,t),t[0]+=`</${i}>`}},si=class extends W{toStringToBuffer(t){let{children:i}=this,r={...this.props};if(i.length)r.children=i.length===1?i[0]:i;let a=this.tag.call(null,r);if(typeof a==="boolean"||a==null)return;else if(a instanceof Promise)if(U.length===0)t.unshift("",a);else{let v=U.map((s)=>[s,s.values.at(-1)]);t.unshift("",a.then((s)=>{if(s instanceof W)s.localContexts=v;return s}))}else if(a instanceof W)a.toStringToBuffer(t);else if(typeof a==="number"||a.isEscaped){if(t[0]+=a,a.callbacks)t.callbacks||=[],t.callbacks.push(...a.callbacks)}else O(a,t)}},vi=class extends W{toStringToBuffer(t){oi(this.children,t)}};var qi=!1,Bt=(t,i,r)=>{if(!qi){for(let a in st)Ft[a][E]=st[a];qi=!0}if(typeof t==="function")return new si(t,i,r);else if(Ft[t])return new si(Ft[t],i,r);else if(t==="svg"||t==="head")return ct||=Ii(""),new W(t,i,[new si(ct,{value:t},r)]);else return new W(t,i,r)};var J=({children:t})=>{return new vi("",{children:t},Array.isArray(t)?t:t?[t]:[])};var Pt="_hp",Er={Change:"Input",DoubleClick:"DblClick"},Dr={svg:"2000/svg",math:"1998/Math/MathML"},R=[],Fi=new WeakMap,e=void 0,Ri=()=>e,X=(t)=>("t"in t),ui={onClick:["click",!1]},Ui=(t)=>{if(!t.startsWith("on"))return;if(ui[t])return ui[t];let i=t.match(/^on([A-Z][a-zA-Z]+?(?:PointerCapture)?)(Capture)?$/);if(i){let[,r,a]=i;return ui[t]=[(Er[r]||r).toLowerCase(),!!a]}return},Ji=(t,i)=>e&&t instanceof SVGElement&&/[A-Z]/.test(i)&&((i in t.style)||i.match(/^(?:o|pai|str|u|ve)/))?i.replace(/([A-Z])/g,"-$1").toLowerCase():i,Vr=(t,i,r)=>{i||={};for(let a in i){let v=i[a];if(a!=="children"&&(!r||r[a]!==v)){a=j(a);let s=Ui(a);if(s){if(r?.[a]!==v){if(r)t.removeEventListener(s[0],r[a],s[1]);if(v!=null){if(typeof v!=="function")throw Error(`Event handler for "${a}" is not a function`);t.addEventListener(s[0],v,s[1])}}}else if(a==="dangerouslySetInnerHTML"&&v)t.innerHTML=v.__html;else if(a==="ref"){let o;if(typeof v==="function")o=v(t)||(()=>v(null));else if(v&&"current"in v)v.current=t,o=()=>v.current=null;Fi.set(t,o)}else if(a==="style"){let o=t.style;if(typeof v==="string")o.cssText=v;else if(o.cssText="",v!=null)$t(v,o.setProperty.bind(o))}else{if(a==="value"){let u=t.nodeName;if(u==="INPUT"||u==="TEXTAREA"||u==="SELECT"){if(t.value=v===null||v===void 0||v===!1?null:v,u==="TEXTAREA"){t.textContent=v;continue}else if(u==="SELECT"){if(t.selectedIndex===-1)t.selectedIndex=0;continue}}}else if(a==="checked"&&t.nodeName==="INPUT"||a==="selected"&&t.nodeName==="OPTION")t[a]=v;let o=Ji(t,a);if(v===null||v===void 0||v===!1)t.removeAttribute(o);else if(v===!0)t.setAttribute(o,"");else if(typeof v==="string"||typeof v==="number")t.setAttribute(o,v);else t.setAttribute(o,v.toString())}}}if(r)for(let a in r){let v=r[a];if(a!=="children"&&!(a in i)){a=j(a);let s=Ui(a);if(s)t.removeEventListener(s[0],v,s[1]);else if(a==="ref")Fi.get(t)?.();else t.removeAttribute(Ji(t,a))}}},dr=(t,i)=>{i[z][0]=0,R.push([t,i]);let r=i.tag[E]||i.tag,a=r.defaultProps?{...r.defaultProps,...i.props}:i.props;try{return[r.call(null,a)]}finally{R.pop()}},hi=(t,i,r,a,v)=>{if(t.vR?.length)a.push(...t.vR),delete t.vR;if(typeof t.tag==="function")t[z][1][Ht]?.forEach((s)=>v.push(s));t.vC.forEach((s)=>{if(X(s))r.push(s);else if(typeof s.tag==="function"||s.tag===""){s.c=i;let o=r.length;if(hi(s,i,r,a,v),s.s){for(let u=o;u<r.length;u++)r[u].s=!0;s.s=!1}}else if(r.push(s),s.vR?.length)a.push(...s.vR),delete s.vR})},xr=(t)=>{for(;;t=t.tag===Pt||!t.vC||!t.pP?t.nN:t.vC[0]){if(!t)return null;if(t.tag!==Pt&&t.e)return t.e}},Si=(t)=>{if(!X(t)){if(t[z]?.[1][Ht]?.forEach((i)=>i[2]?.()),Fi.get(t.e)?.(),t.p===2)t.vC?.forEach((i)=>i.p=2);t.vC?.forEach(Si)}if(!t.p)t.e?.remove(),delete t.e;if(typeof t.tag==="function")lt.delete(t),Tt.delete(t),delete t[z][3],t.a=!0},ci=(t,i,r)=>{t.c=i,Ni(t,i,r)},Xi=(t,i)=>{if(!i)return;for(let r=0,a=t.length;r<a;r++)if(t[r]===i)return r;return},bi=Symbol(),Ni=(t,i,r)=>{let a=[],v=[],s=[];hi(t,i,a,v,s),v.forEach(Si);let o=r?void 0:i.childNodes,u,c=null;if(r)u=-1;else if(!o.length)u=0;else{let F=Xi(o,xr(t.nN));if(F!==void 0)c=o[F],u=F;else u=Xi(o,a.find((P)=>P.tag!==Pt&&P.e)?.e)??-1;if(u===-1)r=!0}for(let F=0,P=a.length;F<P;F++,u++){let l=a[F],g;if(l.s&&l.e)g=l.e,l.s=!1;else{let L=r||!l.e;if(X(l)){if(l.e&&l.d)l.e.textContent=l.t;l.d=!1,g=l.e||=document.createTextNode(l.t)}else g=l.e||=l.n?document.createElementNS(l.n,l.tag):document.createElement(l.tag),Vr(g,l.props,l.pP),Ni(l,g,L)}if(l.tag===Pt)u--;else if(r){if(!g.parentNode)i.appendChild(g)}else if(o[u]!==g&&o[u-1]!==g)if(o[u+1]===g)i.appendChild(o[u]);else i.insertBefore(g,c||o[u]||null)}if(t.pP)delete t.pP;if(s.length){let F=[],P=[];if(s.forEach(([,l,,g,L])=>{if(l)F.push(l);if(g)P.push(g);L?.()}),F.forEach((l)=>l()),P.length)requestAnimationFrame(()=>{P.forEach((l)=>l())})}},jr=(t,i)=>!!(t&&t.length===i.length&&t.every((r,a)=>r[1]===i[a][1])),Tt=new WeakMap,Lt=(t,i,r)=>{let a=!r&&i.pC;if(r)i.pC||=i.vC;let v;try{if(r||=typeof i.tag=="function"?dr(t,i):S(i.props.children),r[0]?.tag===""&&r[0][D])v=r[0][D],t[5].push([t,v,i]);let s=a?[...i.pC]:i.vC?[...i.vC]:void 0,o=[],u;for(let c=0;c<r.length;c++){if(Array.isArray(r[c]))r.splice(c,1,...r[c].flat());let F=pi(r[c]);if(F){if(typeof F.tag==="function"&&!F.tag[mt]){if(U.length>0)F[z][2]=U.map((l)=>[l,l.values.at(-1)]);if(t[5]?.length)F[z][3]=t[5].at(-1)}let P;if(s&&s.length){let l=s.findIndex(X(F)?(g)=>X(g):F.key!==void 0?(g)=>g.key===F.key&&g.tag===F.tag:(g)=>g.tag===F.tag);if(l!==-1)P=s[l],s.splice(l,1)}if(P)if(X(F)){if(P.t!==F.t)P.t=F.t,P.d=!0;F=P}else{let l=P.pP=P.props;if(P.props=F.props,P.f||=F.f||i.f,typeof F.tag==="function"){let g=P[z][2];if(P[z][2]=F[z][2]||[],P[z][3]=F[z][3],!P.f&&((P.o||P)===F.o||P.tag[ft]?.(l,P.props))&&jr(g,P[z][2]))P.s=!0}F=P}else if(!X(F)&&e){let l=Q(e);if(l)F.n=l}if(!X(F)&&!F.s)Lt(t,F),delete F.f;if(o.push(F),u&&!u.s&&!F.s)for(let l=u;l&&!X(l);l=l.vC?.at(-1))l.nN=F;u=F}}if(i.vR=a?[...i.vC,...s||[]]:s||[],i.vC=o,a)delete i.pC}catch(s){if(i.f=!0,s===bi)if(v)return;else throw s;let[o,u,c]=i[z]?.[3]||[];if(u){let F=()=>gt([0,!1,t[2]],c),P=Tt.get(c)||[];P.push(F),Tt.set(c,P);let l=u(s,()=>{let g=Tt.get(c);if(g){let L=g.indexOf(F);if(L!==-1)return g.splice(L,1),F()}});if(l){if(t[0]===1)t[1]=!0;else if(Lt(t,c,[l]),(u.length===1||t!==o)&&c.c){ci(c,c.c,!1);return}throw bi}}throw s}finally{if(v)t[5].pop()}},pi=(t)=>{if(t===void 0||t===null||typeof t==="boolean")return;else if(typeof t==="string"||typeof t==="number")return{t:t.toString(),d:!0};else{if("vR"in t)t={tag:t.tag,props:t.props,key:t.key,f:t.f,type:t.tag,ref:t.props.ref,o:t.o||t};if(typeof t.tag==="function")t[z]=[0,[]];else{let i=Dr[t.tag];if(i)e||=vt(""),t.props.children=[{tag:e,props:{value:t.n=`http://www.w3.org/${i}`,children:t.props.children}}]}return t}},Ei=(t,i,r)=>{if(t.c===i)t.c=r,t.vC.forEach((a)=>Ei(a,i,r))},Ki=(t,i)=>{i[z][2]?.forEach(([r,a])=>{r.values.push(a)});try{Lt(t,i,void 0)}catch{return}if(i.a){delete i.a;return}if(i[z][2]?.forEach(([r])=>{r.values.pop()}),t[0]!==1||!t[1])ci(i,i.c,!1)},lt=new WeakMap,Oi=[],gt=async(t,i)=>{t[5]||=[];let r=lt.get(i);if(r)r[0](void 0);let a,v=new Promise((s)=>a=s);if(lt.set(i,[a,()=>{if(t[2])t[2](t,i,(s)=>{Ki(s,i)}).then(()=>a(i));else Ki(t,i),a(i)}]),Oi.length)Oi.at(-1).add(i);else{await Promise.resolve();let s=lt.get(i);if(s)lt.delete(i),s[1]()}return v},er=(t,i)=>{let r=[];r[5]=[],r[4]=!0,Lt(r,t,void 0),r[4]=!1;let a=document.createDocumentFragment();ci(t,a,!0),Ei(t,a,i),i.replaceChildren(a)},li=(t,i)=>{er(pi({tag:"",props:{children:t}}),i)};var Pi=(t,i,r)=>({tag:Pt,props:{children:t},key:r,e:i,p:1});var ta=0,Ht=1,ia=2,ra=3,aa=4,gi=new WeakMap,yi=(t,i)=>!t||!i||t.length!==i.length||i.some((r,a)=>r!==t[a]);var na=void 0;var Di=[];var f=(t)=>{let i=()=>typeof t==="function"?t():t,r=R.at(-1);if(!r)return[i(),()=>{}];let[,a]=r,v=a[z][1][ta]||=[],s=a[z][0]++;return v[s]||=[i(),(o)=>{let u=na,c=v[s];if(typeof o==="function")o=o(c[0]);if(!Object.is(o,c[0]))if(c[0]=o,Di.length){let[F,P]=Di.at(-1);Promise.all([F===3?a:gt([F,!1,u],a),P]).then(([l])=>{if(!l||!(F===2||F===3))return;let g=l.vC;requestAnimationFrame(()=>{setTimeout(()=>{if(g!==l.vC)return;gt([F===3?1:0,!1,u],l)})})})}else gt([0,!1,u],a)}]};var va=(t,i,r)=>{let a=R.at(-1);if(!a)return;let[,v]=a,s=v[z][1][Ht]||=[],o=v[z][0]++,[u,,c]=s[o]||=[];if(yi(u,r)){if(c)c();let F=()=>{P[t]=void 0,P[2]=i()},P=[r,void 0,void 0,void 0,void 0];P[t]=F,s[o]=P}},T=(t,i)=>va(3,t,i);var y=(t,i)=>{let r=R.at(-1);if(!r)return t;let[,a]=r,v=a[z][1][ia]||=[],s=a[z][0]++,o=v[s];if(yi(o?.[1],i))v[s]=[t,i];else t=v[s][0];return t},_=(t)=>{let i=R.at(-1);if(!i)return{current:t};let[,r]=i,a=r[z][1][aa]||=[],v=r[z][0]++;return a[v]||={current:t}},wi=(t)=>{let i=gi.get(t);if(i){if(i.length===2)throw i[1];return i[0]}throw t.then((r)=>gi.set(t,[r]),(r)=>gi.set(t,[void 0,r])),t},mi=(t,i)=>{let r=R.at(-1);if(!r)return t();let[,a]=r,v=a[z][1][ra]||=[],s=a[z][0]++,o=v[s];if(yi(o?.[1],i))v[s]=[t(),i];return v[s][0]};var di=vt({pending:!1,data:null,method:null,action:null}),Vi=new Set,xi=(t)=>{Vi.add(t),t.finally(()=>Vi.delete(t))};var fi=(t,i)=>{return mi(()=>(r)=>{let a;if(t){if(typeof t==="function")a=t(r)||(()=>{t(null)});else if(t&&"current"in t)t.current=r,a=()=>{t.current=null}}let v=i(r);return()=>{v?.(),a?.()}},[t])},ji=Object.create(null),ei=Object.create(null),yt=(t,i,r,a,v)=>{if(i?.itemProp)return{tag:t,props:i,type:t,ref:i.ref};let s=document.head,{onLoad:o,onError:u,precedence:c,blocking:F,...P}=i,l=null,g=!1,L=d[t],B=void 0;if(L.length>0){let m=s.querySelectorAll(t);t:for(let w of m)for(let A of d[t])if(w.getAttribute(A)===i[A]){l=w;break t}if(!l){let w=L.reduce((A,M)=>i[M]===void 0?A:`${A}-${M}-${i[M]}`,t);g=!ei[w],l=ei[w]||=(()=>{let A=document.createElement(t);for(let M of L){if(i[M]!==void 0)A.setAttribute(M,i[M]);if(i.rel)A.setAttribute("rel",i.rel)}return A})()}}else B=s.querySelectorAll(t);if(c=a?c??"":void 0,a)P[x]=c;let G=y((m)=>{if(L.length>0){let w=!1;for(let A of s.querySelectorAll(t)){if(w&&A.getAttribute(x)!==c){s.insertBefore(m,A);return}if(A.getAttribute(x)===c)w=!0}s.appendChild(m)}else if(B){let w=!1;for(let A of B)if(A===m){w=!0;break}if(!w)s.insertBefore(m,s.contains(B[0])?B[0]:s.querySelector(t));B=void 0}},[c]),$=fi(i.ref,(m)=>{let w=L[0];if(r===2)m.innerHTML="";if(g||B)G(m);if(!u&&!o)return;let A=ji[m.getAttribute(w)]||=new Promise((M,Z)=>{m.addEventListener("load",M),m.addEventListener("error",Z)});if(o)A=A.then(o);if(u)A=A.catch(u);A.catch(()=>{})});if(v&&F==="render"){let m=d[t][0];if(i[m]){let w=i[m],A=ji[w]||=new Promise((M,Z)=>{G(l),l.addEventListener("load",M),l.addEventListener("error",Z)});wi(A)}}let H={tag:t,type:t,props:{...P,ref:$},ref:$};if(H.p=r,l)H.e=l;return Pi(H,s)},sa=(t)=>{let i=Ri();if((i&&Q(i))?.endsWith("svg"))return{tag:"title",props:t,type:"title",ref:t.ref};return yt("title",t,void 0,!1,!1)},oa=(t)=>{if(!t||["src","async"].some((i)=>!t[i]))return{tag:"script",props:t,type:"script",ref:t.ref};return yt("script",t,1,!1,!0)},ua=(t)=>{if(!t||!["href","precedence"].every((i)=>(i in t)))return{tag:"style",props:t,type:"style",ref:t.ref};return t["data-href"]=t.href,delete t.href,yt("style",t,2,!0,!0)},Fa=(t)=>{if(!t||["onLoad","onError"].some((i)=>(i in t))||t.rel==="stylesheet"&&(!("precedence"in t)||("disabled"in t)))return{tag:"link",props:t,type:"link",ref:t.ref};return yt("link",t,1,"precedence"in t,!0)},ca=(t)=>{return yt("meta",t,void 0,!1,!1)},tr=Symbol(),la=(t)=>{let{action:i,...r}=t;if(typeof i!=="function")r.action=i;let[a,v]=f([null,!1]),s=y(async(F)=>{let P=F.isTrusted?i:F.detail[tr];if(typeof P!=="function")return;F.preventDefault();let l=new FormData(F.target);v([l,!0]);let g=P(l);if(g instanceof Promise)xi(g),await g;v([null,!0])},[]),o=fi(t.ref,(F)=>{return F.addEventListener("submit",s),()=>{F.removeEventListener("submit",s)}}),[u,c]=a;return a[1]=!1,{tag:di,props:{value:{pending:u!==null,data:u,method:u?"post":null,action:u?i:null},children:{tag:"form",props:{...r,ref:o},type:"form",ref:o}},f:c}},ir=(t,{formAction:i,...r})=>{if(typeof i==="function"){let a=y((v)=>{v.preventDefault(),v.currentTarget.form.dispatchEvent(new CustomEvent("submit",{detail:{[tr]:i}}))},[]);r.ref=fi(r.ref,(v)=>{return v.addEventListener("click",a),()=>{v.removeEventListener("click",a)}})}return{tag:t,props:r,type:t,ref:r.ref}},Pa=(t)=>ir("input",t),ga=(t)=>ir("button",t);Object.assign(st,{title:sa,script:oa,style:ua,link:Fa,meta:ca,form:la,input:Pa,button:ga});var tt="#222244,#2D2B55,#B362FF,#FFFFFF,#2D2B55,#A599E9,#3AD900,#FAD000,#3B3768,#7E74A8",Ai=[{name:"meet-ai Default",schema:"#194234,#9c2e33,#E7C12e,#194234,#9c2e33,#FFFFFF,#ee6030,#9C2E33,#9c2e33,#FFFFFF"},{name:"One Dark Pro",schema:"#282C34,#2C313A,#528BFF,#FFFFFF,#2C313A,#ABB2BF,#98C379,#E06C75,#3E4451,#5C6370"},{name:"Dracula",schema:"#282A36,#343746,#BD93F9,#FFFFFF,#343746,#F8F8F2,#50FA7B,#FF79C6,#44475A,#6272A4"},{name:"GitHub Dark",schema:"#0D1117,#161B22,#1F6FEB,#FFFFFF,#161B22,#C9D1D9,#3FB950,#F85149,#21262D,#8B949E"},{name:"Nord",schema:"#2E3440,#3B4252,#88C0D0,#ECEFF4,#3B4252,#D8DEE9,#A3BE8C,#BF616A,#434C5E,#4C566A"},{name:"Monokai",schema:"#272822,#3E3D32,#F92672,#FFFFFF,#3E3D32,#F8F8F2,#A6E22E,#F92672,#49483E,#75715E"},{name:"Solarized Dark",schema:"#002B36,#073642,#2AA198,#FFFFFF,#073642,#839496,#859900,#DC322F,#073642,#586E75"},{name:"Tokyo Night",schema:"#1A1B26,#24283B,#7AA2F7,#FFFFFF,#24283B,#A9B1D6,#73DACA,#F7768E,#2F3549,#565F89"},{name:"Catppuccin Mocha",schema:"#1E1E2E,#313244,#89B4FA,#FFFFFF,#313244,#CDD6F4,#A6E3A1,#F38BA8,#45475A,#6C7086"},{name:"Gruvbox Dark",schema:"#282828,#3C3836,#FABD2F,#282828,#3C3836,#EBDBB2,#B8BB26,#FB4934,#504945,#928374"},{name:"Ayu Dark",schema:"#0B0E14,#131721,#E6B450,#0B0E14,#131721,#BFBDB6,#AAD94C,#F07178,#11151C,#565B66"},{name:"Ayu Mirage",schema:"#1F2430,#272D38,#FFCC66,#1F2430,#272D38,#CCCAC2,#D5FF80,#F28779,#171B24,#5C6166"},{name:"Ayu Light",schema:"#FAFAFA,#F0F0F0,#FF9940,#FFFFFF,#F0F0F0,#575F66,#86B300,#F07171,#E8E8E8,#ABB0B6"},{name:"Night Owl",schema:"#011627,#0B2942,#7E57C2,#FFFFFF,#0B2942,#D6DEEB,#ADDB67,#EF5350,#122D42,#5F7E97"},{name:"One Light",schema:"#FAFAFA,#EAEAEB,#4078F2,#FFFFFF,#EAEAEB,#383A42,#50A14F,#E45649,#D4D4D4,#A0A1A7"},{name:"Shades of Purple",schema:"#222244,#2D2B55,#B362FF,#FFFFFF,#2D2B55,#A599E9,#3AD900,#FAD000,#3B3768,#7E74A8"}],$i=["Column BG","Menu Hover","Active Item","Active Text","Hover Item","Text Color","Presence","Badge","Divider","Alt Text"],C={apiKey:"meet-ai-key",handle:"meet-ai-handle",colorSchema:"meet-ai-color-schema"};function Bi(){return localStorage.getItem(C.apiKey)}function nr(t){localStorage.setItem(C.apiKey,t)}function wa(){localStorage.removeItem(C.apiKey)}function it(){let t=Bi(),i={"Content-Type":"application/json"};if(t)i.Authorization="Bearer "+t;return i}async function vr(){let t=await fetch("/api/rooms",{headers:it()});if(t.status===401)return wa(),location.href="/key",[];return t.json()}async function sr(t){let i=await fetch(`/api/rooms/${t}/messages`,{headers:it()});if(!i.ok)return[];return i.json()}async function or(t,i){let r=await fetch(`/api/rooms/${t}/messages?since_seq=${i}`,{headers:it()});if(!r.ok)return[];return r.json()}async function ur(t){let i=await fetch(`/api/rooms/${t}/logs`,{headers:it()});if(!i.ok)return[];return(await i.json()).map((a)=>({...a,type:"log"}))}async function wt(t,i,r){let a=await fetch(`/api/rooms/${t}/messages`,{method:"POST",headers:it(),body:JSON.stringify({sender:i,content:r})});if(!a.ok)throw Error("HTTP "+a.status)}async function zt(t){let i=await fetch("/api/auth/claim/"+encodeURIComponent(t));if(!i.ok)throw Error("Link expired or invalid");return i.json()}async function Fr(){let t=await fetch("/api/auth/share",{method:"POST",headers:it()});if(!t.ok)throw Error("Failed to create share link");return t.json()}function n(t,i,r){let a;if(!i||!("children"in i))a=Bt(t,i,[]);else{let v=i.children;a=Array.isArray(v)?Bt(t,i,v):Bt(t,i,[v])}return a.key=r,a}function Gt({onLogin:t}){let[i,r]=f(""),[a,v]=f(!1),s=_(null);T(()=>{s.current?.focus()},[]);let o=y(async()=>{let c=s.current?.value.trim();if(!c)return;r(""),v(!0);try{if(c.startsWith("http")&&c.includes("/auth/")){let F=c.split("/auth/").pop()?.split("?")[0]?.split("#")[0];if(!F){r("Invalid link"),v(!1);return}let P=await zt(F);t(P.api_key)}else if(c.startsWith("mai_"))t(c);else r("Invalid link or key"),v(!1)}catch(F){r(F.message||"Connection error. Try again."),v(!1)}},[t]),u=y((c)=>{if(c.key==="Enter")c.preventDefault(),o()},[o]);return n("div",{class:"main",style:"height:100dvh",children:n("div",{class:"login-prompt",children:[n("h2",{children:"Welcome to meet-ai"},void 0,!1,void 0,this),n("p",{children:"Paste a login link from another device or enter your API key to continue."},void 0,!1,void 0,this),n("div",{class:"login-prompt-form",children:[n("input",{ref:s,type:"text",placeholder:"Paste login link or API key",autocomplete:"off",spellcheck:!1,onKeyDown:u},void 0,!1,void 0,this),n("button",{onClick:o,disabled:a,children:a?"...":"Go"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"login-error",children:i},void 0,!1,void 0,this),n("div",{class:"login-or",children:["or ",n("a",{href:"/",children:"get an API key"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function Mt({token:t,onLogin:i}){let[r,a]=f(""),[v,s]=f(!1),o=window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches,u=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,c=/Android/.test(navigator.userAgent),F=y(async()=>{s(!0),a("");try{let g=await zt(t);i(g.api_key)}catch(g){a(g.message||"Connection error. Try again."),s(!1)}},[t,i]),P=v?"Connecting...":o?"Connect":"Connect in browser",l=null;if(!o)if(u)l=n("div",{class:"install-steps",children:[n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"1"},void 0,!1,void 0,this),n("div",{class:"step-text",children:["Tap the ",n("strong",{children:"Share"},void 0,!1,void 0,this)," button at the bottom of Safari"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"2"},void 0,!1,void 0,this),n("div",{class:"step-text",children:["Scroll down and tap ",n("strong",{children:"Add to Home Screen"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"3"},void 0,!1,void 0,this),n("div",{class:"step-text",children:["Tap ",n("strong",{children:"Add"},void 0,!1,void 0,this)," in the top right corner"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"4"},void 0,!1,void 0,this),n("div",{class:"step-text",children:["Open the app from your Home Screen and tap ",n("strong",{children:"Connect"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);else if(c)l=n("div",{class:"install-steps",children:[n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"1"},void 0,!1,void 0,this),n("div",{class:"step-text",children:["Tap the ",n("strong",{children:"menu"},void 0,!1,void 0,this)," button ⋮ in Chrome"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"2"},void 0,!1,void 0,this),n("div",{class:"step-text",children:["Tap ",n("strong",{children:"Install app"},void 0,!1,void 0,this)," or ",n("strong",{children:"Add to Home screen"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"3"},void 0,!1,void 0,this),n("div",{class:"step-text",children:["Open the app from your Home Screen and tap ",n("strong",{children:"Connect"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);else l=n("div",{class:"install-steps",children:[n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"1"},void 0,!1,void 0,this),n("div",{class:"step-text",children:"Install the app using your browser's install option"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"install-step",children:[n("div",{class:"step-num",children:"2"},void 0,!1,void 0,this),n("div",{class:"step-text",children:["Open the app and tap ",n("strong",{children:"Connect"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);return n("div",{class:"main",style:"height:100dvh",children:n("div",{class:"token-screen",children:[n("h2",{children:o?"Connect to chat":"Install meet-ai"},void 0,!1,void 0,this),n("p",{children:o?"Tap the button below to activate your session.":"Add meet-ai to your Home Screen for the best experience."},void 0,!1,void 0,this),o?n("div",{class:"token-card",children:[n("button",{type:"button",class:"connect-btn",onClick:F,disabled:v,children:P},void 0,!1,void 0,this),n("div",{class:"connect-error",children:r},void 0,!1,void 0,this)]},void 0,!0,void 0,this):n(J,{children:[l&&n("div",{class:"token-card",children:l},void 0,!1,void 0,this),n("div",{class:"separator"},void 0,!1,void 0,this),n("p",{class:"alt-text",children:"Or connect directly in this browser:"},void 0,!1,void 0,this),n("div",{class:"token-card",children:[n("button",{type:"button",class:"connect-btn",onClick:F,disabled:v,children:P},void 0,!1,void 0,this),n("div",{class:"connect-error",children:r},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function _t({onSettingsClick:t,onCloseClick:i}){return n("div",{class:"sidebar-header",children:[n("span",{children:"meet-ai"},void 0,!1,void 0,this),n("div",{class:"sidebar-header-actions",children:[n("button",{title:"Color Settings",onClick:t,children:n("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"},void 0,!1,void 0,this),n("circle",{cx:"12",cy:"12",r:"3"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),n("button",{class:"sidebar-close-btn",title:"Close sidebar",onClick:i,children:n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("line",{x1:"18",y1:"6",x2:"6",y2:"18"},void 0,!1,void 0,this),n("line",{x1:"6",y1:"6",x2:"18",y2:"18"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function Yt({rooms:t,currentRoomId:i,onSelectRoom:r}){return n(J,{children:[n("div",{class:"sidebar-section-label",children:"Channels"},void 0,!1,void 0,this),n("div",{class:"room-list",children:t.map((a)=>n("div",{class:`room-item${a.id===i?" active":""}`,onClick:()=>r(a),children:[n("span",{class:"room-hash",children:"#"},void 0,!1,void 0,this)," ",a.name]},a.id,!0,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Zt({onIOSInstall:t}){let[i,r]=f(null),[a,v]=f(!1),[s,o]=f(!1);T(()=>{if(window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches)return;if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){v(!0),o(!0);return}let P=(g)=>{g.preventDefault(),r(g),o(!0)};window.addEventListener("beforeinstallprompt",P);let l=()=>{o(!1),r(null)};return window.addEventListener("appinstalled",l),()=>{window.removeEventListener("beforeinstallprompt",P),window.removeEventListener("appinstalled",l)}},[]);let u=y(async()=>{if(a){t();return}if(i){await i.prompt();let{outcome:c}=await i.userChoice;if(c==="accepted")o(!1);r(null)}},[a,i,t]);if(!s)return null;return n("button",{class:"install-btn",title:"Install app",onClick:u,children:[n("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},void 0,!1,void 0,this),n("polyline",{points:"7 10 12 15 17 10"},void 0,!1,void 0,this),n("line",{x1:"12",y1:"15",x2:"12",y2:"3"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"Install"]},void 0,!0,void 0,this)}function It({userName:t,onNameChange:i,onInstallClick:r}){let[a,v]=f(!1),[s,o]=f(t),u=y(()=>{o(t),v(!0)},[t]),c=y(()=>{let P=s.trim();if(P)i(P);v(!1)},[s,i]),F=y((P)=>{if(P.key==="Enter")P.preventDefault(),c();if(P.key==="Escape")o(t),v(!1)},[c,t]);return n("div",{class:"sidebar-footer",children:[n("span",{class:"user-presence",style:"width:8px;height:8px;border-radius:50%;background:var(--c-presence);flex-shrink:0;"},void 0,!1,void 0,this),a?n("input",{type:"text",value:s,maxLength:30,style:"background:var(--c-hover-item);color:inherit;border:1px solid var(--c-sidebar-border);border-radius:4px;padding:2px 6px;font-size:16px;width:130px;outline:none;font-weight:600;",onInput:(P)=>o(P.target.value),onKeyDown:F,onBlur:c,ref:(P)=>P?.focus()},void 0,!1,void 0,this):n("span",{class:"user-handle",title:"Click to change your name",onClick:u,children:t},void 0,!1,void 0,this),n("div",{class:"sidebar-footer-actions",children:[n(Zt,{onIOSInstall:r},void 0,!1,void 0,this),n("button",{title:"API Key settings",onClick:()=>{location.href="/key"},children:n("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:n("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function Qt({rooms:t,currentRoomId:i,userName:r,isOpen:a,onSelectRoom:v,onNameChange:s,onSettingsClick:o,onClose:u,onInstallClick:c}){return n("aside",{class:`sidebar${a?" open":""}`,children:[n(_t,{onSettingsClick:o,onCloseClick:u},void 0,!1,void 0,this),n(Yt,{rooms:t,currentRoomId:i,onSelectRoom:v},void 0,!1,void 0,this),n(It,{userName:r,onNameChange:s,onInstallClick:c},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Wt({onClick:t}){return n("div",{class:"sidebar-backdrop",onClick:t,style:"display:block"},void 0,!1,void 0,this)}function kt({roomName:t,showInvite:i,showTeamToggle:r,onMobileToggle:a,onTeamToggle:v,onInviteClick:s}){return n("div",{class:"main-header",children:[n("div",{class:"main-header-left",children:[n("button",{class:"mobile-toggle",onClick:a,children:"☰"},void 0,!1,void 0,this),n("span",{class:"channel-hash",children:"#"},void 0,!1,void 0,this),n("span",{class:"channel-name",children:t},void 0,!1,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"main-header-right",children:[i&&n("button",{class:"invite-btn",title:"Open on phone",onClick:s,children:n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},void 0,!1,void 0,this),n("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),r&&n("button",{class:"team-toggle",title:"Team members",onClick:v,children:n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},void 0,!1,void 0,this),n("circle",{cx:"9",cy:"7",r:"4"},void 0,!1,void 0,this),n("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"},void 0,!1,void 0,this),n("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function Ct({message:t="Select or create a channel to start chatting",showBackLink:i}){return n("div",{class:"empty-state",children:[n("div",{class:"icon",children:"#"},void 0,!1,void 0,this),n("div",{children:t},void 0,!1,void 0,this),i&&n("div",{style:"font-size:13px;margin-top:4px",children:n("a",{href:"/chat",style:"color:var(--c-primary)",children:"Back to channels"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Ti(t){let i=t.split(",").map((r)=>r.trim());while(i.length<10)i.push("#888888");return i}function qt(t){if(t=t.replace("#",""),t.length===3)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];let i=parseInt(t,16);return[i>>16&255,i>>8&255,i&255]}function h(t){let[i,r,a]=qt(t).map((v)=>{return v=v/255,v<=0.04045?v/12.92:Math.pow((v+0.055)/1.055,2.4)});return 0.2126*i+0.7152*r+0.0722*a}function k(t,i){let r=h(t),a=h(i),v=Math.max(r,a),s=Math.min(r,a);return(v+0.05)/(s+0.05)}function cr(t,i,r){if(k(t,i)>=r)return t;let a=k("#FFFFFF",i),v=k("#000000",i);return a>=v?"#FFFFFF":"#000000"}function ma(t){if(h(t)>=0.5)return"#FFFFFF";let[r,a,v]=qt(t);return"#"+[r,a,v].map((s)=>Math.max(0,Math.round(s*0.78+2)).toString(16).padStart(2,"0")).join("")}function fa(t,i){if(h(t)>=0.5)return"#1D1C1D";return i||"#ABB2BF"}function Aa(t,i){if(h(t)>=0.5)return"#E0E0E0";return i||"#3e4451"}function b(t){let i=Ti(t),r=document.documentElement,a=h(i[0])<0.5,v=cr(i[5],i[0],3),s=cr(i[3],i[2],3);r.style.setProperty("--c-sidebar-bg",i[0]),r.style.setProperty("--c-sidebar-text",v),r.style.setProperty("--c-active-item",i[2]),r.style.setProperty("--c-active-item-text",s),r.style.setProperty("--c-hover-item",i[4]||i[1]),r.style.setProperty("--c-presence",i[6]),r.style.setProperty("--c-primary",i[6]),r.style.setProperty("--c-sidebar-border",i[8]||(a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"));let o=ma(i[0]),u=fa(o,v),c=Aa(i[0],i[8]);r.style.setProperty("--c-header-bg",o),r.style.setProperty("--c-header-text",u),r.style.setProperty("--c-chat-bg",o),r.style.setProperty("--c-msg-text",u),r.style.setProperty("--c-border",c),document.body.style.background=o,r.style.setProperty("--c-input-bg",a?i[0]:o);let F=k("#FFFFFF",i[6]),P=k("#000000",i[6]);r.style.setProperty("--c-primary-text",F>=P?"#FFFFFF":"#000000")}function Ut(t){let i=0;for(let a=0;a<t.length;a++)i=t.charCodeAt(a)+((i<<5)-i);return`hsl(${(i%360+360)%360}, 60%, 45%)`}function lr(t){let i=0;for(let a=0;a<t.length;a++)i=t.charCodeAt(a)+((i<<5)-i);return`hsl(${(i%360+360)%360}, 50%, 35%)`}var Li=(()=>{let t=document.createElement("div");return t.style.display="none",document.body.appendChild(t),t})();function Hi(t){Li.style.color="",Li.style.color=t;let r=getComputedStyle(Li).color.match(/(\d+)/g);if(!r||r.length<3)return t;return"#"+r.slice(0,3).map((a)=>parseInt(a).toString(16).padStart(2,"0")).join("")}function N(t){let i=Hi(t),r=getComputedStyle(document.documentElement).getPropertyValue("--c-chat-bg").trim()||"#FFFFFF";if(k(i,r)>=3)return t;let a=h(r),[v,s,o]=qt(i);if(a<0.5){for(let u=1.5;u<=3;u+=0.3){let c="#"+[v,s,o].map((F)=>Math.min(255,Math.round(F*u)).toString(16).padStart(2,"0")).join("");if(k(c,r)>=3)return c}return"#CCCCCC"}else{for(let u=0.5;u>=0.2;u-=0.1){let c="#"+[v,s,o].map((F)=>Math.round(F*u).toString(16).padStart(2,"0")).join("");if(k(c,r)>=3)return c}return"#555555"}}function Pr(t){return DOMPurify.sanitize(marked.parse(t,{breaks:!0}))}function gr(t){if(window.highlightAllCode)window.highlightAllCode(t)}function $a(t){let i=document.createElement("div");return i.textContent=t,i.innerHTML}function Ba(t){if(!t)return"";try{let i=new Date(t);if(isNaN(i.getTime()))return"";return i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}}function Jt({sender:t,content:i,color:r,timestamp:a,tempId:v,status:s="sent",onRetry:o}){let u=_(null),c=r?N(r):Ut(t),F=r?N(r):lr(t),P=t.slice(0,2).toUpperCase(),l=Hi(F),g=k("#FFFFFF",l)>=k("#000000",l)?"#FFFFFF":"#000000",L=s==="pending"?" msg-pending":s==="failed"?" msg-failed":"",B=s==="pending"?"sending":s==="failed"?"failed":Ba(a);return T(()=>{if(u.current)u.current.innerHTML=Pr(i),gr(u.current)},[i]),n("div",{class:`msg${L}`,"data-temp-id":v,"data-content":v?i:void 0,children:[n("div",{class:"msg-avatar",style:`background:${F};color:${g}`,children:$a(P)},void 0,!1,void 0,this),n("div",{class:"msg-body",children:[n("div",{class:"msg-header",children:[n("span",{class:"msg-sender",style:`color:${c}`,children:t},void 0,!1,void 0,this),n("span",{class:"msg-time",children:B},void 0,!1,void 0,this),s==="failed"&&o&&n("span",{class:"msg-retry",onClick:o,style:"display:inline",children:"retry"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"msg-content",ref:u},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function zi(t){if(!t)return"";try{let i=new Date(t);if(isNaN(i.getTime()))return"";return i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return""}}function Ta(t){let i=[...new Set(t.map((a)=>a.sender))],r=t.length;if(i.length===1)return`${r} log ${r===1?"entry":"entries"} from ${i[0]}`;return`${r} log entries from ${i.length} agents`}function Xt({logs:t}){let[i,r]=f(!1);if(t.length===0)return null;let a=zi(t[0].created_at),v=t.length>1?zi(t[t.length-1].created_at):null,s=v&&v!==a?`${a} - ${v}`:a;return n("div",{class:"log-group",children:[n("div",{class:"log-group-header",onClick:()=>r(!i),children:[n("span",{class:"log-group-toggle",children:i?"▾":"▸"},void 0,!1,void 0,this),n("span",{class:"log-group-summary",children:Ta(t)},void 0,!1,void 0,this),n("span",{class:"log-group-time",children:s},void 0,!1,void 0,this)]},void 0,!0,void 0,this),i&&n("div",{class:"log-group-entries",children:t.map((o,u)=>{let c=o.color?N(o.color):Ut(o.sender);return n("div",{class:"log-entry",children:[n("span",{class:"log-entry-time",children:zi(o.created_at)},void 0,!1,void 0,this),n("span",{class:"log-entry-sender",style:`color:${c}`,children:[o.sender,":"]},void 0,!0,void 0,this),n("span",{class:"log-entry-content",children:o.content},void 0,!1,void 0,this)]},`${o.sender}-${o.created_at}-${u}`,!0,void 0,this)})},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function bt({count:t,onClick:i}){if(t===0)return null;return n("div",{class:"new-messages-pill",onClick:i,children:[t," new message",t===1?"":"s"," ↓"]},void 0,!0,void 0,this)}function yr(t){let i=_(!0),[r,a]=f(!0);T(()=>{let o=t.current;if(!o)return;let u=()=>{let c=o.scrollHeight-o.scrollTop-o.clientHeight<80;i.current=c,a(c)};return o.addEventListener("scroll",u,{passive:!0}),()=>o.removeEventListener("scroll",u)},[t]);let v=y(()=>i.current??!0,[]),s=y(()=>{let o=t.current;if(!o)return;o.scrollTop=o.scrollHeight,i.current=!0,a(!0)},[t]);return{isAtBottom:v,atBottom:r,scrollToBottom:s}}function La(t){let i=new Map,r=[];for(let o=0;o<t.length;o++){let u=t[o];if(u.type==="log"&&u.message_id){let c=i.get(u.message_id)||[];c.push(u),i.set(u.message_id,c)}else r.push({index:o,msg:u})}let a=[],v=[];function s(){if(v.length>0)a.push({kind:"log-group",logs:v}),v=[]}for(let{index:o,msg:u}of r)if(u.type==="log")v.push(u);else{s(),a.push({kind:"message",msg:u,index:o});let c=u.id?i.get(u.id):void 0;if(c&&c.length>0)a.push({kind:"log-group",logs:c})}return s(),a}function Kt({messages:t,unreadCount:i,onScrollToBottom:r,onRetry:a}){let v=_(null),{isAtBottom:s,atBottom:o,scrollToBottom:u}=yr(v),c=_(0);T(()=>{if(t.length>(c.current??0)&&s())u();c.current=t.length},[t.length]),T(()=>{if(o&&i>0)r()},[o,i,r]),T(()=>{u()},[]);let F=La(t);return n("div",{class:"messages",ref:v,children:[F.map((P,l)=>{if(P.kind==="log-group"){let L=P.logs[0];return n(Xt,{logs:P.logs},`log-group-${L.sender}-${L.created_at}-${l}`,!1,void 0,this)}let g=P.msg;return n(Jt,{sender:g.sender,content:g.content,color:g.color,timestamp:g.created_at,tempId:g.tempId,status:g.status,onRetry:g.tempId&&a?()=>a(g.tempId):void 0},g.tempId||`${g.sender}-${g.created_at}-${P.index}`,!1,void 0,this)}),n(bt,{count:i,onClick:()=>{u(),r()}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Ha(t,i){let{selectionStart:r,selectionEnd:a,value:v}=t,s=v.slice(r,a),o;switch(i){case"bold":o=`**${s||"text"}**`;break;case"italic":o=`*${s||"text"}*`;break;case"code":o=s.includes(`
`)?`\`\`\`
${s||"code"}
\`\`\``:`\`${s||"code"}\``;break;case"link":o=`[${s||"text"}](url)`;break;default:return}t.value=v.slice(0,r)+o+v.slice(a),t.focus();let u=r+o.length;t.setSelectionRange(u,u)}var q=(t)=>t.preventDefault();function Ot({textareaRef:t,onSend:i}){let r=(a)=>{if(t.current)Ha(t.current,a)};return n("div",{class:"chat-input-toolbar",children:[n("button",{class:"fmt-btn",title:"Bold",onMouseDown:q,onTouchStart:q,onTouchEnd:()=>r("bold"),onClick:()=>r("bold"),children:n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:n("path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),n("button",{class:"fmt-btn",title:"Italic",onMouseDown:q,onTouchStart:q,onTouchEnd:()=>r("italic"),onClick:()=>r("italic"),children:n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("line",{x1:"19",x2:"10",y1:"4",y2:"4"},void 0,!1,void 0,this),n("line",{x1:"14",x2:"5",y1:"20",y2:"20"},void 0,!1,void 0,this),n("line",{x1:"15",x2:"9",y1:"4",y2:"20"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),n("button",{class:"fmt-btn",title:"Code",onMouseDown:q,onTouchStart:q,onTouchEnd:()=>r("code"),onClick:()=>r("code"),children:n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("polyline",{points:"16 18 22 12 16 6"},void 0,!1,void 0,this),n("polyline",{points:"8 6 2 12 8 18"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),n("button",{class:"fmt-btn",title:"Link",onMouseDown:q,onTouchStart:q,onTouchEnd:()=>r("link"),onClick:()=>r("link"),children:n("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},void 0,!1,void 0,this),n("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),n("div",{class:"toolbar-spacer"},void 0,!1,void 0,this),n("button",{class:"send-btn",title:"Send",onMouseDown:q,onTouchStart:q,onTouchEnd:i,onClick:i,children:n("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"},void 0,!1,void 0,this),n("path",{d:"m21.854 2.147-10.94 10.939"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function wr(t){let i=y(()=>{let a=t.current;if(!a)return;a.style.height="auto",a.style.height=Math.min(a.scrollHeight,200)+"px"},[t]),r=y(()=>{let a=t.current;if(!a)return;a.value="",a.style.height="auto"},[t]);return{resize:i,reset:r}}function Rt({roomName:t,onSend:i}){let r=_(null),{resize:a,reset:v}=wr(r),s=y(()=>{let u=r.current,c=u?.value.trim();if(!c||!u)return;i(c),v(),u.focus(),requestAnimationFrame(()=>u.focus())},[i,v]),o=y((u)=>{if(u.key==="Enter"&&!u.shiftKey&&!matchMedia("(pointer: coarse)").matches)u.preventDefault(),s()},[s]);return n("div",{class:"chat-input-area",children:n("div",{class:"chat-input-box",children:[n("textarea",{ref:r,placeholder:`Message #${t}`,rows:1,onInput:a,onKeyDown:o},void 0,!1,void 0,this),n(Ot,{textareaRef:r,onSend:s},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}var Gi=1000,za=30000;function mr(t,i,r,a){let v=_(null),s=_(r);s.current=r;let o=_(a?.onTeamInfo);o.current=a?.onTeamInfo;let u=_(0),c=_(Gi),[F,P]=f(!0);return T(()=>{if(!t||!i)return;async function l(){if(!t||u.current===0)return;try{let B=await or(t,u.current);for(let G of B){if(G.seq&&G.seq>u.current)u.current=G.seq;s.current?.(G)}}catch{}}function g(){if(v.current)v.current.close();let B=location.protocol==="https:"?"wss:":"ws:",G=`?token=${encodeURIComponent(i)}`,$=new WebSocket(`${B}//${location.host}/api/rooms/${t}/ws${G}`);$.onopen=()=>{P(!0),c.current=Gi,l()},$.onmessage=(H)=>{try{let m=JSON.parse(H.data);if(m.type==="team_info"){o.current?.(m);return}let w=m;if(!w.sender||!w.content)return;if(w.seq&&w.seq>u.current)u.current=w.seq;s.current?.(w)}catch{}},$.onerror=()=>console.error("WebSocket error"),$.onclose=()=>{P(!1);let H=c.current;c.current=Math.min(H*2,za),setTimeout(()=>{if(v.current===$)g()},H)},v.current=$}g();let L=()=>{if(document.visibilityState==="visible")if(!v.current||v.current.readyState!==WebSocket.OPEN)c.current=Gi,g();else l()};return document.addEventListener("visibilitychange",L),()=>{if(document.removeEventListener("visibilitychange",L),v.current){let B=v.current;v.current=null,B.close()}}},[t,i]),{wsRef:v,connected:F}}function ht(){return new Promise((t,i)=>{let r=indexedDB.open("meet-ai-queue",1);r.onupgradeneeded=()=>{let a=r.result;if(!a.objectStoreNames.contains("outbox"))a.createObjectStore("outbox",{keyPath:"tempId"})},r.onsuccess=()=>t(r.result),r.onerror=()=>i(r.error)})}async function Ga(t){let r=(await ht()).transaction("outbox","readwrite");if(r.objectStore("outbox").put(t),await new Promise((a,v)=>{r.oncomplete=()=>a(),r.onerror=()=>v(r.error)}),"serviceWorker"in navigator&&"SyncManager"in window)await(await navigator.serviceWorker.ready).sync.register("send-messages")}async function Ma(t){try{(await ht()).transaction("outbox","readwrite").objectStore("outbox").delete(t)}catch{}}async function _a(t){let a=(await ht()).transaction("outbox","readonly").objectStore("outbox").getAll();return(await new Promise((s,o)=>{a.onsuccess=()=>s(a.result),a.onerror=()=>o(a.error)})).filter((s)=>s.roomId===t)}async function Ya(){let r=(await ht()).transaction("outbox","readonly").objectStore("outbox").getAll();return new Promise((a,v)=>{r.onsuccess=()=>a(r.result),r.onerror=()=>v(r.error)})}function fr(){let t=y(Ga,[]),i=y(Ma,[]),r=y(_a,[]),a=y(Ya,[]);return{queue:t,remove:i,getForRoom:r,getAll:a}}async function Ar(){if(!("Notification"in window))return"denied";if(Notification.permission!=="default")return Notification.permission;return Notification.requestPermission()}function $r(t,i){if(!("Notification"in window))return;if(Notification.permission!=="granted")return;if(document.visibilityState!=="hidden")return;if(t.type==="log")return;if(t.sender===i)return;let r=new Notification(t.sender,{body:t.content.slice(0,100),tag:t.id??t.message_id??void 0,icon:"/favicon.ico"});r.onclick=()=>{window.focus(),r.close()}}function St({room:t,apiKey:i,userName:r,onTeamInfo:a}){let[v,s]=f([]),[o,u]=f(0),{queue:c,remove:F,getForRoom:P}=fr();T(()=>{let $=!1;async function H(){let[m,w]=await Promise.all([sr(t.id),ur(t.id)]);if($)return;let A=[...m,...w].sort((M,Z)=>new Date(M.created_at).getTime()-new Date(Z.created_at).getTime());s(A.map((M)=>({...M,status:"sent"})));try{let M=await P(t.id);if($||M.length===0)return;if(s((Z)=>[...Z,...M.map((K)=>({sender:K.sender,content:K.content,created_at:new Date(K.timestamp).toISOString(),tempId:K.tempId,status:"failed"}))]),navigator.onLine)for(let Z of M)try{if(await wt(Z.roomId,Z.sender,Z.content),await F(Z.tempId),!$)s((K)=>K.map((at)=>at.tempId===Z.tempId?{...at,status:"sent"}:at))}catch{}}catch{}}return H(),()=>{$=!0}},[t.id]),T(()=>{Ar()},[]);let l=y(($)=>{if($r($,r),$.sender===r)s((H)=>{let m=H.findIndex((w)=>w.tempId&&w.content===$.content);if(m!==-1){let w=[...H];return w.splice(m,1),[...w,{...$,status:"sent"}]}return[...H,{...$,status:"sent"}]});else s((H)=>[...H,{...$,status:"sent"}]),u((H)=>H+1)},[r]),g=y(($)=>{a?.($)},[a]),{connected:L}=mr(t.id,i,l,{onTeamInfo:g});T(()=>{let $=async()=>{try{let H=await P(t.id);for(let m of H){s((w)=>w.map((A)=>A.tempId===m.tempId?{...A,status:"pending"}:A));try{await wt(m.roomId,m.sender,m.content),await F(m.tempId),s((w)=>w.map((A)=>A.tempId===m.tempId?{...A,status:"sent"}:A))}catch{s((w)=>w.map((A)=>A.tempId===m.tempId?{...A,status:"failed"}:A))}}}catch{}};return window.addEventListener("online",$),()=>window.removeEventListener("online",$)},[t.id]);let B=y(async($)=>{let H="pending-"+Date.now()+"-"+Math.random().toString(36).slice(2,6);s((m)=>[...m,{sender:r,content:$,created_at:new Date().toISOString(),tempId:H,status:"pending"}]);try{await wt(t.id,r,$),s((m)=>m.map((w)=>w.tempId===H?{...w,status:"sent"}:w))}catch{await c({tempId:H,roomId:t.id,sender:r,content:$,apiKey:i,timestamp:Date.now()}),s((m)=>m.map((w)=>w.tempId===H?{...w,status:"failed"}:w))}},[t.id,r,i]),G=y(async($)=>{let H=v.find((m)=>m.tempId===$);if(!H)return;s((m)=>m.map((w)=>w.tempId===$?{...w,status:"pending"}:w));try{await wt(t.id,r,H.content),s((m)=>m.map((w)=>w.tempId===$?{...w,status:"sent"}:w)),await F($)}catch{s((m)=>m.map((w)=>w.tempId===$?{...w,status:"failed"}:w))}},[t.id,r,v]);return n(J,{children:[!L&&n("div",{class:"reconnecting-bar",children:"Reconnecting..."},void 0,!1,void 0,this),n(Kt,{messages:v,unreadCount:o,onScrollToBottom:()=>u(0),onRetry:G},void 0,!1,void 0,this),n(Rt,{roomName:t.name,onSend:B},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Nt({currentRoom:t,apiKey:i,userName:r,showInvite:a,showTeamToggle:v,onMobileToggle:s,onTeamToggle:o,onInviteClick:u,onTeamInfo:c}){let F=t?.name??"Select a channel";return n("div",{class:"main",children:[n(kt,{roomName:F,showInvite:a&&!!t,showTeamToggle:v,onMobileToggle:s,onTeamToggle:o,onInviteClick:u},void 0,!1,void 0,this),t?n(St,{room:t,apiKey:i,userName:r,onTeamInfo:c},t.id,!1,void 0,this):n(Ct,{},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Br({member:t,inactive:i}){return n("div",{class:`team-member${i?" team-member--inactive":""}`,children:[n("span",{class:"team-member-dot",style:{background:i?"#555":N(t.color)}},void 0,!1,void 0,this),n("span",{class:"team-member-name",children:t.name},void 0,!1,void 0,this),n("span",{class:"team-member-model",children:t.model},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function pt({teamInfo:t,isOpen:i,onClose:r}){let a=t.members.filter((s)=>s.status==="active"),v=t.members.filter((s)=>s.status==="inactive");return n("div",{class:`team-sidebar${i?" open":""}`,children:[n("div",{class:"team-sidebar-header",children:[n("span",{children:t.team_name},void 0,!1,void 0,this),n("span",{class:"team-sidebar-count",children:[a.length,"/",t.members.length]},void 0,!0,void 0,this),n("button",{class:"team-sidebar-close-btn",onClick:r,children:"×"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),a.length>0&&n("div",{class:"team-section",children:[n("div",{class:"team-section-label",children:"Active"},void 0,!1,void 0,this),a.map((s)=>n(Br,{member:s},s.name,!1,void 0,this))]},void 0,!0,void 0,this),v.length>0&&n("div",{class:"team-section",children:[n("div",{class:"team-section-label",children:"Inactive"},void 0,!1,void 0,this),v.map((s)=>n(Br,{member:s,inactive:!0},s.name,!1,void 0,this))]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function Et({schema:t}){let i=Ti(t);return n("div",{class:"color-preview",children:i.map((r,a)=>n("div",{class:"color-swatch",style:`background:${r}`,title:$i[a],children:$i[a]},a,!1,void 0,this))},void 0,!1,void 0,this)}function Dt({currentSchema:t,onSave:i,onClose:r}){let[a,v]=f(t),[s,o]=f(()=>{let B=Ai.find((G)=>G.schema===t);return B?B.schema:""}),u=t,c=y((B)=>{let G=B.target.value;v(G),o(""),b(G.trim())},[]),F=y((B)=>{let G=B.target.value;if(o(G),G)v(G),b(G)},[]),P=y(()=>{i(a.trim())},[a,i]),l=y(()=>{b(u),r()},[u,r]),g=y(()=>{v(tt),o(tt),b(tt)},[]),L=y((B)=>{if(B.target.classList.contains("settings-overlay"))b(u),r()},[u,r]);return n("div",{class:"settings-overlay",onClick:L,children:n("div",{class:"settings-panel",children:[n("h2",{children:"Color Schema"},void 0,!1,void 0,this),n("label",{children:"Theme Presets"},void 0,!1,void 0,this),n("select",{value:s,onChange:F,children:[n("option",{value:"",children:"Custom"},void 0,!1,void 0,this),Ai.map((B)=>n("option",{value:B.schema,children:B.name},B.name,!1,void 0,this))]},void 0,!0,void 0,this),n("label",{children:"Schema string (10 comma-separated hex colors)"},void 0,!1,void 0,this),n("input",{type:"text",value:a,onInput:c},void 0,!1,void 0,this),n(Et,{schema:a},void 0,!1,void 0,this),n("div",{class:"btn-row",children:[n("button",{class:"btn-reset",onClick:g,children:"Reset"},void 0,!1,void 0,this),n("button",{class:"btn-cancel",onClick:l,children:"Cancel"},void 0,!1,void 0,this),n("button",{class:"btn-save",onClick:P,children:"Save"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function Vt({onClose:t,onToast:i}){let[r,a]=f(null),[v,s]=f(null),[o,u]=f(!1);T(()=>{let P=!1;async function l(){try{let g=await Fr();if(P)return;a(g.url)}catch(g){if(!P)s(g.message||"Failed to create share link")}}return l(),()=>{P=!0}},[]),T(()=>{if(!r)return;let P=document.getElementById("qr-container");if(!P)return;try{let l=qrcode(0,"M");l.addData(r),l.make(),P.innerHTML=l.createImgTag(5,8)}catch{}},[r]);let c=y(async()=>{if(!r)return;try{await navigator.clipboard.writeText(r),u(!0),setTimeout(()=>u(!1),2000)}catch{let P=document.getElementById("qr-url");if(P){let l=document.createRange();l.selectNodeContents(P),window.getSelection()?.removeAllRanges(),window.getSelection()?.addRange(l)}}},[r]),F=y((P)=>{if(P.target.classList.contains("qr-overlay"))t()},[t]);return n("div",{class:"qr-overlay",onClick:F,children:n("div",{class:"qr-panel",children:[n("h2",{children:"Login on another device"},void 0,!1,void 0,this),n("p",{class:"qr-subtitle",children:"Scan with your phone camera to sign in"},void 0,!1,void 0,this),n("div",{class:"qr-container",id:"qr-container",children:[!r&&!v&&n("div",{style:"width:200px;height:200px;display:flex;align-items:center;justify-content:center;margin:0 auto",children:n("div",{style:"width:32px;height:32px;border:3px solid var(--c-border);border-top-color:var(--c-primary);border-radius:50%;animation:spin 0.8s linear infinite"},void 0,!1,void 0,this)},void 0,!1,void 0,this),v&&n("p",{style:"color:#F85149",children:v},void 0,!1,void 0,this)]},void 0,!0,void 0,this),r&&n("div",{class:"qr-url",id:"qr-url",onClick:c,title:"Click to copy",children:r},void 0,!1,void 0,this),n("div",{class:"qr-copied",children:o?"Copied to clipboard!":""},void 0,!1,void 0,this),n("div",{class:"qr-expires",children:"Expires in 5 minutes"},void 0,!1,void 0,this),n("button",{class:"btn-close",onClick:t,children:"Close"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function dt({onClose:t}){return n("div",{class:"ios-install-overlay",onClick:t,children:n("div",{class:"ios-install-panel",onClick:(i)=>i.stopPropagation(),children:[n("h3",{children:"Install meet-ai"},void 0,!1,void 0,this),n("div",{class:"ios-install-steps",children:[n("div",{class:"ios-install-step",children:[n("span",{class:"ios-step-num",children:"1"},void 0,!1,void 0,this),n("span",{class:"ios-step-text",children:["Tap the ",n("strong",{children:"Share"},void 0,!1,void 0,this)," button",n("svg",{class:"ios-share-icon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[n("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"},void 0,!1,void 0,this),n("polyline",{points:"16 6 12 2 8 6"},void 0,!1,void 0,this),n("line",{x1:"12",y1:"2",x2:"12",y2:"15"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"in the toolbar"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"ios-install-step",children:[n("span",{class:"ios-step-num",children:"2"},void 0,!1,void 0,this),n("span",{class:"ios-step-text",children:["Scroll down and tap ",n("strong",{children:"Add to Home Screen"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n("div",{class:"ios-install-step",children:[n("span",{class:"ios-step-num",children:"3"},void 0,!1,void 0,this),n("span",{class:"ios-step-text",children:["Tap ",n("strong",{children:"Add"},void 0,!1,void 0,this)," in the top right"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),n("button",{class:"ios-install-close",onClick:t,children:"Got it"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function xt({text:t,onDone:i}){return T(()=>{let r=setTimeout(i,2100);return()=>clearTimeout(r)},[i]),n("div",{class:"toast",children:t},void 0,!1,void 0,this)}function Tr(t,i){let r=_(null),a=_(i);a.current=i,T(()=>{if(!t)return;function v(){let s=location.protocol==="https:"?"wss:":"ws:",o=`?token=${encodeURIComponent(t)}`,u=new WebSocket(`${s}//${location.host}/api/lobby/ws${o}`);u.onmessage=(c)=>{try{let F=JSON.parse(c.data);if(F.type==="room_created")a.current?.(F.id,F.name)}catch{}},u.onclose=()=>{setTimeout(()=>{if(r.current===u)v()},3000)},r.current=u}return v(),()=>{if(r.current){let s=r.current;r.current=null,s.close()}}},[t])}function jt(){let t=location.pathname.match(/^\/chat\/([a-f0-9-]+)$/i);return t?t[1]:null}function Lr(t,i){T(()=>{let v=()=>{let s=jt();i(s)};return window.addEventListener("popstate",v),()=>window.removeEventListener("popstate",v)},[t,i]);let r=y((v)=>{history.pushState({roomId:v},"","/chat/"+v)},[]),a=y((v)=>{history.replaceState(null,"",v)},[]);return{pushRoom:r,replaceUrl:a}}function et({apiKey:t,userName:i,colorSchema:r,onNameChange:a,onSchemaChange:v}){let[s,o]=f([]),[u,c]=f(null),[F,P]=f(!1),[l,g]=f(!1),[L,B]=f(!1),[G,$]=f(null),[H,m]=f(null),[w,A]=f(!1),[M,Z]=f(!1),K=window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches;T(()=>{let Y=!1;async function nt(){let p=await vr();if(Y)return;o(p);let Yi=jt();if(Yi){let Zi=p.find((Ir)=>Ir.id===Yi);if(Zi)c(Zi)}}return nt(),()=>{Y=!0}},[]);let at=y((Y,nt)=>{o((p)=>[...p,{id:Y,name:nt}])},[]);Tr(t,at);let{pushRoom:_i,replaceUrl:Ia}=Lr(s,y((Y)=>{if(Y){let nt=s.find((p)=>p.id===Y);c(nt??null)}else c(null)},[s])),_r=y((Y)=>{c(Y),P(!1),_i(Y.id)},[_i]),Yr=y(()=>{P(!1),Z(!0)},[]),Zr=y((Y)=>{v(Y),g(!1)},[v]);return T(()=>{if(!jt())history.replaceState({roomId:null},"",location.pathname)},[]),n(J,{children:[n(Qt,{rooms:s,currentRoomId:u?.id??null,userName:i,isOpen:F,onSelectRoom:_r,onNameChange:a,onSettingsClick:()=>g(!0),onClose:()=>P(!1),onInstallClick:Yr},void 0,!1,void 0,this),F&&n(Wt,{onClick:()=>P(!1)},void 0,!1,void 0,this),n(Nt,{currentRoom:u,apiKey:t,userName:i,showInvite:!K,showTeamToggle:!!H,onMobileToggle:()=>P((Y)=>!Y),onTeamToggle:()=>A((Y)=>!Y),onInviteClick:()=>B(!0),onTeamInfo:m},void 0,!1,void 0,this),H&&n(pt,{teamInfo:H,isOpen:w,onClose:()=>A(!1)},void 0,!1,void 0,this),w&&n("div",{class:"team-sidebar-backdrop",onClick:()=>A(!1),style:"display:block"},void 0,!1,void 0,this),l&&n(Dt,{currentSchema:r,onSave:Zr,onClose:()=>g(!1)},void 0,!1,void 0,this),L&&n(Vt,{onClose:()=>B(!1),onToast:(Y)=>{$(Y),B(!1)}},void 0,!1,void 0,this),M&&n(dt,{onClose:()=>Z(!1)},void 0,!1,void 0,this),G&&n(xt,{text:G,onDone:()=>$(null)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Mi(t,i){let[r,a]=f(()=>{return localStorage.getItem(t)??i}),v=y((s)=>{a(s),localStorage.setItem(t,s)},[t]);return[r,v]}var Hr=["curious","bold","swift","quiet","bright","keen","calm","wild","lazy","witty","brave","sly","warm","cool","zen"],zr=["panda","fox","otter","hawk","wolf","owl","lynx","bear","deer","raven","hare","seal","wren","crane","moth"];function Za(){let t=Hr[Math.floor(Math.random()*Hr.length)],i=zr[Math.floor(Math.random()*zr.length)],r=Math.floor(Math.random()*100);return`${t}-${i}-${r}`}function Gr(){let t=localStorage.getItem(C.handle);if(!t)t=Za(),localStorage.setItem(C.handle,t);return t}function ti(){let[t,i]=f(()=>Bi()),[r,a]=Mi(C.handle,Gr()),[v,s]=Mi(C.colorSchema,tt),o=new URLSearchParams(location.search).get("token");T(()=>{b(v)},[v]);let u=y((F)=>{nr(F),i(F),history.replaceState(null,"","/chat"),location.reload()},[]),c=y((F)=>{s(F),b(F)},[]);if(o&&t)history.replaceState(null,"",location.pathname);if(o&&!t)return n(Mt,{token:o,onLogin:u},void 0,!1,void 0,this);if(!t)return n(Gt,{onLogin:u},void 0,!1,void 0,this);return n(et,{apiKey:t,userName:r,colorSchema:v,onNameChange:a,onSchemaChange:c},void 0,!1,void 0,this)}var Mr=document.getElementById("root");if(Mr)li(n(ti,{},void 0,!1,void 0,this),Mr);
