var an=Object.create;var{getPrototypeOf:sn,defineProperty:Hi,getOwnPropertyNames:un}=Object;var on=Object.prototype.hasOwnProperty;var tr=(t,i,r)=>{r=t!=null?an(sn(t)):{};let n=i||!t||!t.__esModule?Hi(r,"default",{value:t,enumerable:!0}):r;for(let s of un(t))if(!on.call(n,s))Hi(n,s,{get:()=>t[s],enumerable:!0});return n};var ir=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports);var cn=(t,i)=>{for(var r in i)Hi(t,r,{get:i[r],enumerable:!0,configurable:!0,set:(n)=>i[r]=()=>n})};var Ur=ir((Di,di)=>{(function(t,i){typeof Di=="object"&&typeof di<"u"?di.exports=i():typeof define=="function"&&define.amd?define(i):(t=typeof globalThis<"u"?globalThis:t||self).dayjs=i()})(Di,function(){var t=1000,i=60000,r=3600000,n="millisecond",s="second",u="minute",o="hour",c="day",f="week",v="month",F="quarter",l="year",y="date",g="Invalid Date",T=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,L=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,C={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Y){var w=["th","st","nd","rd"],$=Y%100;return"["+Y+(w[($-20)%10]||w[$]||w[0])+"]"}},I=function(Y,w,$){var M=String(Y);return!M||M.length>=w?Y:""+Array(w+1-M.length).join($)+Y},B={s:I,z:function(Y){var w=-Y.utcOffset(),$=Math.abs(w),M=Math.floor($/60),m=$%60;return(w<=0?"+":"-")+I(M,2,"0")+":"+I(m,2,"0")},m:function Y(w,$){if(w.date()<$.date())return-Y($,w);var M=12*($.year()-w.year())+($.month()-w.month()),m=w.clone().add(M,v),z=$-m<0,k=w.clone().add(M+(z?-1:1),v);return+(-(M+($-m)/(z?m-k:k-m))||0)},a:function(Y){return Y<0?Math.ceil(Y)||0:Math.floor(Y)},p:function(Y){return{M:v,y:l,w:f,d:c,D:y,h:o,m:u,s,ms:n,Q:F}[Y]||String(Y||"").toLowerCase().replace(/s$/,"")},u:function(Y){return Y===void 0}},A="en",h={};h[A]=C;var H="$isDayjsObject",Q=function(Y){return Y instanceof V||!(!Y||!Y[H])},J=function Y(w,$,M){var m;if(!w)return A;if(typeof w=="string"){var z=w.toLowerCase();h[z]&&(m=z),$&&(h[z]=$,m=z);var k=w.split("-");if(!m&&k.length>1)return Y(k[0])}else{var b=w.name;h[b]=w,m=b}return!M&&m&&(A=m),m||!M&&A},Z=function(Y,w){if(Q(Y))return Y.clone();var $=typeof w=="object"?w:{};return $.date=Y,$.args=arguments,new V($)},G=B;G.l=J,G.i=Q,G.w=function(Y,w){return Z(Y,{locale:w.$L,utc:w.$u,x:w.$x,$offset:w.$offset})};var V=function(){function Y($){this.$L=J($.locale,null,!0),this.parse($),this.$x=this.$x||$.x||{},this[H]=!0}var w=Y.prototype;return w.parse=function($){this.$d=function(M){var{date:m,utc:z}=M;if(m===null)return new Date(NaN);if(G.u(m))return new Date;if(m instanceof Date)return new Date(m);if(typeof m=="string"&&!/Z$/i.test(m)){var k=m.match(T);if(k){var b=k[2]-1||0,q=(k[7]||"0").substring(0,3);return z?new Date(Date.UTC(k[1],b,k[3]||1,k[4]||0,k[5]||0,k[6]||0,q)):new Date(k[1],b,k[3]||1,k[4]||0,k[5]||0,k[6]||0,q)}}return new Date(m)}($),this.init()},w.init=function(){var $=this.$d;this.$y=$.getFullYear(),this.$M=$.getMonth(),this.$D=$.getDate(),this.$W=$.getDay(),this.$H=$.getHours(),this.$m=$.getMinutes(),this.$s=$.getSeconds(),this.$ms=$.getMilliseconds()},w.$utils=function(){return G},w.isValid=function(){return this.$d.toString()!==g},w.isSame=function($,M){var m=Z($);return this.startOf(M)<=m&&m<=this.endOf(M)},w.isAfter=function($,M){return Z($)<this.startOf(M)},w.isBefore=function($,M){return this.endOf(M)<Z($)},w.$g=function($,M,m){return G.u($)?this[M]:this.set(m,$)},w.unix=function(){return Math.floor(this.valueOf()/1000)},w.valueOf=function(){return this.$d.getTime()},w.startOf=function($,M){var m=this,z=!!G.u(M)||M,k=G.p($),b=function(ot,S){var rt=G.w(m.$u?Date.UTC(m.$y,S,ot):new Date(m.$y,S,ot),m);return z?rt:rt.endOf(c)},q=function(ot,S){return G.w(m.toDate()[ot].apply(m.toDate("s"),(z?[0,0,0,0]:[23,59,59,999]).slice(S)),m)},X=this.$W,K=this.$M,R=this.$D,lt="set"+(this.$u?"UTC":"");switch(k){case l:return z?b(1,0):b(31,11);case v:return z?b(1,K):b(0,K+1);case f:var ut=this.$locale().weekStart||0,Tt=(X<ut?X+7:X)-ut;return b(z?R-Tt:R+(6-Tt),K);case c:case y:return q(lt+"Hours",0);case o:return q(lt+"Minutes",1);case u:return q(lt+"Seconds",2);case s:return q(lt+"Milliseconds",3);default:return this.clone()}},w.endOf=function($){return this.startOf($,!1)},w.$set=function($,M){var m,z=G.p($),k="set"+(this.$u?"UTC":""),b=(m={},m[c]=k+"Date",m[y]=k+"Date",m[v]=k+"Month",m[l]=k+"FullYear",m[o]=k+"Hours",m[u]=k+"Minutes",m[s]=k+"Seconds",m[n]=k+"Milliseconds",m)[z],q=z===c?this.$D+(M-this.$W):M;if(z===v||z===l){var X=this.clone().set(y,1);X.$d[b](q),X.init(),this.$d=X.set(y,Math.min(this.$D,X.daysInMonth())).$d}else b&&this.$d[b](q);return this.init(),this},w.set=function($,M){return this.clone().$set($,M)},w.get=function($){return this[G.p($)]()},w.add=function($,M){var m,z=this;$=Number($);var k=G.p(M),b=function(K){var R=Z(z);return G.w(R.date(R.date()+Math.round(K*$)),z)};if(k===v)return this.set(v,this.$M+$);if(k===l)return this.set(l,this.$y+$);if(k===c)return b(1);if(k===f)return b(7);var q=(m={},m[u]=i,m[o]=r,m[s]=t,m)[k]||1,X=this.$d.getTime()+$*q;return G.w(X,this)},w.subtract=function($,M){return this.add(-1*$,M)},w.format=function($){var M=this,m=this.$locale();if(!this.isValid())return m.invalidDate||g;var z=$||"YYYY-MM-DDTHH:mm:ssZ",k=G.z(this),b=this.$H,q=this.$m,X=this.$M,K=m.weekdays,R=m.months,lt=m.meridiem,ut=function(S,rt,At,Ct){return S&&(S[rt]||S(M,z))||At[rt].slice(0,Ct)},Tt=function(S){return G.s(b%12||12,S,"0")},ot=lt||function(S,rt,At){var Ct=S<12?"AM":"PM";return At?Ct.toLowerCase():Ct};return z.replace(L,function(S,rt){return rt||function(At){switch(At){case"YY":return String(M.$y).slice(-2);case"YYYY":return G.s(M.$y,4,"0");case"M":return X+1;case"MM":return G.s(X+1,2,"0");case"MMM":return ut(m.monthsShort,X,R,3);case"MMMM":return ut(R,X);case"D":return M.$D;case"DD":return G.s(M.$D,2,"0");case"d":return String(M.$W);case"dd":return ut(m.weekdaysMin,M.$W,K,2);case"ddd":return ut(m.weekdaysShort,M.$W,K,3);case"dddd":return K[M.$W];case"H":return String(b);case"HH":return G.s(b,2,"0");case"h":return Tt(1);case"hh":return Tt(2);case"a":return ot(b,q,!0);case"A":return ot(b,q,!1);case"m":return String(q);case"mm":return G.s(q,2,"0");case"s":return String(M.$s);case"ss":return G.s(M.$s,2,"0");case"SSS":return G.s(M.$ms,3,"0");case"Z":return k}return null}(S)||k.replace(":","")})},w.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},w.diff=function($,M,m){var z,k=this,b=G.p(M),q=Z($),X=(q.utcOffset()-this.utcOffset())*i,K=this-q,R=function(){return G.m(k,q)};switch(b){case l:z=R()/12;break;case v:z=R();break;case F:z=R()/3;break;case f:z=(K-X)/604800000;break;case c:z=(K-X)/86400000;break;case o:z=K/r;break;case u:z=K/i;break;case s:z=K/t;break;default:z=K}return m?z:G.a(z)},w.daysInMonth=function(){return this.endOf(v).$D},w.$locale=function(){return h[this.$L]},w.locale=function($,M){if(!$)return this.$L;var m=this.clone(),z=J($,M,!0);return z&&(m.$L=z),m},w.clone=function(){return G.w(this.$d,this)},w.toDate=function(){return new Date(this.valueOf())},w.toJSON=function(){return this.isValid()?this.toISOString():null},w.toISOString=function(){return this.$d.toISOString()},w.toString=function(){return this.$d.toUTCString()},Y}(),It=V.prototype;return Z.prototype=It,[["$ms",n],["$s",s],["$m",u],["$H",o],["$W",c],["$M",v],["$y",l],["$D",y]].forEach(function(Y){It[Y[1]]=function(w){return this.$g(w,Y[0],Y[1])}}),Z.extend=function(Y,w){return Y.$i||(Y(w,V,Z),Y.$i=!0),Z},Z.locale=J,Z.isDayjs=Q,Z.unix=function(Y){return Z(1000*Y)},Z.en=h[A],Z.Ls=h,Z.p={},Z})});var qr=ir((Ei,ei)=>{(function(t,i){typeof Ei=="object"&&typeof ei<"u"?ei.exports=i():typeof define=="function"&&define.amd?define(i):(t=typeof globalThis<"u"?globalThis:t||self).dayjs_plugin_utc=i()})(Ei,function(){var t="minute",i=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,s,u){var o=s.prototype;u.utc=function(g){var T={date:g,utc:!0,args:arguments};return new s(T)},o.utc=function(g){var T=u(this.toDate(),{locale:this.$L,utc:!0});return g?T.add(this.utcOffset(),t):T},o.local=function(){return u(this.toDate(),{locale:this.$L,utc:!1})};var c=o.parse;o.parse=function(g){g.utc&&(this.$u=!0),this.$utils().u(g.$offset)||(this.$offset=g.$offset),c.call(this,g)};var f=o.init;o.init=function(){if(this.$u){var g=this.$d;this.$y=g.getUTCFullYear(),this.$M=g.getUTCMonth(),this.$D=g.getUTCDate(),this.$W=g.getUTCDay(),this.$H=g.getUTCHours(),this.$m=g.getUTCMinutes(),this.$s=g.getUTCSeconds(),this.$ms=g.getUTCMilliseconds()}else f.call(this)};var v=o.utcOffset;o.utcOffset=function(g,T){var L=this.$utils().u;if(L(g))return this.$u?0:L(this.$offset)?v.call(this):this.$offset;if(typeof g=="string"&&(g=function(A){A===void 0&&(A="");var h=A.match(i);if(!h)return null;var H=(""+h[0]).match(r)||["-",0,0],Q=H[0],J=60*+H[1]+ +H[2];return J===0?0:Q==="+"?J:-J}(g),g===null))return this;var C=Math.abs(g)<=16?60*g:g;if(C===0)return this.utc(T);var I=this.clone();if(T)return I.$offset=C,I.$u=!1,I;var B=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(I=this.local().add(C+B,t)).$offset=C,I.$x.$localOffset=B,I};var F=o.format;o.format=function(g){var T=g||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return F.call(this,T)},o.valueOf=function(){var g=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-60000*g},o.isUTC=function(){return!!this.$u},o.toISOString=function(){return this.toDate().toISOString()},o.toString=function(){return this.toDate().toUTCString()};var l=o.toDate;o.toDate=function(g){return g==="s"&&this.$offset?u(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():l.call(this)};var y=o.diff;o.diff=function(g,T,L){if(g&&this.$u===g.$u)return y.call(this,g,T,L);var C=this.local(),I=u(g).local();return y.call(C,I,T,L)}}})});var vn={Stringify:1,BeforeStream:2,Stream:3},p=(t,i)=>{let r=new String(t);return r.isEscaped=!0,r.callbacks=i,r},ln=/[&<>'"]/,Bi=async(t,i)=>{let r="";i||=[];let n=await Promise.all(t);for(let s=n.length-1;;s--){if(r+=n[s],s--,s<0)break;let u=n[s];if(typeof u==="object")i.push(...u.callbacks||[]);let o=u.isEscaped;if(u=await(typeof u==="object"?u.toString():u),typeof u==="object")i.push(...u.callbacks||[]);if(u.isEscaped??o)r+=u;else{let c=[r];nt(u,c),r=c[0]}}return p(r,i)},nt=(t,i)=>{let r=t.search(ln);if(r===-1){i[0]+=t;return}let n,s,u=0;for(s=r;s<t.length;s++){switch(t.charCodeAt(s)){case 34:n="&quot;";break;case 39:n="&#39;";break;case 38:n="&amp;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}i[0]+=t.substring(u,s)+n,u=s+1}i[0]+=t.substring(u,s)},_i=(t)=>{let i=t.callbacks;if(!i?.length)return t;let r=[t],n={};return i.forEach((s)=>s({phase:vn.Stringify,buffer:r,context:n})),r[0]};var ft=Symbol("RENDERER"),Ft=Symbol("ERROR_HANDLER"),O=Symbol("STASH"),Qt=Symbol("INTERNAL"),Ut=Symbol("MEMO"),$t=Symbol("PERMALINK");var Yi=(t)=>{return t[Qt]=!0,t};var Li=(t)=>({value:i,children:r})=>{if(!r)return;let n={children:[{tag:Yi(()=>{t.push(i)}),props:{}}]};if(Array.isArray(r))n.children.push(...r.flat());else n.children.push(r);n.children.push({tag:Yi(()=>{t.pop()}),props:{}});let s={tag:"",props:n,type:""};return s[Ft]=(u)=>{throw t.pop(),u},s},Ht=(t)=>{let i=[t],r=Li(i);return r.values=i,r.Provider=r,x.push(r),r};var x=[],rr=(t)=>{let i=[t],r=(n)=>{i.push(n.value);let s;try{s=n.children?(Array.isArray(n.children)?new zi("",{},n.children):n.children).toString():""}catch(u){throw i.pop(),u}if(s instanceof Promise)return s.finally(()=>i.pop()).then((u)=>p(u,u.callbacks));else return i.pop(),p(s)};return r.values=i,r.Provider=r,r[ft]=Li(i),x.push(r),r},N=(t)=>{return t.values.at(-1)};var yt={title:[],script:["src"],style:["data-href"],link:["href"],meta:["name","httpEquiv","charset","itemProp"]},Bt={},gt="data-precedence";var Lt={};cn(Lt,{title:()=>fn,style:()=>$n,script:()=>Fn,meta:()=>gn,link:()=>yn,input:()=>hn,form:()=>mn,button:()=>wn});var ct=(t)=>Array.isArray(t)?t:[t];var nr=new WeakMap,ar=(t,i,r,n)=>({buffer:s,context:u})=>{if(!s)return;let o=nr.get(u)||{};nr.set(u,o);let c=o[t]||=[],f=!1,v=yt[t];if(v.length>0)t:for(let[,F]of c)for(let l of v)if((F?.[l]??null)===r?.[l]){f=!0;break t}if(f)s[0]=s[0].replaceAll(i,"");else if(v.length>0)c.push([i,r,n]);else c.unshift([i,r,n]);if(s[0].indexOf("</head>")!==-1){let F;if(n===void 0)F=c.map(([l])=>l);else{let l=[];F=c.map(([y,,g])=>{let T=l.indexOf(g);if(T===-1)l.push(g),T=l.length-1;return[y,T]}).sort((y,g)=>y[1]-g[1]).map(([y])=>y)}F.forEach((l)=>{s[0]=s[0].replaceAll(l,"")}),s[0]=s[0].replace(/(?=<\/head>)/,F.join(""))}},_t=(t,i,r)=>p(new D(t,r,ct(i??[])).toString()),Yt=(t,i,r,n)=>{if("itemProp"in r)return _t(t,i,r);let{precedence:s,blocking:u,...o}=r;if(s=n?s??"":void 0,n)o[gt]=s;let c=new D(t,o,ct(i||[])).toString();if(c instanceof Promise)return c.then((f)=>p(c,[...f.callbacks||[],ar(t,f,o,s)]));else return p(c,[ar(t,c,o,s)])},fn=({children:t,...i})=>{let r=qt();if(r){let n=N(r);if(n==="svg"||n==="head")return new D("title",i,ct(t??[]))}return Yt("title",t,i,!1)},Fn=({children:t,...i})=>{let r=qt();if(["src","async"].some((n)=>!i[n])||r&&N(r)==="head")return _t("script",t,i);return Yt("script",t,i,!1)},$n=({children:t,...i})=>{if(!["href","precedence"].every((r)=>(r in i)))return _t("style",t,i);return i["data-href"]=i.href,delete i.href,Yt("style",t,i,!0)},yn=({children:t,...i})=>{if(["onLoad","onError"].some((r)=>(r in i))||i.rel==="stylesheet"&&(!("precedence"in i)||("disabled"in i)))return _t("link",t,i);return Yt("link",t,i,"precedence"in i)},gn=({children:t,...i})=>{let r=qt();if(r&&N(r)==="head")return _t("meta",t,i);return Yt("meta",t,i,!1)},sr=(t,{children:i,...r})=>new D(t,r,ct(i??[])),mn=(t)=>{if(typeof t.action==="function")t.action=$t in t.action?t.action[$t]:void 0;return sr("form",t)},ur=(t,i)=>{if(typeof i.formAction==="function")i.formAction=$t in i.formAction?i.formAction[$t]:void 0;return sr(t,i)},hn=(t)=>ur("input",t),wn=(t)=>ur("button",t);var Pn=new Map([["className","class"],["htmlFor","for"],["crossOrigin","crossorigin"],["httpEquiv","http-equiv"],["itemProp","itemprop"],["fetchPriority","fetchpriority"],["noModule","nomodule"],["formAction","formaction"]]),mt=(t)=>Pn.get(t)||t,Jt=(t,i)=>{for(let[r,n]of Object.entries(t)){let s=r[0]==="-"||!/[A-Z]/.test(r)?r:r.replace(/[A-Z]/g,(u)=>`-${u.toLowerCase()}`);i(s,n==null?null:typeof n==="number"?!s.match(/^(?:a|border-im|column(?:-c|s)|flex(?:$|-[^b])|grid-(?:ar|[^a])|font-w|li|or|sca|st|ta|wido|z)|ty$/)?`${n}px`:`${n}`:n)}};var zt=void 0,qt=()=>zt,Mn=(t)=>/[A-Z]/.test(t)&&t.match(/^(?:al|basel|clip(?:Path|Rule)$|co|do|fill|fl|fo|gl|let|lig|i|marker[EMS]|o|pai|pointe|sh|st[or]|text[^L]|tr|u|ve|w)/)?t.replace(/([A-Z])/g,"-$1").toLowerCase():t,Tn=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],An=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Gi=(t,i)=>{for(let r=0,n=t.length;r<n;r++){let s=t[r];if(typeof s==="string")nt(s,i);else if(typeof s==="boolean"||s===null||s===void 0)continue;else if(s instanceof D)s.toStringToBuffer(i);else if(typeof s==="number"||s.isEscaped)i[0]+=s;else if(s instanceof Promise)i.unshift("",s);else Gi(s,i)}},D=class{tag;props;key;children;isEscaped=!0;localContexts;constructor(t,i,r){this.tag=t,this.props=i,this.children=r}get type(){return this.tag}get ref(){return this.props.ref||null}toString(){let t=[""];this.localContexts?.forEach(([i,r])=>{i.values.push(r)});try{this.toStringToBuffer(t)}finally{this.localContexts?.forEach(([i])=>{i.values.pop()})}return t.length===1?"callbacks"in t?_i(p(t[0],t.callbacks)).toString():t[0]:Bi(t,t.callbacks)}toStringToBuffer(t){let i=this.tag,r=this.props,{children:n}=this;t[0]+=`<${i}`;let s=zt&&N(zt)==="svg"?(u)=>Mn(mt(u)):(u)=>mt(u);for(let[u,o]of Object.entries(r))if(u=s(u),u==="children");else if(u==="style"&&typeof o==="object"){let c="";Jt(o,(f,v)=>{if(v!=null)c+=`${c?";":""}${f}:${v}`}),t[0]+=' style="',nt(c,t),t[0]+='"'}else if(typeof o==="string")t[0]+=` ${u}="`,nt(o,t),t[0]+='"';else if(o===null||o===void 0);else if(typeof o==="number"||o.isEscaped)t[0]+=` ${u}="${o}"`;else if(typeof o==="boolean"&&An.includes(u)){if(o)t[0]+=` ${u}=""`}else if(u==="dangerouslySetInnerHTML"){if(n.length>0)throw Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");n=[p(o.__html)]}else if(o instanceof Promise)t[0]+=` ${u}="`,t.unshift('"',o);else if(typeof o==="function"){if(!u.startsWith("on")&&u!=="ref")throw Error(`Invalid prop '${u}' of type 'function' supplied to '${i}'.`)}else t[0]+=` ${u}="`,nt(o.toString(),t),t[0]+='"';if(Tn.includes(i)&&n.length===0){t[0]+="/>";return}t[0]+=">",Gi(n,t),t[0]+=`</${i}>`}},ki=class extends D{toStringToBuffer(t){let{children:i}=this,r={...this.props};if(i.length)r.children=i.length===1?i[0]:i;let n=this.tag.call(null,r);if(typeof n==="boolean"||n==null)return;else if(n instanceof Promise)if(x.length===0)t.unshift("",n);else{let s=x.map((u)=>[u,u.values.at(-1)]);t.unshift("",n.then((u)=>{if(u instanceof D)u.localContexts=s;return u}))}else if(n instanceof D)n.toStringToBuffer(t);else if(typeof n==="number"||n.isEscaped){if(t[0]+=n,n.callbacks)t.callbacks||=[],t.callbacks.push(...n.callbacks)}else nt(n,t)}},zi=class extends D{toStringToBuffer(t){Gi(this.children,t)}};var or=!1,Xt=(t,i,r)=>{if(!or){for(let n in Bt)Lt[n][ft]=Bt[n];or=!0}if(typeof t==="function")return new ki(t,i,r);else if(Lt[t])return new ki(Lt[t],i,r);else if(t==="svg"||t==="head")return zt||=rr(""),new D(t,i,[new ki(zt,{value:t},r)]);else return new D(t,i,r)};var j=({children:t})=>{return new zi("",{children:t},Array.isArray(t)?t:t?[t]:[])};var Gt="_hp",Hn={Change:"Input",DoubleClick:"DblClick"},Bn={svg:"2000/svg",math:"1998/Math/MathML"},at=[],Zi=new WeakMap,ht=void 0,yr=()=>ht,tt=(t)=>("t"in t),Wi={onClick:["click",!1]},cr=(t)=>{if(!t.startsWith("on"))return;if(Wi[t])return Wi[t];let i=t.match(/^on([A-Z][a-zA-Z]+?(?:PointerCapture)?)(Capture)?$/);if(i){let[,r,n]=i;return Wi[t]=[(Hn[r]||r).toLowerCase(),!!n]}return},vr=(t,i)=>ht&&t instanceof SVGElement&&/[A-Z]/.test(i)&&((i in t.style)||i.match(/^(?:o|pai|str|u|ve)/))?i.replace(/([A-Z])/g,"-$1").toLowerCase():i,_n=(t,i,r)=>{i||={};for(let n in i){let s=i[n];if(n!=="children"&&(!r||r[n]!==s)){n=mt(n);let u=cr(n);if(u){if(r?.[n]!==s){if(r)t.removeEventListener(u[0],r[n],u[1]);if(s!=null){if(typeof s!=="function")throw Error(`Event handler for "${n}" is not a function`);t.addEventListener(u[0],s,u[1])}}}else if(n==="dangerouslySetInnerHTML"&&s)t.innerHTML=s.__html;else if(n==="ref"){let o;if(typeof s==="function")o=s(t)||(()=>s(null));else if(s&&"current"in s)s.current=t,o=()=>s.current=null;Zi.set(t,o)}else if(n==="style"){let o=t.style;if(typeof s==="string")o.cssText=s;else if(o.cssText="",s!=null)Jt(s,o.setProperty.bind(o))}else{if(n==="value"){let c=t.nodeName;if(c==="INPUT"||c==="TEXTAREA"||c==="SELECT"){if(t.value=s===null||s===void 0||s===!1?null:s,c==="TEXTAREA"){t.textContent=s;continue}else if(c==="SELECT"){if(t.selectedIndex===-1)t.selectedIndex=0;continue}}}else if(n==="checked"&&t.nodeName==="INPUT"||n==="selected"&&t.nodeName==="OPTION")t[n]=s;let o=vr(t,n);if(s===null||s===void 0||s===!1)t.removeAttribute(o);else if(s===!0)t.setAttribute(o,"");else if(typeof s==="string"||typeof s==="number")t.setAttribute(o,s);else t.setAttribute(o,s.toString())}}}if(r)for(let n in r){let s=r[n];if(n!=="children"&&!(n in i)){n=mt(n);let u=cr(n);if(u)t.removeEventListener(u[0],s,u[1]);else if(n==="ref")Zi.get(t)?.();else t.removeAttribute(vr(t,n))}}},Yn=(t,i)=>{i[O][0]=0,at.push([t,i]);let r=i.tag[ft]||i.tag,n=r.defaultProps?{...r.defaultProps,...i.props}:i.props;try{return[r.call(null,n)]}finally{at.pop()}},gr=(t,i,r,n,s)=>{if(t.vR?.length)n.push(...t.vR),delete t.vR;if(typeof t.tag==="function")t[O][1][Rt]?.forEach((u)=>s.push(u));t.vC.forEach((u)=>{if(tt(u))r.push(u);else if(typeof u.tag==="function"||u.tag===""){u.c=i;let o=r.length;if(gr(u,i,r,n,s),u.s){for(let c=o;c<r.length;c++)r[c].s=!0;u.s=!1}}else if(r.push(u),u.vR?.length)n.push(...u.vR),delete u.vR})},Ln=(t)=>{for(;;t=t.tag===Gt||!t.vC||!t.pP?t.nN:t.vC[0]){if(!t)return null;if(t.tag!==Gt&&t.e)return t.e}},mr=(t)=>{if(!tt(t)){if(t[O]?.[1][Rt]?.forEach((i)=>i[2]?.()),Zi.get(t.e)?.(),t.p===2)t.vC?.forEach((i)=>i.p=2);t.vC?.forEach(mr)}if(!t.p)t.e?.remove(),delete t.e;if(typeof t.tag==="function")kt.delete(t),Kt.delete(t),delete t[O][3],t.a=!0},bi=(t,i,r)=>{t.c=i,hr(t,i,r)},lr=(t,i)=>{if(!i)return;for(let r=0,n=t.length;r<n;r++)if(t[r]===i)return r;return},fr=Symbol(),hr=(t,i,r)=>{let n=[],s=[],u=[];gr(t,i,n,s,u),s.forEach(mr);let o=r?void 0:i.childNodes,c,f=null;if(r)c=-1;else if(!o.length)c=0;else{let v=lr(o,Ln(t.nN));if(v!==void 0)f=o[v],c=v;else c=lr(o,n.find((F)=>F.tag!==Gt&&F.e)?.e)??-1;if(c===-1)r=!0}for(let v=0,F=n.length;v<F;v++,c++){let l=n[v],y;if(l.s&&l.e)y=l.e,l.s=!1;else{let g=r||!l.e;if(tt(l)){if(l.e&&l.d)l.e.textContent=l.t;l.d=!1,y=l.e||=document.createTextNode(l.t)}else y=l.e||=l.n?document.createElementNS(l.n,l.tag):document.createElement(l.tag),_n(y,l.props,l.pP),hr(l,y,g)}if(l.tag===Gt)c--;else if(r){if(!y.parentNode)i.appendChild(y)}else if(o[c]!==y&&o[c-1]!==y)if(o[c+1]===y)i.appendChild(o[c]);else i.insertBefore(y,f||o[c]||null)}if(t.pP)delete t.pP;if(u.length){let v=[],F=[];if(u.forEach(([,l,,y,g])=>{if(l)v.push(l);if(y)F.push(y);g?.()}),v.forEach((l)=>l()),F.length)requestAnimationFrame(()=>{F.forEach((l)=>l())})}},zn=(t,i)=>!!(t&&t.length===i.length&&t.every((r,n)=>r[1]===i[n][1])),Kt=new WeakMap,St=(t,i,r)=>{let n=!r&&i.pC;if(r)i.pC||=i.vC;let s;try{if(r||=typeof i.tag=="function"?Yn(t,i):ct(i.props.children),r[0]?.tag===""&&r[0][Ft])s=r[0][Ft],t[5].push([t,s,i]);let u=n?[...i.pC]:i.vC?[...i.vC]:void 0,o=[],c;for(let f=0;f<r.length;f++){if(Array.isArray(r[f]))r.splice(f,1,...r[f].flat());let v=wr(r[f]);if(v){if(typeof v.tag==="function"&&!v.tag[Qt]){if(x.length>0)v[O][2]=x.map((l)=>[l,l.values.at(-1)]);if(t[5]?.length)v[O][3]=t[5].at(-1)}let F;if(u&&u.length){let l=u.findIndex(tt(v)?(y)=>tt(y):v.key!==void 0?(y)=>y.key===v.key&&y.tag===v.tag:(y)=>y.tag===v.tag);if(l!==-1)F=u[l],u.splice(l,1)}if(F)if(tt(v)){if(F.t!==v.t)F.t=v.t,F.d=!0;v=F}else{let l=F.pP=F.props;if(F.props=v.props,F.f||=v.f||i.f,typeof v.tag==="function"){let y=F[O][2];if(F[O][2]=v[O][2]||[],F[O][3]=v[O][3],!F.f&&((F.o||F)===v.o||F.tag[Ut]?.(l,F.props))&&zn(y,F[O][2]))F.s=!0}v=F}else if(!tt(v)&&ht){let l=N(ht);if(l)v.n=l}if(!tt(v)&&!v.s)St(t,v),delete v.f;if(o.push(v),c&&!c.s&&!v.s)for(let l=c;l&&!tt(l);l=l.vC?.at(-1))l.nN=v;c=v}}if(i.vR=n?[...i.vC,...u||[]]:u||[],i.vC=o,n)delete i.pC}catch(u){if(i.f=!0,u===fr)if(s)return;else throw u;let[o,c,f]=i[O]?.[3]||[];if(c){let v=()=>Wt([0,!1,t[2]],f),F=Kt.get(f)||[];F.push(v),Kt.set(f,F);let l=c(u,()=>{let y=Kt.get(f);if(y){let g=y.indexOf(v);if(g!==-1)return y.splice(g,1),v()}});if(l){if(t[0]===1)t[1]=!0;else if(St(t,f,[l]),(c.length===1||t!==o)&&f.c){bi(f,f.c,!1);return}throw fr}}throw u}finally{if(s)t[5].pop()}},wr=(t)=>{if(t===void 0||t===null||typeof t==="boolean")return;else if(typeof t==="string"||typeof t==="number")return{t:t.toString(),d:!0};else{if("vR"in t)t={tag:t.tag,props:t.props,key:t.key,f:t.f,type:t.tag,ref:t.props.ref,o:t.o||t};if(typeof t.tag==="function")t[O]=[0,[]];else{let i=Bn[t.tag];if(i)ht||=Ht(""),t.props.children=[{tag:ht,props:{value:t.n=`http://www.w3.org/${i}`,children:t.props.children}}]}return t}},Pr=(t,i,r)=>{if(t.c===i)t.c=r,t.vC.forEach((n)=>Pr(n,i,r))},Fr=(t,i)=>{i[O][2]?.forEach(([r,n])=>{r.values.push(n)});try{St(t,i,void 0)}catch{return}if(i.a){delete i.a;return}if(i[O][2]?.forEach(([r])=>{r.values.pop()}),t[0]!==1||!t[1])bi(i,i.c,!1)},kt=new WeakMap,$r=[],Wt=async(t,i)=>{t[5]||=[];let r=kt.get(i);if(r)r[0](void 0);let n,s=new Promise((u)=>n=u);if(kt.set(i,[n,()=>{if(t[2])t[2](t,i,(u)=>{Fr(u,i)}).then(()=>n(i));else Fr(t,i),n(i)}]),$r.length)$r.at(-1).add(i);else{await Promise.resolve();let u=kt.get(i);if(u)kt.delete(i),u[1]()}return s},kn=(t,i)=>{let r=[];r[5]=[],r[4]=!0,St(r,t,void 0),r[4]=!1;let n=document.createDocumentFragment();bi(t,n,!0),Pr(t,n,i),i.replaceChildren(n)},Oi=(t,i)=>{kn(wr({tag:"",props:{children:t}}),i)};var Ii=(t,i,r)=>({tag:Gt,props:{children:t},key:r,e:i,p:1});var Gn=0,Rt=1,Wn=2,Zn=3,bn=4,Ci=new WeakMap,Qi=(t,i)=>!t||!i||t.length!==i.length||i.some((r,n)=>r!==t[n]);var On=void 0;var Mr=[];var _=(t)=>{let i=()=>typeof t==="function"?t():t,r=at.at(-1);if(!r)return[i(),()=>{}];let[,n]=r,s=n[O][1][Gn]||=[],u=n[O][0]++;return s[u]||=[i(),(o)=>{let c=On,f=s[u];if(typeof o==="function")o=o(f[0]);if(!Object.is(o,f[0]))if(f[0]=o,Mr.length){let[v,F]=Mr.at(-1);Promise.all([v===3?n:Wt([v,!1,c],n),F]).then(([l])=>{if(!l||!(v===2||v===3))return;let y=l.vC;requestAnimationFrame(()=>{setTimeout(()=>{if(y!==l.vC)return;Wt([v===3?1:0,!1,c],l)})})})}else Wt([0,!1,c],n)}]};var In=(t,i,r)=>{let n=at.at(-1);if(!n)return;let[,s]=n,u=s[O][1][Rt]||=[],o=s[O][0]++,[c,,f]=u[o]||=[];if(Qi(c,r)){if(f)f();let v=()=>{F[t]=void 0,F[2]=i()},F=[r,void 0,void 0,void 0,void 0];F[t]=v,u[o]=F}},W=(t,i)=>In(3,t,i);var P=(t,i)=>{let r=at.at(-1);if(!r)return t;let[,n]=r,s=n[O][1][Wn]||=[],u=n[O][0]++,o=s[u];if(Qi(o?.[1],i))s[u]=[t,i];else t=s[u][0];return t},U=(t)=>{let i=at.at(-1);if(!i)return{current:t};let[,r]=i,n=r[O][1][bn]||=[],s=r[O][0]++;return n[s]||={current:t}},Ui=(t)=>{let i=Ci.get(t);if(i){if(i.length===2)throw i[1];return i[0]}throw t.then((r)=>Ci.set(t,[r]),(r)=>Ci.set(t,[void 0,r])),t},qi=(t,i)=>{let r=at.at(-1);if(!r)return t();let[,n]=r,s=n[O][1][Zn]||=[],u=n[O][0]++,o=s[u];if(Qi(o?.[1],i))s[u]=[t(),i];return s[u][0]};var Ar=Ht({pending:!1,data:null,method:null,action:null}),Tr=new Set,Hr=(t)=>{Tr.add(t),t.finally(()=>Tr.delete(t))};var Ji=(t,i)=>{return qi(()=>(r)=>{let n;if(t){if(typeof t==="function")n=t(r)||(()=>{t(null)});else if(t&&"current"in t)t.current=r,n=()=>{t.current=null}}let s=i(r);return()=>{s?.(),n?.()}},[t])},Br=Object.create(null),_r=Object.create(null),Zt=(t,i,r,n,s)=>{if(i?.itemProp)return{tag:t,props:i,type:t,ref:i.ref};let u=document.head,{onLoad:o,onError:c,precedence:f,blocking:v,...F}=i,l=null,y=!1,g=yt[t],T=void 0;if(g.length>0){let B=u.querySelectorAll(t);t:for(let A of B)for(let h of yt[t])if(A.getAttribute(h)===i[h]){l=A;break t}if(!l){let A=g.reduce((h,H)=>i[H]===void 0?h:`${h}-${H}-${i[H]}`,t);y=!_r[A],l=_r[A]||=(()=>{let h=document.createElement(t);for(let H of g){if(i[H]!==void 0)h.setAttribute(H,i[H]);if(i.rel)h.setAttribute("rel",i.rel)}return h})()}}else T=u.querySelectorAll(t);if(f=n?f??"":void 0,n)F[gt]=f;let L=P((B)=>{if(g.length>0){let A=!1;for(let h of u.querySelectorAll(t)){if(A&&h.getAttribute(gt)!==f){u.insertBefore(B,h);return}if(h.getAttribute(gt)===f)A=!0}u.appendChild(B)}else if(T){let A=!1;for(let h of T)if(h===B){A=!0;break}if(!A)u.insertBefore(B,u.contains(T[0])?T[0]:u.querySelector(t));T=void 0}},[f]),C=Ji(i.ref,(B)=>{let A=g[0];if(r===2)B.innerHTML="";if(y||T)L(B);if(!c&&!o)return;let h=Br[B.getAttribute(A)]||=new Promise((H,Q)=>{B.addEventListener("load",H),B.addEventListener("error",Q)});if(o)h=h.then(o);if(c)h=h.catch(c);h.catch(()=>{})});if(s&&v==="render"){let B=yt[t][0];if(i[B]){let A=i[B],h=Br[A]||=new Promise((H,Q)=>{L(l),l.addEventListener("load",H),l.addEventListener("error",Q)});Ui(h)}}let I={tag:t,type:t,props:{...F,ref:C},ref:C};if(I.p=r,l)I.e=l;return Ii(I,u)},Cn=(t)=>{let i=yr();if((i&&N(i))?.endsWith("svg"))return{tag:"title",props:t,type:"title",ref:t.ref};return Zt("title",t,void 0,!1,!1)},Qn=(t)=>{if(!t||["src","async"].some((i)=>!t[i]))return{tag:"script",props:t,type:"script",ref:t.ref};return Zt("script",t,1,!1,!0)},Un=(t)=>{if(!t||!["href","precedence"].every((i)=>(i in t)))return{tag:"style",props:t,type:"style",ref:t.ref};return t["data-href"]=t.href,delete t.href,Zt("style",t,2,!0,!0)},qn=(t)=>{if(!t||["onLoad","onError"].some((i)=>(i in t))||t.rel==="stylesheet"&&(!("precedence"in t)||("disabled"in t)))return{tag:"link",props:t,type:"link",ref:t.ref};return Zt("link",t,1,"precedence"in t,!0)},Jn=(t)=>{return Zt("meta",t,void 0,!1,!1)},Yr=Symbol(),Xn=(t)=>{let{action:i,...r}=t;if(typeof i!=="function")r.action=i;let[n,s]=_([null,!1]),u=P(async(v)=>{let F=v.isTrusted?i:v.detail[Yr];if(typeof F!=="function")return;v.preventDefault();let l=new FormData(v.target);s([l,!0]);let y=F(l);if(y instanceof Promise)Hr(y),await y;s([null,!0])},[]),o=Ji(t.ref,(v)=>{return v.addEventListener("submit",u),()=>{v.removeEventListener("submit",u)}}),[c,f]=n;return n[1]=!1,{tag:Ar,props:{value:{pending:c!==null,data:c,method:c?"post":null,action:c?i:null},children:{tag:"form",props:{...r,ref:o},type:"form",ref:o}},f}},Lr=(t,{formAction:i,...r})=>{if(typeof i==="function"){let n=P((s)=>{s.preventDefault(),s.currentTarget.form.dispatchEvent(new CustomEvent("submit",{detail:{[Yr]:i}}))},[]);r.ref=Ji(r.ref,(s)=>{return s.addEventListener("click",n),()=>{s.removeEventListener("click",n)}})}return{tag:t,props:r,type:t,ref:r.ref}},Kn=(t)=>Lr("input",t),Sn=(t)=>Lr("button",t);Object.assign(Bt,{title:Cn,script:Qn,style:Un,link:qn,meta:Jn,form:Xn,input:Kn,button:Sn});var wt="#222244,#2D2B55,#B362FF,#FFFFFF,#2D2B55,#A599E9,#3AD900,#FAD000,#3B3768,#7E74A8",Xi=[{name:"meet-ai Default",schema:"#194234,#9c2e33,#E7C12e,#194234,#9c2e33,#FFFFFF,#ee6030,#9C2E33,#9c2e33,#FFFFFF"},{name:"One Dark Pro",schema:"#282C34,#2C313A,#528BFF,#FFFFFF,#2C313A,#ABB2BF,#98C379,#E06C75,#3E4451,#5C6370"},{name:"Dracula",schema:"#282A36,#343746,#BD93F9,#FFFFFF,#343746,#F8F8F2,#50FA7B,#FF79C6,#44475A,#6272A4"},{name:"GitHub Dark",schema:"#0D1117,#161B22,#1F6FEB,#FFFFFF,#161B22,#C9D1D9,#3FB950,#F85149,#21262D,#8B949E"},{name:"Nord",schema:"#2E3440,#3B4252,#88C0D0,#ECEFF4,#3B4252,#D8DEE9,#A3BE8C,#BF616A,#434C5E,#4C566A"},{name:"Monokai",schema:"#272822,#3E3D32,#F92672,#FFFFFF,#3E3D32,#F8F8F2,#A6E22E,#F92672,#49483E,#75715E"},{name:"Solarized Dark",schema:"#002B36,#073642,#2AA198,#FFFFFF,#073642,#839496,#859900,#DC322F,#073642,#586E75"},{name:"Tokyo Night",schema:"#1A1B26,#24283B,#7AA2F7,#FFFFFF,#24283B,#A9B1D6,#73DACA,#F7768E,#2F3549,#565F89"},{name:"Catppuccin Mocha",schema:"#1E1E2E,#313244,#89B4FA,#FFFFFF,#313244,#CDD6F4,#A6E3A1,#F38BA8,#45475A,#6C7086"},{name:"Gruvbox Dark",schema:"#282828,#3C3836,#FABD2F,#282828,#3C3836,#EBDBB2,#B8BB26,#FB4934,#504945,#928374"},{name:"Ayu Dark",schema:"#0B0E14,#131721,#E6B450,#0B0E14,#131721,#BFBDB6,#AAD94C,#F07178,#11151C,#565B66"},{name:"Ayu Mirage",schema:"#1F2430,#272D38,#FFCC66,#1F2430,#272D38,#CCCAC2,#D5FF80,#F28779,#171B24,#5C6166"},{name:"Ayu Light",schema:"#FAFAFA,#F0F0F0,#FF9940,#FFFFFF,#F0F0F0,#575F66,#86B300,#F07171,#E8E8E8,#ABB0B6"},{name:"Night Owl",schema:"#011627,#0B2942,#7E57C2,#FFFFFF,#0B2942,#D6DEEB,#ADDB67,#EF5350,#122D42,#5F7E97"},{name:"One Light",schema:"#FAFAFA,#EAEAEB,#4078F2,#FFFFFF,#EAEAEB,#383A42,#50A14F,#E45649,#D4D4D4,#A0A1A7"},{name:"Shades of Purple",schema:"#222244,#2D2B55,#B362FF,#FFFFFF,#2D2B55,#A599E9,#3AD900,#FAD000,#3B3768,#7E74A8"}],Ki=["Column BG","Menu Hover","Active Item","Active Text","Hover Item","Text Color","Presence","Badge","Divider","Alt Text"],E={apiKey:"meet-ai-key",handle:"meet-ai-handle",colorSchema:"meet-ai-color-schema"};function Si(){return localStorage.getItem(E.apiKey)}function Gr(t){localStorage.setItem(E.apiKey,t)}function pn(){localStorage.removeItem(E.apiKey)}function Pt(){let t=Si(),i={"Content-Type":"application/json"};if(t)i.Authorization="Bearer "+t;return i}async function Wr(){let t=await fetch("/api/rooms",{headers:Pt()});if(t.status===401)return pn(),location.href="/key",[];return t.json()}async function Zr(t){let i=await fetch(`/api/rooms/${t}/messages`,{headers:Pt()});if(!i.ok)return[];return i.json()}async function br(t,i){let r=await fetch(`/api/rooms/${t}/messages?since_seq=${i}`,{headers:Pt()});if(!r.ok)return[];return r.json()}async function Or(t){let i=await fetch(`/api/rooms/${t}/logs`,{headers:Pt()});if(!i.ok)return[];return(await i.json()).map((n)=>({...n,type:"log"}))}async function bt(t,i,r){let n=await fetch(`/api/rooms/${t}/messages`,{method:"POST",headers:Pt(),body:JSON.stringify({sender:i,content:r})});if(!n.ok)throw Error("HTTP "+n.status)}async function pt(t){let i=await fetch("/api/auth/claim/"+encodeURIComponent(t));if(!i.ok)throw Error("Link expired or invalid");return i.json()}async function Ir(){let t=await fetch("/api/auth/share",{method:"POST",headers:Pt()});if(!t.ok)throw Error("Failed to create share link");return t.json()}function a(t,i,r){let n;if(!i||!("children"in i))n=Xt(t,i,[]);else{let s=i.children;n=Array.isArray(s)?Xt(t,i,s):Xt(t,i,[s])}return n.key=r,n}function Nt({onLogin:t}){let[i,r]=_(""),[n,s]=_(!1),u=U(null);W(()=>{u.current?.focus()},[]);let o=P(async()=>{let f=u.current?.value.trim();if(!f)return;r(""),s(!0);try{if(f.startsWith("http")&&f.includes("/auth/")){let v=f.split("/auth/").pop()?.split("?")[0]?.split("#")[0];if(!v){r("Invalid link"),s(!1);return}let F=await pt(v);t(F.api_key)}else if(f.startsWith("mai_"))t(f);else r("Invalid link or key"),s(!1)}catch(v){r(v.message||"Connection error. Try again."),s(!1)}},[t]),c=P((f)=>{if(f.key==="Enter")f.preventDefault(),o()},[o]);return a("div",{class:"main",style:"height:100dvh",children:a("div",{class:"login-prompt",children:[a("h2",{children:"Welcome to meet-ai"},void 0,!1,void 0,this),a("p",{children:"Paste a login link from another device or enter your API key to continue."},void 0,!1,void 0,this),a("div",{class:"login-prompt-form",children:[a("input",{ref:u,type:"text",placeholder:"Paste login link or API key",autocomplete:"off",spellcheck:!1,onKeyDown:c},void 0,!1,void 0,this),a("button",{onClick:o,disabled:n,children:n?"...":"Go"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"login-error",children:i},void 0,!1,void 0,this),a("div",{class:"login-or",children:["or ",a("a",{href:"/",children:"get an API key"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function Dt({token:t,onLogin:i}){let[r,n]=_(""),[s,u]=_(!1),o=window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches,c=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,f=/Android/.test(navigator.userAgent),v=P(async()=>{u(!0),n("");try{let y=await pt(t);i(y.api_key)}catch(y){n(y.message||"Connection error. Try again."),u(!1)}},[t,i]),F=s?"Connecting...":o?"Connect":"Connect in browser",l=null;if(!o)if(c)l=a("div",{class:"install-steps",children:[a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"1"},void 0,!1,void 0,this),a("div",{class:"step-text",children:["Tap the ",a("strong",{children:"Share"},void 0,!1,void 0,this)," button at the bottom of Safari"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"2"},void 0,!1,void 0,this),a("div",{class:"step-text",children:["Scroll down and tap ",a("strong",{children:"Add to Home Screen"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"3"},void 0,!1,void 0,this),a("div",{class:"step-text",children:["Tap ",a("strong",{children:"Add"},void 0,!1,void 0,this)," in the top right corner"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"4"},void 0,!1,void 0,this),a("div",{class:"step-text",children:["Open the app from your Home Screen and tap ",a("strong",{children:"Connect"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);else if(f)l=a("div",{class:"install-steps",children:[a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"1"},void 0,!1,void 0,this),a("div",{class:"step-text",children:["Tap the ",a("strong",{children:"menu"},void 0,!1,void 0,this)," button ⋮ in Chrome"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"2"},void 0,!1,void 0,this),a("div",{class:"step-text",children:["Tap ",a("strong",{children:"Install app"},void 0,!1,void 0,this)," or ",a("strong",{children:"Add to Home screen"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"3"},void 0,!1,void 0,this),a("div",{class:"step-text",children:["Open the app from your Home Screen and tap ",a("strong",{children:"Connect"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);else l=a("div",{class:"install-steps",children:[a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"1"},void 0,!1,void 0,this),a("div",{class:"step-text",children:"Install the app using your browser's install option"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"2"},void 0,!1,void 0,this),a("div",{class:"step-text",children:["Open the app and tap ",a("strong",{children:"Connect"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);return a("div",{class:"main",style:"height:100dvh",children:a("div",{class:"token-screen",children:[a("h2",{children:o?"Connect to chat":"Install meet-ai"},void 0,!1,void 0,this),a("p",{children:o?"Tap the button below to activate your session.":"Add meet-ai to your Home Screen for the best experience."},void 0,!1,void 0,this),o?a("div",{class:"token-card",children:[a("button",{type:"button",class:"connect-btn",onClick:v,disabled:s,children:F},void 0,!1,void 0,this),a("div",{class:"connect-error",children:r},void 0,!1,void 0,this)]},void 0,!0,void 0,this):a(j,{children:[l&&a("div",{class:"token-card",children:l},void 0,!1,void 0,this),a("div",{class:"separator"},void 0,!1,void 0,this),a("p",{class:"alt-text",children:"Or connect directly in this browser:"},void 0,!1,void 0,this),a("div",{class:"token-card",children:[a("button",{type:"button",class:"connect-btn",onClick:v,disabled:s,children:F},void 0,!1,void 0,this),a("div",{class:"connect-error",children:r},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function dt({onSettingsClick:t,onCloseClick:i}){return a("div",{class:"sidebar-header",children:[a("span",{children:"meet-ai"},void 0,!1,void 0,this),a("div",{class:"sidebar-header-actions",children:[a("button",{title:"Color Settings",onClick:t,children:a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"},void 0,!1,void 0,this),a("circle",{cx:"12",cy:"12",r:"3"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),a("button",{class:"sidebar-close-btn",title:"Close sidebar",onClick:i,children:a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("path",{d:"M18 6L6 18"},void 0,!1,void 0,this),a("path",{d:"M6 6l12 12"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function Et({rooms:t,currentRoomId:i,onSelectRoom:r}){return a(j,{children:[a("div",{class:"sidebar-section-label",children:"Channels"},void 0,!1,void 0,this),a("div",{class:"room-list",children:t.map((n)=>a("div",{class:`room-item${n.id===i?" active":""}`,onClick:()=>r(n),children:[a("span",{class:"room-hash",children:"#"},void 0,!1,void 0,this)," ",n.name]},n.id,!0,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function et({onIOSInstall:t}){let[i,r]=_(null),[n,s]=_(!1),[u,o]=_(!1);W(()=>{if(window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches)return;if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){s(!0),o(!0);return}let F=(y)=>{y.preventDefault(),r(y),o(!0)};window.addEventListener("beforeinstallprompt",F);let l=()=>{o(!1),r(null)};return window.addEventListener("appinstalled",l),()=>{window.removeEventListener("beforeinstallprompt",F),window.removeEventListener("appinstalled",l)}},[]);let c=P(async()=>{if(n){t();return}if(i){await i.prompt();let{outcome:f}=await i.userChoice;if(f==="accepted")o(!1);r(null)}},[n,i,t]);if(!u)return null;return a("button",{class:"install-btn",title:"Install app",onClick:c,children:[a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},void 0,!1,void 0,this),a("polyline",{points:"7 10 12 15 17 10"},void 0,!1,void 0,this),a("line",{x1:"12",y1:"15",x2:"12",y2:"3"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"Install"]},void 0,!0,void 0,this)}function Vt({userName:t,onNameChange:i,onInstallClick:r}){let[n,s]=_(!1),[u,o]=_(t),c=P(()=>{o(t),s(!0)},[t]),f=P(()=>{let F=u.trim();if(F)i(F);s(!1)},[u,i]),v=P((F)=>{if(F.key==="Enter")F.preventDefault(),f();if(F.key==="Escape")o(t),s(!1)},[f,t]);return a("div",{class:"sidebar-footer",children:[a("span",{class:"user-presence",style:"width:8px;height:8px;border-radius:50%;background:var(--c-presence);flex-shrink:0;"},void 0,!1,void 0,this),n?a("input",{type:"text",value:u,maxLength:30,style:"background:var(--c-hover-item);color:inherit;border:1px solid var(--c-sidebar-border);border-radius:4px;padding:2px 6px;font-size:16px;width:130px;outline:none;font-weight:600;",onInput:(F)=>o(F.target.value),onKeyDown:v,onBlur:f,ref:(F)=>F?.focus()},void 0,!1,void 0,this):a("span",{class:"user-handle",title:"Click to change your name",onClick:c,children:t},void 0,!1,void 0,this),a("div",{class:"sidebar-footer-actions",children:[a(et,{onIOSInstall:r},void 0,!1,void 0,this),a("button",{title:"API Key settings",onClick:()=>{location.href="/key"},children:a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:a("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function xt({rooms:t,currentRoomId:i,userName:r,isOpen:n,onSelectRoom:s,onNameChange:u,onSettingsClick:o,onClose:c,onInstallClick:f}){return a("aside",{class:`sidebar${n?" open":""}`,children:[a(dt,{onSettingsClick:o,onCloseClick:c},void 0,!1,void 0,this),a(Et,{rooms:t,currentRoomId:i,onSelectRoom:s},void 0,!1,void 0,this),a(Vt,{userName:r,onNameChange:u,onInstallClick:f},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function jt({onClick:t}){return a("div",{class:"sidebar-backdrop",onClick:t,style:"display:block"},void 0,!1,void 0,this)}function ti({roomName:t,showInvite:i,showTeamToggle:r,onMobileToggle:n,onTeamToggle:s,onInviteClick:u}){return a("div",{class:"main-header",children:[a("div",{class:"main-header-left",children:[a("button",{class:"mobile-toggle",onClick:n,children:"☰"},void 0,!1,void 0,this),a("span",{class:"channel-hash",children:"#"},void 0,!1,void 0,this),a("span",{class:"channel-name",children:t},void 0,!1,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"main-header-right",children:[i&&a("button",{class:"invite-btn",title:"Open on phone",onClick:u,children:a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},void 0,!1,void 0,this),a("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),r&&a("button",{class:"team-toggle",title:"Team members",onClick:s,children:a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},void 0,!1,void 0,this),a("circle",{cx:"9",cy:"7",r:"4"},void 0,!1,void 0,this),a("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"},void 0,!1,void 0,this),a("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function ii({message:t="Select or create a channel to start chatting",showBackLink:i}){return a("div",{class:"empty-state",children:[a("div",{class:"icon",children:"#"},void 0,!1,void 0,this),a("div",{children:t},void 0,!1,void 0,this),i&&a("div",{style:"font-size:13px;margin-top:4px",children:a("a",{href:"/chat",style:"color:var(--c-primary)",children:"Back to channels"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Ri(t){let i=t.split(",").map((r)=>r.trim());while(i.length<10)i.push("#888888");return i}function ri(t){if(t=t.replace("#",""),t.length===3)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];let i=parseInt(t,16);return[i>>16&255,i>>8&255,i&255]}function st(t){let[i,r,n]=ri(t).map((s)=>{return s=s/255,s<=0.04045?s/12.92:Math.pow((s+0.055)/1.055,2.4)});return 0.2126*i+0.7152*r+0.0722*n}function d(t,i){let r=st(t),n=st(i),s=Math.max(r,n),u=Math.min(r,n);return(s+0.05)/(u+0.05)}function Cr(t,i,r){if(d(t,i)>=r)return t;let n=d("#FFFFFF",i),s=d("#000000",i);return n>=s?"#FFFFFF":"#000000"}function Nn(t){if(st(t)>=0.5)return"#FFFFFF";let[r,n,s]=ri(t);return"#"+[r,n,s].map((u)=>Math.max(0,Math.round(u*0.78+2)).toString(16).padStart(2,"0")).join("")}function Dn(t,i){if(st(t)>=0.5)return"#1D1C1D";return i||"#ABB2BF"}function dn(t,i){if(st(t)>=0.5)return"#E0E0E0";return i||"#3e4451"}function it(t){let i=Ri(t),r=document.documentElement,n=st(i[0])<0.5,s=Cr(i[5],i[0],3),u=Cr(i[3],i[2],3);r.style.setProperty("--c-sidebar-bg",i[0]),r.style.setProperty("--c-sidebar-text",s),r.style.setProperty("--c-active-item",i[2]),r.style.setProperty("--c-active-item-text",u),r.style.setProperty("--c-hover-item",i[4]||i[1]),r.style.setProperty("--c-presence",i[6]),r.style.setProperty("--c-primary",i[6]),r.style.setProperty("--c-sidebar-border",i[8]||(n?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"));let o=Nn(i[0]),c=Dn(o,s),f=dn(i[0],i[8]);r.style.setProperty("--c-header-bg",o),r.style.setProperty("--c-header-text",c),r.style.setProperty("--c-chat-bg",o),r.style.setProperty("--c-msg-text",c),r.style.setProperty("--c-border",f),document.body.style.background=o,r.style.setProperty("--c-input-bg",n?i[0]:o);let v=d("#FFFFFF",i[6]),F=d("#000000",i[6]);r.style.setProperty("--c-primary-text",v>=F?"#FFFFFF":"#000000")}function ni(t){let i=0;for(let n=0;n<t.length;n++)i=t.charCodeAt(n)+((i<<5)-i);return`hsl(${(i%360+360)%360}, 60%, 45%)`}function Qr(t){let i=0;for(let n=0;n<t.length;n++)i=t.charCodeAt(n)+((i<<5)-i);return`hsl(${(i%360+360)%360}, 50%, 35%)`}var pi=(()=>{let t=document.createElement("div");return t.style.display="none",document.body.appendChild(t),t})();function Ni(t){pi.style.color="",pi.style.color=t;let r=getComputedStyle(pi).color.match(/(\d+)/g);if(!r||r.length<3)return t;return"#"+r.slice(0,3).map((n)=>parseInt(n).toString(16).padStart(2,"0")).join("")}function vt(t){let i=Ni(t),r=getComputedStyle(document.documentElement).getPropertyValue("--c-chat-bg").trim()||"#FFFFFF";if(d(i,r)>=3)return t;let n=st(r),[s,u,o]=ri(i);if(n<0.5){for(let c=1.5;c<=3;c+=0.3){let f="#"+[s,u,o].map((v)=>Math.min(255,Math.round(v*c)).toString(16).padStart(2,"0")).join("");if(d(f,r)>=3)return f}return"#CCCCCC"}else{for(let c=0.5;c>=0.2;c-=0.1){let f="#"+[s,u,o].map((v)=>Math.round(v*c).toString(16).padStart(2,"0")).join("");if(d(f,r)>=3)return f}return"#555555"}}var Ot=tr(Ur(),1),Jr=tr(qr(),1);Ot.default.extend(Jr.default);function Vi(t){return Ot.default.utc(t)}function Xr(t){if(!t)return"";let i=Ot.default.utc(t).local();return i.isValid()?i.format("HH:mm"):""}function ai(t){if(!t)return"";let i=Ot.default.utc(t).local();return i.isValid()?i.format("HH:mm:ss"):""}function Kr(t){return DOMPurify.sanitize(marked.parse(t,{breaks:!0}))}function Sr(t){if(window.highlightAllCode)window.highlightAllCode(t)}function En(t){let i=document.createElement("div");return i.textContent=t,i.innerHTML}function si({sender:t,content:i,color:r,timestamp:n,tempId:s,status:u="sent",onRetry:o}){let c=U(null),f=r?vt(r):ni(t),v=r?vt(r):Qr(t),F=t.slice(0,2).toUpperCase(),l=Ni(v),y=d("#FFFFFF",l)>=d("#000000",l)?"#FFFFFF":"#000000",g=u==="pending"?" msg-pending":u==="failed"?" msg-failed":"",T=u==="pending"?"sending":u==="failed"?"failed":Xr(n);return W(()=>{if(c.current)c.current.innerHTML=Kr(i),Sr(c.current)},[i]),a("div",{class:`msg${g}`,"data-temp-id":s,"data-content":s?i:void 0,children:[a("div",{class:"msg-avatar",style:`background:${v};color:${y}`,children:En(F)},void 0,!1,void 0,this),a("div",{class:"msg-body",children:[a("div",{class:"msg-header",children:[a("span",{class:"msg-sender",style:`color:${f}`,children:t},void 0,!1,void 0,this),a("span",{class:"msg-time",children:T},void 0,!1,void 0,this),u==="failed"&&o&&a("span",{class:"msg-retry",onClick:o,style:"display:inline",children:"retry"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"msg-content",ref:c},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function en(t){let i=[...new Set(t.map((n)=>n.sender))],r=t.length;if(i.length===1)return`${r} log ${r===1?"entry":"entries"} from ${i[0]}`;return`${r} log entries from ${i.length} agents`}function ui({logs:t}){let[i,r]=_(!1);if(t.length===0)return null;let n=ai(t[0].created_at),s=t.length>1?ai(t[t.length-1].created_at):null,u=s&&s!==n?`${n} - ${s}`:n;return a("div",{class:"log-group",children:[a("div",{class:"log-group-header",onClick:()=>r(!i),children:[a("span",{class:"log-group-toggle",children:i?"▾":"▸"},void 0,!1,void 0,this),a("span",{class:"log-group-summary",children:en(t)},void 0,!1,void 0,this),a("span",{class:"log-group-time",children:u},void 0,!1,void 0,this)]},void 0,!0,void 0,this),i&&a("div",{class:"log-group-entries",children:t.map((o,c)=>{let f=o.color?vt(o.color):ni(o.sender);return a("div",{class:"log-entry",children:[a("span",{class:"log-entry-time",children:ai(o.created_at)},void 0,!1,void 0,this),a("span",{class:"log-entry-sender",style:`color:${f}`,children:[o.sender,":"]},void 0,!0,void 0,this),a("span",{class:"log-entry-content",children:o.content},void 0,!1,void 0,this)]},`${o.sender}-${o.created_at}-${c}`,!0,void 0,this)})},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function oi({count:t,onClick:i}){if(t===0)return null;return a("div",{class:"new-messages-pill",onClick:i,children:[t," new message",t===1?"":"s"," ↓"]},void 0,!0,void 0,this)}function Rr(t){let i=U(!0),[r,n]=_(!0),s=U(0);W(()=>{let c=t.current;if(!c)return;let f=()=>{let v=c.scrollHeight-c.scrollTop-c.clientHeight<150;i.current=v,n(v)};return c.addEventListener("scroll",f,{passive:!0}),()=>c.removeEventListener("scroll",f)},[t]);let u=P(()=>i.current??!0,[]),o=P(()=>{cancelAnimationFrame(s.current),s.current=requestAnimationFrame(()=>{let c=t.current;if(!c)return;c.scrollTop=c.scrollHeight,i.current=!0,n(!0)})},[t]);return W(()=>()=>cancelAnimationFrame(s.current),[]),{isAtBottom:u,atBottom:r,scrollToBottom:o}}function Vn(t){let i=new Map,r=[];for(let o=0;o<t.length;o++){let c=t[o];if(c.type==="log"&&c.message_id){let f=i.get(c.message_id)||[];f.push(c),i.set(c.message_id,f)}else r.push({index:o,msg:c})}let n=[],s=[];function u(){if(s.length>0)n.push({kind:"log-group",logs:s}),s=[]}for(let{index:o,msg:c}of r)if(c.type==="log")s.push(c);else{u(),n.push({kind:"message",msg:c,index:o});let f=c.id?i.get(c.id):void 0;if(f&&f.length>0)n.push({kind:"log-group",logs:f})}return u(),n}function ci({messages:t,unreadCount:i,forceScrollCounter:r,onScrollToBottom:n,onRetry:s,connected:u=!0}){let o=U(null),{isAtBottom:c,atBottom:f,scrollToBottom:v}=Rr(o),F=U(0),l=U(!0);if(t.length>(F.current??0))l.current=c();W(()=>{if(t.length>(F.current??0)&&l.current)v();F.current=t.length},[t.length]),W(()=>{if(f&&i>0)n()},[f,i,n]),W(()=>{if(r>0)v()},[r]),W(()=>{v()},[]);let y=Vn(t);return a("div",{class:"messages",ref:o,children:[!u&&a("div",{class:"reconnecting-bar",children:"Reconnecting..."},void 0,!1,void 0,this),y.map((g,T)=>{if(g.kind==="log-group"){let C=g.logs[0];return a(ui,{logs:g.logs},`log-group-${C.sender}-${C.created_at}-${T}`,!1,void 0,this)}let L=g.msg;return a(si,{sender:L.sender,content:L.content,color:L.color,timestamp:L.created_at,tempId:L.tempId,status:L.status,onRetry:L.tempId&&s?()=>s(L.tempId):void 0},L.tempId||`${L.sender}-${L.created_at}-${g.index}`,!1,void 0,this)}),a(oi,{count:i,onClick:()=>{v(),n()}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function xn(t,i){let{selectionStart:r,selectionEnd:n,value:s}=t,u=s.slice(r,n),o;switch(i){case"bold":o=`**${u||"text"}**`;break;case"italic":o=`*${u||"text"}*`;break;case"code":o=u.includes(`
`)?`\`\`\`
${u||"code"}
\`\`\``:`\`${u||"code"}\``;break;case"link":o=`[${u||"text"}](url)`;break;default:return}t.value=s.slice(0,r)+o+s.slice(n),t.focus();let c=r+o.length;t.setSelectionRange(c,c)}var e=(t)=>t.preventDefault();function vi({textareaRef:t,onSend:i}){let r=(n)=>{if(t.current)xn(t.current,n)};return a("div",{class:"chat-input-toolbar",children:[a("button",{class:"fmt-btn",title:"Bold",onMouseDown:e,onTouchStart:e,onTouchEnd:()=>r("bold"),onClick:()=>r("bold"),children:a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:a("path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),a("button",{class:"fmt-btn",title:"Italic",onMouseDown:e,onTouchStart:e,onTouchEnd:()=>r("italic"),onClick:()=>r("italic"),children:a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("line",{x1:"19",x2:"10",y1:"4",y2:"4"},void 0,!1,void 0,this),a("line",{x1:"14",x2:"5",y1:"20",y2:"20"},void 0,!1,void 0,this),a("line",{x1:"15",x2:"9",y1:"4",y2:"20"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),a("button",{class:"fmt-btn",title:"Code",onMouseDown:e,onTouchStart:e,onTouchEnd:()=>r("code"),onClick:()=>r("code"),children:a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("polyline",{points:"16 18 22 12 16 6"},void 0,!1,void 0,this),a("polyline",{points:"8 6 2 12 8 18"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),a("button",{class:"fmt-btn",title:"Link",onMouseDown:e,onTouchStart:e,onTouchEnd:()=>r("link"),onClick:()=>r("link"),children:a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},void 0,!1,void 0,this),a("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),a("div",{class:"toolbar-spacer"},void 0,!1,void 0,this),a("button",{class:"send-btn",title:"Send",onMouseDown:e,onTouchStart:e,onTouchEnd:i,onClick:i,children:a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"},void 0,!1,void 0,this),a("path",{d:"m21.854 2.147-10.94 10.939"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function pr(t){let i=P(()=>{let n=t.current;if(!n)return;n.style.height="auto",n.style.height=Math.min(n.scrollHeight,200)+"px"},[t]),r=P(()=>{let n=t.current;if(!n)return;n.value="",n.style.height="auto"},[t]);return{resize:i,reset:r}}function li({roomName:t,onSend:i}){let r=U(null),{resize:n,reset:s}=pr(r),u=P(()=>{let c=r.current,f=c?.value.trim();if(!f||!c)return;i(f),s(),c.focus(),requestAnimationFrame(()=>c.focus())},[i,s]),o=P((c)=>{if(c.key==="Enter"&&!c.shiftKey&&!matchMedia("(pointer: coarse)").matches)c.preventDefault(),u()},[u]);return a("div",{class:"chat-input-area",children:a("div",{class:"chat-input-box",children:[a("textarea",{ref:r,placeholder:`Message #${t}`,rows:1,onInput:n,onKeyDown:o},void 0,!1,void 0,this),a(vi,{textareaRef:r,onSend:u},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}var xi=1000,jn=30000;function Nr(t,i,r,n){let s=U(null),u=U(r);u.current=r;let o=U(n?.onTeamInfo);o.current=n?.onTeamInfo;let c=U(0),f=U(xi),[v,F]=_(!0);return W(()=>{if(!t||!i)return;async function l(){if(!t||c.current===0)return;try{let T=await br(t,c.current);for(let L of T){if(L.seq&&L.seq>c.current)c.current=L.seq;u.current?.(L)}}catch{}}function y(){if(s.current)s.current.close();let T=location.protocol==="https:"?"wss:":"ws:",L=`?token=${encodeURIComponent(i)}`,C=new WebSocket(`${T}//${location.host}/api/rooms/${t}/ws${L}`);C.onopen=()=>{F(!0),f.current=xi,l()},C.onmessage=(I)=>{try{let B=JSON.parse(I.data);if(B.type==="team_info"){o.current?.(B);return}let A=B;if(!A.sender||!A.content)return;if(A.seq&&A.seq>c.current)c.current=A.seq;u.current?.(A)}catch{}},C.onerror=()=>console.error("WebSocket error"),C.onclose=()=>{F(!1);let I=f.current;f.current=Math.min(I*2,jn),setTimeout(()=>{if(s.current===C)y()},I)},s.current=C}y();let g=()=>{if(document.visibilityState==="visible")if(!s.current||s.current.readyState!==WebSocket.OPEN)f.current=xi,y();else l()};return document.addEventListener("visibilitychange",g),()=>{if(document.removeEventListener("visibilitychange",g),s.current){let T=s.current;s.current=null,T.close()}}},[t,i]),{wsRef:s,connected:v}}function fi(){return new Promise((t,i)=>{let r=indexedDB.open("meet-ai-queue",1);r.onupgradeneeded=()=>{let n=r.result;if(!n.objectStoreNames.contains("outbox"))n.createObjectStore("outbox",{keyPath:"tempId"})},r.onsuccess=()=>t(r.result),r.onerror=()=>i(r.error)})}async function ta(t){let r=(await fi()).transaction("outbox","readwrite");if(r.objectStore("outbox").put(t),await new Promise((n,s)=>{r.oncomplete=()=>n(),r.onerror=()=>s(r.error)}),"serviceWorker"in navigator&&"SyncManager"in window)await(await navigator.serviceWorker.ready).sync.register("send-messages")}async function ia(t){try{(await fi()).transaction("outbox","readwrite").objectStore("outbox").delete(t)}catch{}}async function ra(t){let n=(await fi()).transaction("outbox","readonly").objectStore("outbox").getAll();return(await new Promise((u,o)=>{n.onsuccess=()=>u(n.result),n.onerror=()=>o(n.error)})).filter((u)=>u.roomId===t)}async function na(){let r=(await fi()).transaction("outbox","readonly").objectStore("outbox").getAll();return new Promise((n,s)=>{r.onsuccess=()=>n(r.result),r.onerror=()=>s(r.error)})}function Dr(){let t=P(ta,[]),i=P(ia,[]),r=P(ra,[]),n=P(na,[]);return{queue:t,remove:i,getForRoom:r,getAll:n}}async function dr(){if(!("Notification"in window))return"denied";if(Notification.permission!=="default")return Notification.permission;return Notification.requestPermission()}function Er(t,i){if(!("Notification"in window))return;if(Notification.permission!=="granted")return;if(document.visibilityState!=="hidden")return;if(t.type==="log")return;if(t.sender===i)return;let r=new Notification(t.sender,{body:t.content.slice(0,100),tag:t.id??t.message_id??void 0,icon:"/favicon.ico"});r.onclick=()=>{window.focus(),r.close()}}function Fi({room:t,apiKey:i,userName:r,onTeamInfo:n}){let[s,u]=_([]),[o,c]=_(0),[f,v]=_(0),{queue:F,remove:l,getForRoom:y}=Dr();W(()=>{let B=!1;async function A(){let[h,H]=await Promise.all([Zr(t.id),Or(t.id)]);if(B)return;let Q=[...h,...H].sort((J,Z)=>Vi(J.created_at).valueOf()-Vi(Z.created_at).valueOf());u(Q.map((J)=>({...J,status:"sent"})));try{let J=await y(t.id);if(B||J.length===0)return;if(u((Z)=>[...Z,...J.map((G)=>({sender:G.sender,content:G.content,created_at:new Date(G.timestamp).toISOString(),tempId:G.tempId,status:"failed"}))]),navigator.onLine)for(let Z of J)try{if(await bt(Z.roomId,Z.sender,Z.content),await l(Z.tempId),!B)u((G)=>G.map((V)=>V.tempId===Z.tempId?{...V,status:"sent"}:V))}catch{}}catch{}}return A(),()=>{B=!0}},[t.id]),W(()=>{dr()},[]);let g=P((B)=>{if(Er(B,r),B.sender===r)u((A)=>{let h=A.findIndex((H)=>H.tempId&&H.content===B.content);if(h!==-1){let H=[...A];return H.splice(h,1),[...H,{...B,status:"sent"}]}return[...A,{...B,status:"sent"}]});else u((A)=>[...A,{...B,status:"sent"}]),c((A)=>A+1)},[r]),T=P((B)=>{n?.(B)},[n]),{connected:L}=Nr(t.id,i,g,{onTeamInfo:T});W(()=>{let B=async()=>{try{let A=await y(t.id);for(let h of A){u((H)=>H.map((Q)=>Q.tempId===h.tempId?{...Q,status:"pending"}:Q));try{await bt(h.roomId,h.sender,h.content),await l(h.tempId),u((H)=>H.map((Q)=>Q.tempId===h.tempId?{...Q,status:"sent"}:Q))}catch{u((H)=>H.map((Q)=>Q.tempId===h.tempId?{...Q,status:"failed"}:Q))}}}catch{}};return window.addEventListener("online",B),()=>window.removeEventListener("online",B)},[t.id]);let C=P(async(B)=>{let A="pending-"+Date.now()+"-"+Math.random().toString(36).slice(2,6);u((h)=>[...h,{sender:r,content:B,created_at:new Date().toISOString(),tempId:A,status:"pending"}]),v((h)=>h+1);try{await bt(t.id,r,B),u((h)=>h.map((H)=>H.tempId===A?{...H,status:"sent"}:H))}catch{await F({tempId:A,roomId:t.id,sender:r,content:B,apiKey:i,timestamp:Date.now()}),u((h)=>h.map((H)=>H.tempId===A?{...H,status:"failed"}:H))}},[t.id,r,i]),I=P(async(B)=>{let A=s.find((h)=>h.tempId===B);if(!A)return;u((h)=>h.map((H)=>H.tempId===B?{...H,status:"pending"}:H));try{await bt(t.id,r,A.content),u((h)=>h.map((H)=>H.tempId===B?{...H,status:"sent"}:H)),await l(B)}catch{u((h)=>h.map((H)=>H.tempId===B?{...H,status:"failed"}:H))}},[t.id,r,s]);return a(j,{children:[a(ci,{messages:s,unreadCount:o,forceScrollCounter:f,onScrollToBottom:()=>c(0),onRetry:I,connected:L},void 0,!1,void 0,this),a(li,{roomName:t.name,onSend:C},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function $i({currentRoom:t,apiKey:i,userName:r,showInvite:n,showTeamToggle:s,onMobileToggle:u,onTeamToggle:o,onInviteClick:c,onTeamInfo:f}){let v=t?.name??"Select a channel";return a("div",{class:"main",children:[a(ti,{roomName:v,showInvite:n&&!!t,showTeamToggle:s,onMobileToggle:u,onTeamToggle:o,onInviteClick:c},void 0,!1,void 0,this),t?a(Fi,{room:t,apiKey:i,userName:r,onTeamInfo:f},t.id,!1,void 0,this):a(ii,{},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function er({member:t,inactive:i}){return a("div",{class:`team-member${i?" team-member--inactive":""}`,children:[a("span",{class:"team-member-dot",style:{background:i?"#555":vt(t.color)}},void 0,!1,void 0,this),a("span",{class:"team-member-name",children:t.name},void 0,!1,void 0,this),a("span",{class:"team-member-model",children:t.model},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function yi({teamInfo:t,isOpen:i,onClose:r}){let n=t.members.filter((u)=>u.status==="active"),s=t.members.filter((u)=>u.status==="inactive");return a("div",{class:`team-sidebar${i?" open":""}`,children:[a("div",{class:"team-sidebar-header",children:[a("span",{children:"Team"},void 0,!1,void 0,this),a("span",{class:"team-sidebar-count",children:[n.length,"/",t.members.length]},void 0,!0,void 0,this),a("button",{class:"team-sidebar-close-btn",onClick:r,children:"×"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),n.length>0&&a("div",{class:"team-section",children:[a("div",{class:"team-section-label",children:"Active"},void 0,!1,void 0,this),n.map((u)=>a(er,{member:u},u.name,!1,void 0,this))]},void 0,!0,void 0,this),s.length>0&&a("div",{class:"team-section",children:[a("div",{class:"team-section-label",children:"Inactive"},void 0,!1,void 0,this),s.map((u)=>a(er,{member:u,inactive:!0},u.name,!1,void 0,this))]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function gi({schema:t}){let i=Ri(t);return a("div",{class:"color-preview",children:i.map((r,n)=>a("div",{class:"color-swatch",style:`background:${r}`,title:Ki[n],children:Ki[n]},n,!1,void 0,this))},void 0,!1,void 0,this)}function mi({currentSchema:t,onSave:i,onClose:r}){let[n,s]=_(t),[u,o]=_(()=>{let T=Xi.find((L)=>L.schema===t);return T?T.schema:""}),c=t,f=P((T)=>{let L=T.target.value;s(L),o(""),it(L.trim())},[]),v=P((T)=>{let L=T.target.value;if(o(L),L)s(L),it(L)},[]),F=P(()=>{i(n.trim())},[n,i]),l=P(()=>{it(c),r()},[c,r]),y=P(()=>{s(wt),o(wt),it(wt)},[]),g=P((T)=>{if(T.target.classList.contains("settings-overlay"))it(c),r()},[c,r]);return a("div",{class:"settings-overlay",onClick:g,children:a("div",{class:"settings-panel",children:[a("h2",{children:"Color Schema"},void 0,!1,void 0,this),a("label",{children:"Theme Presets"},void 0,!1,void 0,this),a("select",{value:u,onChange:v,children:[a("option",{value:"",children:"Custom"},void 0,!1,void 0,this),Xi.map((T)=>a("option",{value:T.schema,children:T.name},T.name,!1,void 0,this))]},void 0,!0,void 0,this),a("label",{children:"Schema string (10 comma-separated hex colors)"},void 0,!1,void 0,this),a("input",{type:"text",value:n,onInput:f},void 0,!1,void 0,this),a(gi,{schema:n},void 0,!1,void 0,this),a("div",{class:"btn-row",children:[a("button",{class:"btn-reset",onClick:y,children:"Reset"},void 0,!1,void 0,this),a("button",{class:"btn-cancel",onClick:l,children:"Cancel"},void 0,!1,void 0,this),a("button",{class:"btn-save",onClick:F,children:"Save"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function hi({onClose:t,onToast:i}){let[r,n]=_(null),[s,u]=_(null),[o,c]=_(!1);W(()=>{let F=!1;async function l(){try{let y=await Ir();if(F)return;n(y.url)}catch(y){if(!F)u(y.message||"Failed to create share link")}}return l(),()=>{F=!0}},[]),W(()=>{if(!r)return;let F=document.getElementById("qr-container");if(!F)return;try{let l=qrcode(0,"M");l.addData(r),l.make(),F.innerHTML=l.createImgTag(5,8)}catch{}},[r]);let f=P(async()=>{if(!r)return;try{await navigator.clipboard.writeText(r),c(!0),setTimeout(()=>c(!1),2000)}catch{let F=document.getElementById("qr-url");if(F){let l=document.createRange();l.selectNodeContents(F),window.getSelection()?.removeAllRanges(),window.getSelection()?.addRange(l)}}},[r]),v=P((F)=>{if(F.target.classList.contains("qr-overlay"))t()},[t]);return a("div",{class:"qr-overlay",onClick:v,children:a("div",{class:"qr-panel",children:[a("h2",{children:"Login on another device"},void 0,!1,void 0,this),a("p",{class:"qr-subtitle",children:"Scan with your phone camera to sign in"},void 0,!1,void 0,this),a("div",{class:"qr-container",id:"qr-container",children:[!r&&!s&&a("div",{style:"width:200px;height:200px;display:flex;align-items:center;justify-content:center;margin:0 auto",children:a("div",{style:"width:32px;height:32px;border:3px solid var(--c-border);border-top-color:var(--c-primary);border-radius:50%;animation:spin 0.8s linear infinite"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s&&a("p",{style:"color:#F85149",children:s},void 0,!1,void 0,this)]},void 0,!0,void 0,this),r&&a("div",{class:"qr-url",id:"qr-url",onClick:f,title:"Click to copy",children:r},void 0,!1,void 0,this),a("div",{class:"qr-copied",children:o?"Copied to clipboard!":""},void 0,!1,void 0,this),a("div",{class:"qr-expires",children:"Expires in 5 minutes"},void 0,!1,void 0,this),a("button",{class:"btn-close",onClick:t,children:"Close"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function wi({onClose:t}){return a("div",{class:"ios-install-overlay",onClick:t,children:a("div",{class:"ios-install-panel",onClick:(i)=>i.stopPropagation(),children:[a("h3",{children:"Install meet-ai"},void 0,!1,void 0,this),a("div",{class:"ios-install-steps",children:[a("div",{class:"ios-install-step",children:[a("span",{class:"ios-step-num",children:"1"},void 0,!1,void 0,this),a("span",{class:"ios-step-text",children:["Tap the ",a("strong",{children:"Share"},void 0,!1,void 0,this)," button",a("svg",{class:"ios-share-icon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"},void 0,!1,void 0,this),a("polyline",{points:"16 6 12 2 8 6"},void 0,!1,void 0,this),a("line",{x1:"12",y1:"2",x2:"12",y2:"15"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"in the toolbar"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"ios-install-step",children:[a("span",{class:"ios-step-num",children:"2"},void 0,!1,void 0,this),a("span",{class:"ios-step-text",children:["Scroll down and tap ",a("strong",{children:"Add to Home Screen"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"ios-install-step",children:[a("span",{class:"ios-step-num",children:"3"},void 0,!1,void 0,this),a("span",{class:"ios-step-text",children:["Tap ",a("strong",{children:"Add"},void 0,!1,void 0,this)," in the top right"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),a("button",{class:"ios-install-close",onClick:t,children:"Got it"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function Pi({text:t,onDone:i}){return W(()=>{let r=setTimeout(i,2100);return()=>clearTimeout(r)},[i]),a("div",{class:"toast",children:t},void 0,!1,void 0,this)}function Vr(t,i){let r=U(null),n=U(i);n.current=i,W(()=>{if(!t)return;function s(){let u=location.protocol==="https:"?"wss:":"ws:",o=`?token=${encodeURIComponent(t)}`,c=new WebSocket(`${u}//${location.host}/api/lobby/ws${o}`);c.onmessage=(f)=>{try{let v=JSON.parse(f.data);if(v.type==="room_created")n.current?.(v.id,v.name)}catch{}},c.onclose=()=>{setTimeout(()=>{if(r.current===c)s()},3000)},r.current=c}return s(),()=>{if(r.current){let u=r.current;r.current=null,u.close()}}},[t])}function Mi(){let t=location.pathname.match(/^\/chat\/([a-f0-9-]+)$/i);return t?t[1]:null}function xr(t,i){W(()=>{let s=()=>{let u=Mi();i(u)};return window.addEventListener("popstate",s),()=>window.removeEventListener("popstate",s)},[t,i]);let r=P((s)=>{history.pushState({roomId:s},"","/chat/"+s)},[]),n=P((s)=>{history.replaceState(null,"",s)},[]);return{pushRoom:r,replaceUrl:n}}function Ti({apiKey:t,userName:i,colorSchema:r,onNameChange:n,onSchemaChange:s}){let[u,o]=_([]),[c,f]=_(null),[v,F]=_(!1),[l,y]=_(!1),[g,T]=_(!1),[L,C]=_(null),[I,B]=_(null),[A,h]=_(!1),[H,Q]=_(!1),J=window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches;W(()=>{let $=!1;async function M(){let m=await Wr();if($)return;o(m);let z=Mi();if(z){let k=m.find((b)=>b.id===z);if(k)f(k)}}return M(),()=>{$=!0}},[]);let Z=P(($,M)=>{o((m)=>[...m,{id:$,name:M}])},[]);Vr(t,Z);let{pushRoom:G,replaceUrl:V}=xr(u,P(($)=>{if($){let M=u.find((m)=>m.id===$);f(M??null)}else f(null)},[u])),It=P(($)=>{f($),F(!1),G($.id)},[G]),Y=P(()=>{F(!1),Q(!0)},[]),w=P(($)=>{s($),y(!1)},[s]);return W(()=>{if(!Mi())history.replaceState({roomId:null},"",location.pathname)},[]),a(j,{children:[a(xt,{rooms:u,currentRoomId:c?.id??null,userName:i,isOpen:v,onSelectRoom:It,onNameChange:n,onSettingsClick:()=>y(!0),onClose:()=>F(!1),onInstallClick:Y},void 0,!1,void 0,this),v&&a(jt,{onClick:()=>F(!1)},void 0,!1,void 0,this),a($i,{currentRoom:c,apiKey:t,userName:i,showInvite:!J,showTeamToggle:!!I,onMobileToggle:()=>F(($)=>!$),onTeamToggle:()=>h(($)=>!$),onInviteClick:()=>T(!0),onTeamInfo:B},void 0,!1,void 0,this),I&&a(yi,{teamInfo:I,isOpen:A,onClose:()=>h(!1)},void 0,!1,void 0,this),A&&a("div",{class:"team-sidebar-backdrop",onClick:()=>h(!1),style:"display:block"},void 0,!1,void 0,this),l&&a(mi,{currentSchema:r,onSave:w,onClose:()=>y(!1)},void 0,!1,void 0,this),g&&a(hi,{onClose:()=>T(!1),onToast:($)=>{C($),T(!1)}},void 0,!1,void 0,this),H&&a(wi,{onClose:()=>Q(!1)},void 0,!1,void 0,this),L&&a(Pi,{text:L,onDone:()=>C(null)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function ji(t,i){let[r,n]=_(()=>{return localStorage.getItem(t)??i}),s=P((u)=>{n(u),localStorage.setItem(t,u)},[t]);return[r,s]}var jr=["curious","bold","swift","quiet","bright","keen","calm","wild","lazy","witty","brave","sly","warm","cool","zen"],tn=["panda","fox","otter","hawk","wolf","owl","lynx","bear","deer","raven","hare","seal","wren","crane","moth"];function aa(){let t=jr[Math.floor(Math.random()*jr.length)],i=tn[Math.floor(Math.random()*tn.length)],r=Math.floor(Math.random()*100);return`${t}-${i}-${r}`}function rn(){let t=localStorage.getItem(E.handle);if(!t)t=aa(),localStorage.setItem(E.handle,t);return t}function Ai(){let[t,i]=_(()=>Si()),[r,n]=ji(E.handle,rn()),[s,u]=ji(E.colorSchema,wt),o=new URLSearchParams(location.search).get("token");W(()=>{it(s)},[s]);let c=P((v)=>{Gr(v),i(v),history.replaceState(null,"","/chat"),location.reload()},[]),f=P((v)=>{u(v),it(v)},[]);if(o&&t)history.replaceState(null,"",location.pathname);if(o&&!t)return a(Dt,{token:o,onLogin:c},void 0,!1,void 0,this);if(!t)return a(Nt,{onLogin:c},void 0,!1,void 0,this);return a(Ti,{apiKey:t,userName:r,colorSchema:s,onNameChange:n,onSchemaChange:f},void 0,!1,void 0,this)}var nn=document.getElementById("root");if(nn)Oi(a(Ai,{},void 0,!1,void 0,this),nn);
