var cn=Object.create;var{getPrototypeOf:ln,defineProperty:_i,getOwnPropertyNames:vn}=Object;var fn=Object.prototype.hasOwnProperty;var rr=(t,i,r)=>{r=t!=null?cn(ln(t)):{};let n=i||!t||!t.__esModule?_i(r,"default",{value:t,enumerable:!0}):r;for(let s of vn(t))if(!fn.call(n,s))_i(n,s,{get:()=>t[s],enumerable:!0});return n};var nr=(t,i)=>()=>(i||t((i={exports:{}}).exports,i),i.exports);var Fn=(t,i)=>{for(var r in i)_i(t,r,{get:i[r],enumerable:!0,configurable:!0,set:(n)=>i[r]=()=>n})};var Kr=nr((Ni,Di)=>{(function(t,i){typeof Ni=="object"&&typeof Di<"u"?Di.exports=i():typeof define=="function"&&define.amd?define(i):(t=typeof globalThis<"u"?globalThis:t||self).dayjs=i()})(Ni,function(){var t=1000,i=60000,r=3600000,n="millisecond",s="second",o="minute",u="hour",c="day",l="week",v="month",F="quarter",f="year",g="date",w="Invalid Date",A=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Q=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Y){var h=["th","st","nd","rd"],y=Y%100;return"["+Y+(h[(y-20)%10]||h[y]||h[0])+"]"}},z=function(Y,h,y){var M=String(Y);return!M||M.length>=h?Y:""+Array(h+1-M.length).join(y)+Y},B={s:z,z:function(Y){var h=-Y.utcOffset(),y=Math.abs(h),M=Math.floor(y/60),$=y%60;return(h<=0?"+":"-")+z(M,2,"0")+":"+z($,2,"0")},m:function Y(h,y){if(h.date()<y.date())return-Y(y,h);var M=12*(y.year()-h.year())+(y.month()-h.month()),$=h.clone().add(M,v),G=y-$<0,Z=h.clone().add(M+(G?-1:1),v);return+(-(M+(y-$)/(G?$-Z:Z-$))||0)},a:function(Y){return Y<0?Math.ceil(Y)||0:Math.floor(Y)},p:function(Y){return{M:v,y:f,w:l,d:c,D:g,h:u,m:o,s,ms:n,Q:F}[Y]||String(Y||"").toLowerCase().replace(/s$/,"")},u:function(Y){return Y===void 0}},_="en",T={};T[_]=m;var k="$isDayjsObject",S=function(Y){return Y instanceof O||!(!Y||!Y[k])},b=function Y(h,y,M){var $;if(!h)return _;if(typeof h=="string"){var G=h.toLowerCase();T[G]&&($=G),y&&(T[G]=y,$=G);var Z=h.split("-");if(!$&&Z.length>1)return Y(Z[0])}else{var C=h.name;T[C]=h,$=C}return!M&&$&&(_=$),$||!M&&_},W=function(Y,h){if(S(Y))return Y.clone();var y=typeof h=="object"?h:{};return y.date=Y,y.args=arguments,new O(y)},H=B;H.l=b,H.i=S,H.w=function(Y,h){return W(Y,{locale:h.$L,utc:h.$u,x:h.$x,$offset:h.$offset})};var O=function(){function Y(y){this.$L=b(y.locale,null,!0),this.parse(y),this.$x=this.$x||y.x||{},this[k]=!0}var h=Y.prototype;return h.parse=function(y){this.$d=function(M){var{date:$,utc:G}=M;if($===null)return new Date(NaN);if(H.u($))return new Date;if($ instanceof Date)return new Date($);if(typeof $=="string"&&!/Z$/i.test($)){var Z=$.match(A);if(Z){var C=Z[2]-1||0,X=(Z[7]||"0").substring(0,3);return G?new Date(Date.UTC(Z[1],C,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,X)):new Date(Z[1],C,Z[3]||1,Z[4]||0,Z[5]||0,Z[6]||0,X)}}return new Date($)}(y),this.init()},h.init=function(){var y=this.$d;this.$y=y.getFullYear(),this.$M=y.getMonth(),this.$D=y.getDate(),this.$W=y.getDay(),this.$H=y.getHours(),this.$m=y.getMinutes(),this.$s=y.getSeconds(),this.$ms=y.getMilliseconds()},h.$utils=function(){return H},h.isValid=function(){return this.$d.toString()!==w},h.isSame=function(y,M){var $=W(y);return this.startOf(M)<=$&&$<=this.endOf(M)},h.isAfter=function(y,M){return W(y)<this.startOf(M)},h.isBefore=function(y,M){return this.endOf(M)<W(y)},h.$g=function(y,M,$){return H.u(y)?this[M]:this.set($,y)},h.unix=function(){return Math.floor(this.valueOf()/1000)},h.valueOf=function(){return this.$d.getTime()},h.startOf=function(y,M){var $=this,G=!!H.u(M)||M,Z=H.p(y),C=function(ct,p){var nt=H.w($.$u?Date.UTC($.$y,p,ct):new Date($.$y,p,ct),$);return G?nt:nt.endOf(c)},X=function(ct,p){return H.w($.toDate()[ct].apply($.toDate("s"),(G?[0,0,0,0]:[23,59,59,999]).slice(p)),$)},K=this.$W,R=this.$M,e=this.$D,Ft="set"+(this.$u?"UTC":"");switch(Z){case f:return G?C(1,0):C(31,11);case v:return G?C(1,R):C(0,R+1);case l:var ut=this.$locale().weekStart||0,Tt=(K<ut?K+7:K)-ut;return C(G?e-Tt:e+(6-Tt),R);case c:case g:return X(Ft+"Hours",0);case u:return X(Ft+"Minutes",1);case o:return X(Ft+"Seconds",2);case s:return X(Ft+"Milliseconds",3);default:return this.clone()}},h.endOf=function(y){return this.startOf(y,!1)},h.$set=function(y,M){var $,G=H.p(y),Z="set"+(this.$u?"UTC":""),C=($={},$[c]=Z+"Date",$[g]=Z+"Date",$[v]=Z+"Month",$[f]=Z+"FullYear",$[u]=Z+"Hours",$[o]=Z+"Minutes",$[s]=Z+"Seconds",$[n]=Z+"Milliseconds",$)[G],X=G===c?this.$D+(M-this.$W):M;if(G===v||G===f){var K=this.clone().set(g,1);K.$d[C](X),K.init(),this.$d=K.set(g,Math.min(this.$D,K.daysInMonth())).$d}else C&&this.$d[C](X);return this.init(),this},h.set=function(y,M){return this.clone().$set(y,M)},h.get=function(y){return this[H.p(y)]()},h.add=function(y,M){var $,G=this;y=Number(y);var Z=H.p(M),C=function(R){var e=W(G);return H.w(e.date(e.date()+Math.round(R*y)),G)};if(Z===v)return this.set(v,this.$M+y);if(Z===f)return this.set(f,this.$y+y);if(Z===c)return C(1);if(Z===l)return C(7);var X=($={},$[o]=i,$[u]=r,$[s]=t,$)[Z]||1,K=this.$d.getTime()+y*X;return H.w(K,this)},h.subtract=function(y,M){return this.add(-1*y,M)},h.format=function(y){var M=this,$=this.$locale();if(!this.isValid())return $.invalidDate||w;var G=y||"YYYY-MM-DDTHH:mm:ssZ",Z=H.z(this),C=this.$H,X=this.$m,K=this.$M,R=$.weekdays,e=$.months,Ft=$.meridiem,ut=function(p,nt,Ht,Ct){return p&&(p[nt]||p(M,G))||Ht[nt].slice(0,Ct)},Tt=function(p){return H.s(C%12||12,p,"0")},ct=Ft||function(p,nt,Ht){var Ct=p<12?"AM":"PM";return Ht?Ct.toLowerCase():Ct};return G.replace(Q,function(p,nt){return nt||function(Ht){switch(Ht){case"YY":return String(M.$y).slice(-2);case"YYYY":return H.s(M.$y,4,"0");case"M":return K+1;case"MM":return H.s(K+1,2,"0");case"MMM":return ut($.monthsShort,K,e,3);case"MMMM":return ut(e,K);case"D":return M.$D;case"DD":return H.s(M.$D,2,"0");case"d":return String(M.$W);case"dd":return ut($.weekdaysMin,M.$W,R,2);case"ddd":return ut($.weekdaysShort,M.$W,R,3);case"dddd":return R[M.$W];case"H":return String(C);case"HH":return H.s(C,2,"0");case"h":return Tt(1);case"hh":return Tt(2);case"a":return ct(C,X,!0);case"A":return ct(C,X,!1);case"m":return String(X);case"mm":return H.s(X,2,"0");case"s":return String(M.$s);case"ss":return H.s(M.$s,2,"0");case"SSS":return H.s(M.$ms,3,"0");case"Z":return Z}return null}(p)||Z.replace(":","")})},h.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},h.diff=function(y,M,$){var G,Z=this,C=H.p(M),X=W(y),K=(X.utcOffset()-this.utcOffset())*i,R=this-X,e=function(){return H.m(Z,X)};switch(C){case f:G=e()/12;break;case v:G=e();break;case F:G=e()/3;break;case l:G=(R-K)/604800000;break;case c:G=(R-K)/86400000;break;case u:G=R/r;break;case o:G=R/i;break;case s:G=R/t;break;default:G=R}return $?G:H.a(G)},h.daysInMonth=function(){return this.endOf(v).$D},h.$locale=function(){return T[this.$L]},h.locale=function(y,M){if(!y)return this.$L;var $=this.clone(),G=b(y,M,!0);return G&&($.$L=G),$},h.clone=function(){return H.w(this.$d,this)},h.toDate=function(){return new Date(this.valueOf())},h.toJSON=function(){return this.isValid()?this.toISOString():null},h.toISOString=function(){return this.$d.toISOString()},h.toString=function(){return this.$d.toUTCString()},Y}(),J=O.prototype;return W.prototype=J,[["$ms",n],["$s",s],["$m",o],["$H",u],["$W",c],["$M",v],["$y",f],["$D",g]].forEach(function(Y){J[Y[1]]=function(h){return this.$g(h,Y[0],Y[1])}}),W.extend=function(Y,h){return Y.$i||(Y(h,O,W),Y.$i=!0),W},W.locale=b,W.isDayjs=S,W.unix=function(Y){return W(1000*Y)},W.en=T[_],W.Ls=T,W.p={},W})});var Rr=nr((Ei,Vi)=>{(function(t,i){typeof Ei=="object"&&typeof Vi<"u"?Vi.exports=i():typeof define=="function"&&define.amd?define(i):(t=typeof globalThis<"u"?globalThis:t||self).dayjs_plugin_utc=i()})(Ei,function(){var t="minute",i=/[+-]\d\d(?::?\d\d)?/g,r=/([+-]|\d\d)/g;return function(n,s,o){var u=s.prototype;o.utc=function(w){var A={date:w,utc:!0,args:arguments};return new s(A)},u.utc=function(w){var A=o(this.toDate(),{locale:this.$L,utc:!0});return w?A.add(this.utcOffset(),t):A},u.local=function(){return o(this.toDate(),{locale:this.$L,utc:!1})};var c=u.parse;u.parse=function(w){w.utc&&(this.$u=!0),this.$utils().u(w.$offset)||(this.$offset=w.$offset),c.call(this,w)};var l=u.init;u.init=function(){if(this.$u){var w=this.$d;this.$y=w.getUTCFullYear(),this.$M=w.getUTCMonth(),this.$D=w.getUTCDate(),this.$W=w.getUTCDay(),this.$H=w.getUTCHours(),this.$m=w.getUTCMinutes(),this.$s=w.getUTCSeconds(),this.$ms=w.getUTCMilliseconds()}else l.call(this)};var v=u.utcOffset;u.utcOffset=function(w,A){var Q=this.$utils().u;if(Q(w))return this.$u?0:Q(this.$offset)?v.call(this):this.$offset;if(typeof w=="string"&&(w=function(_){_===void 0&&(_="");var T=_.match(i);if(!T)return null;var k=(""+T[0]).match(r)||["-",0,0],S=k[0],b=60*+k[1]+ +k[2];return b===0?0:S==="+"?b:-b}(w),w===null))return this;var m=Math.abs(w)<=16?60*w:w;if(m===0)return this.utc(A);var z=this.clone();if(A)return z.$offset=m,z.$u=!1,z;var B=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();return(z=this.local().add(m+B,t)).$offset=m,z.$x.$localOffset=B,z};var F=u.format;u.format=function(w){var A=w||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return F.call(this,A)},u.valueOf=function(){var w=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-60000*w},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var f=u.toDate;u.toDate=function(w){return w==="s"&&this.$offset?o(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():f.call(this)};var g=u.diff;u.diff=function(w,A,Q){if(w&&this.$u===w.$u)return g.call(this,w,A,Q);var m=this.local(),z=o(w).local();return g.call(m,z,A,Q)}}})});var $n={Stringify:1,BeforeStream:2,Stream:3},d=(t,i)=>{let r=new String(t);return r.isEscaped=!0,r.callbacks=i,r},gn=/[&<>'"]/,Yi=async(t,i)=>{let r="";i||=[];let n=await Promise.all(t);for(let s=n.length-1;;s--){if(r+=n[s],s--,s<0)break;let o=n[s];if(typeof o==="object")i.push(...o.callbacks||[]);let u=o.isEscaped;if(o=await(typeof o==="object"?o.toString():o),typeof o==="object")i.push(...o.callbacks||[]);if(o.isEscaped??u)r+=o;else{let c=[r];at(o,c),r=c[0]}}return d(r,i)},at=(t,i)=>{let r=t.search(gn);if(r===-1){i[0]+=t;return}let n,s,o=0;for(s=r;s<t.length;s++){switch(t.charCodeAt(s)){case 34:n="&quot;";break;case 39:n="&#39;";break;case 38:n="&amp;";break;case 60:n="&lt;";break;case 62:n="&gt;";break;default:continue}i[0]+=t.substring(o,s)+n,o=s+1}i[0]+=t.substring(o,s)},zi=(t)=>{let i=t.callbacks;if(!i?.length)return t;let r=[t],n={};return i.forEach((s)=>s({phase:$n.Stringify,buffer:r,context:n})),r[0]};var $t=Symbol("RENDERER"),gt=Symbol("ERROR_HANDLER"),q=Symbol("STASH"),qt=Symbol("INTERNAL"),Jt=Symbol("MEMO"),yt=Symbol("PERMALINK");var Zi=(t)=>{return t[qt]=!0,t};var Gi=(t)=>({value:i,children:r})=>{if(!r)return;let n={children:[{tag:Zi(()=>{t.push(i)}),props:{}}]};if(Array.isArray(r))n.children.push(...r.flat());else n.children.push(r);n.children.push({tag:Zi(()=>{t.pop()}),props:{}});let s={tag:"",props:n,type:""};return s[gt]=(o)=>{throw t.pop(),o},s},Bt=(t)=>{let i=[t],r=Gi(i);return r.values=i,r.Provider=r,tt.push(r),r};var tt=[],ar=(t)=>{let i=[t],r=(n)=>{i.push(n.value);let s;try{s=n.children?(Array.isArray(n.children)?new Wi("",{},n.children):n.children).toString():""}catch(o){throw i.pop(),o}if(s instanceof Promise)return s.finally(()=>i.pop()).then((o)=>d(o,o.callbacks));else return i.pop(),d(s)};return r.values=i,r.Provider=r,r[$t]=Gi(i),tt.push(r),r},N=(t)=>{return t.values.at(-1)};var ht={title:[],script:["src"],style:["data-href"],link:["href"],meta:["name","httpEquiv","charset","itemProp"]},Lt={},wt="data-precedence";var zt={};Fn(zt,{title:()=>yn,style:()=>wn,script:()=>hn,meta:()=>mn,link:()=>Pn,input:()=>An,form:()=>Mn,button:()=>Tn});var lt=(t)=>Array.isArray(t)?t:[t];var sr=new WeakMap,or=(t,i,r,n)=>({buffer:s,context:o})=>{if(!s)return;let u=sr.get(o)||{};sr.set(o,u);let c=u[t]||=[],l=!1,v=ht[t];if(v.length>0)t:for(let[,F]of c)for(let f of v)if((F?.[f]??null)===r?.[f]){l=!0;break t}if(l)s[0]=s[0].replaceAll(i,"");else if(v.length>0)c.push([i,r,n]);else c.unshift([i,r,n]);if(s[0].indexOf("</head>")!==-1){let F;if(n===void 0)F=c.map(([f])=>f);else{let f=[];F=c.map(([g,,w])=>{let A=f.indexOf(w);if(A===-1)f.push(w),A=f.length-1;return[g,A]}).sort((g,w)=>g[1]-w[1]).map(([g])=>g)}F.forEach((f)=>{s[0]=s[0].replaceAll(f,"")}),s[0]=s[0].replace(/(?=<\/head>)/,F.join(""))}},_t=(t,i,r)=>d(new D(t,r,lt(i??[])).toString()),Yt=(t,i,r,n)=>{if("itemProp"in r)return _t(t,i,r);let{precedence:s,blocking:o,...u}=r;if(s=n?s??"":void 0,n)u[wt]=s;let c=new D(t,u,lt(i||[])).toString();if(c instanceof Promise)return c.then((l)=>d(c,[...l.callbacks||[],or(t,l,u,s)]));else return d(c,[or(t,c,u,s)])},yn=({children:t,...i})=>{let r=It();if(r){let n=N(r);if(n==="svg"||n==="head")return new D("title",i,lt(t??[]))}return Yt("title",t,i,!1)},hn=({children:t,...i})=>{let r=It();if(["src","async"].some((n)=>!i[n])||r&&N(r)==="head")return _t("script",t,i);return Yt("script",t,i,!1)},wn=({children:t,...i})=>{if(!["href","precedence"].every((r)=>(r in i)))return _t("style",t,i);return i["data-href"]=i.href,delete i.href,Yt("style",t,i,!0)},Pn=({children:t,...i})=>{if(["onLoad","onError"].some((r)=>(r in i))||i.rel==="stylesheet"&&(!("precedence"in i)||("disabled"in i)))return _t("link",t,i);return Yt("link",t,i,"precedence"in i)},mn=({children:t,...i})=>{let r=It();if(r&&N(r)==="head")return _t("meta",t,i);return Yt("meta",t,i,!1)},ur=(t,{children:i,...r})=>new D(t,r,lt(i??[])),Mn=(t)=>{if(typeof t.action==="function")t.action=yt in t.action?t.action[yt]:void 0;return ur("form",t)},cr=(t,i)=>{if(typeof i.formAction==="function")i.formAction=yt in i.formAction?i.formAction[yt]:void 0;return ur(t,i)},An=(t)=>cr("input",t),Tn=(t)=>cr("button",t);var Hn=new Map([["className","class"],["htmlFor","for"],["crossOrigin","crossorigin"],["httpEquiv","http-equiv"],["itemProp","itemprop"],["fetchPriority","fetchpriority"],["noModule","nomodule"],["formAction","formaction"]]),Pt=(t)=>Hn.get(t)||t,Xt=(t,i)=>{for(let[r,n]of Object.entries(t)){let s=r[0]==="-"||!/[A-Z]/.test(r)?r:r.replace(/[A-Z]/g,(o)=>`-${o.toLowerCase()}`);i(s,n==null?null:typeof n==="number"?!s.match(/^(?:a|border-im|column(?:-c|s)|flex(?:$|-[^b])|grid-(?:ar|[^a])|font-w|li|or|sca|st|ta|wido|z)|ty$/)?`${n}px`:`${n}`:n)}};var Zt=void 0,It=()=>Zt,Bn=(t)=>/[A-Z]/.test(t)&&t.match(/^(?:al|basel|clip(?:Path|Rule)$|co|do|fill|fl|fo|gl|let|lig|i|marker[EMS]|o|pai|pointe|sh|st[or]|text[^L]|tr|u|ve|w)/)?t.replace(/([A-Z])/g,"-$1").toLowerCase():t,Ln=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],_n=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],bi=(t,i)=>{for(let r=0,n=t.length;r<n;r++){let s=t[r];if(typeof s==="string")at(s,i);else if(typeof s==="boolean"||s===null||s===void 0)continue;else if(s instanceof D)s.toStringToBuffer(i);else if(typeof s==="number"||s.isEscaped)i[0]+=s;else if(s instanceof Promise)i.unshift("",s);else bi(s,i)}},D=class{tag;props;key;children;isEscaped=!0;localContexts;constructor(t,i,r){this.tag=t,this.props=i,this.children=r}get type(){return this.tag}get ref(){return this.props.ref||null}toString(){let t=[""];this.localContexts?.forEach(([i,r])=>{i.values.push(r)});try{this.toStringToBuffer(t)}finally{this.localContexts?.forEach(([i])=>{i.values.pop()})}return t.length===1?"callbacks"in t?zi(d(t[0],t.callbacks)).toString():t[0]:Yi(t,t.callbacks)}toStringToBuffer(t){let i=this.tag,r=this.props,{children:n}=this;t[0]+=`<${i}`;let s=Zt&&N(Zt)==="svg"?(o)=>Bn(Pt(o)):(o)=>Pt(o);for(let[o,u]of Object.entries(r))if(o=s(o),o==="children");else if(o==="style"&&typeof u==="object"){let c="";Xt(u,(l,v)=>{if(v!=null)c+=`${c?";":""}${l}:${v}`}),t[0]+=' style="',at(c,t),t[0]+='"'}else if(typeof u==="string")t[0]+=` ${o}="`,at(u,t),t[0]+='"';else if(u===null||u===void 0);else if(typeof u==="number"||u.isEscaped)t[0]+=` ${o}="${u}"`;else if(typeof u==="boolean"&&_n.includes(o)){if(u)t[0]+=` ${o}=""`}else if(o==="dangerouslySetInnerHTML"){if(n.length>0)throw Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");n=[d(u.__html)]}else if(u instanceof Promise)t[0]+=` ${o}="`,t.unshift('"',u);else if(typeof u==="function"){if(!o.startsWith("on")&&o!=="ref")throw Error(`Invalid prop '${o}' of type 'function' supplied to '${i}'.`)}else t[0]+=` ${o}="`,at(u.toString(),t),t[0]+='"';if(Ln.includes(i)&&n.length===0){t[0]+="/>";return}t[0]+=">",bi(n,t),t[0]+=`</${i}>`}},Oi=class extends D{toStringToBuffer(t){let{children:i}=this,r={...this.props};if(i.length)r.children=i.length===1?i[0]:i;let n=this.tag.call(null,r);if(typeof n==="boolean"||n==null)return;else if(n instanceof Promise)if(tt.length===0)t.unshift("",n);else{let s=tt.map((o)=>[o,o.values.at(-1)]);t.unshift("",n.then((o)=>{if(o instanceof D)o.localContexts=s;return o}))}else if(n instanceof D)n.toStringToBuffer(t);else if(typeof n==="number"||n.isEscaped){if(t[0]+=n,n.callbacks)t.callbacks||=[],t.callbacks.push(...n.callbacks)}else at(n,t)}},Wi=class extends D{toStringToBuffer(t){bi(this.children,t)}};var lr=!1,Kt=(t,i,r)=>{if(!lr){for(let n in Lt)zt[n][$t]=Lt[n];lr=!0}if(typeof t==="function")return new Oi(t,i,r);else if(zt[t])return new Oi(zt[t],i,r);else if(t==="svg"||t==="head")return Zt||=ar(""),new D(t,i,[new Oi(Zt,{value:t},r)]);else return new D(t,i,r)};var x=({children:t})=>{return new Wi("",{children:t},Array.isArray(t)?t:t?[t]:[])};var Wt="_hp",Yn={Change:"Input",DoubleClick:"DblClick"},zn={svg:"2000/svg",math:"1998/Math/MathML"},st=[],Qi=new WeakMap,mt=void 0,hr=()=>mt,it=(t)=>("t"in t),Ui={onClick:["click",!1]},vr=(t)=>{if(!t.startsWith("on"))return;if(Ui[t])return Ui[t];let i=t.match(/^on([A-Z][a-zA-Z]+?(?:PointerCapture)?)(Capture)?$/);if(i){let[,r,n]=i;return Ui[t]=[(Yn[r]||r).toLowerCase(),!!n]}return},fr=(t,i)=>mt&&t instanceof SVGElement&&/[A-Z]/.test(i)&&((i in t.style)||i.match(/^(?:o|pai|str|u|ve)/))?i.replace(/([A-Z])/g,"-$1").toLowerCase():i,Zn=(t,i,r)=>{i||={};for(let n in i){let s=i[n];if(n!=="children"&&(!r||r[n]!==s)){n=Pt(n);let o=vr(n);if(o){if(r?.[n]!==s){if(r)t.removeEventListener(o[0],r[n],o[1]);if(s!=null){if(typeof s!=="function")throw Error(`Event handler for "${n}" is not a function`);t.addEventListener(o[0],s,o[1])}}}else if(n==="dangerouslySetInnerHTML"&&s)t.innerHTML=s.__html;else if(n==="ref"){let u;if(typeof s==="function")u=s(t)||(()=>s(null));else if(s&&"current"in s)s.current=t,u=()=>s.current=null;Qi.set(t,u)}else if(n==="style"){let u=t.style;if(typeof s==="string")u.cssText=s;else if(u.cssText="",s!=null)Xt(s,u.setProperty.bind(u))}else{if(n==="value"){let c=t.nodeName;if(c==="INPUT"||c==="TEXTAREA"||c==="SELECT"){if(t.value=s===null||s===void 0||s===!1?null:s,c==="TEXTAREA"){t.textContent=s;continue}else if(c==="SELECT"){if(t.selectedIndex===-1)t.selectedIndex=0;continue}}}else if(n==="checked"&&t.nodeName==="INPUT"||n==="selected"&&t.nodeName==="OPTION")t[n]=s;let u=fr(t,n);if(s===null||s===void 0||s===!1)t.removeAttribute(u);else if(s===!0)t.setAttribute(u,"");else if(typeof s==="string"||typeof s==="number")t.setAttribute(u,s);else t.setAttribute(u,s.toString())}}}if(r)for(let n in r){let s=r[n];if(n!=="children"&&!(n in i)){n=Pt(n);let o=vr(n);if(o)t.removeEventListener(o[0],s,o[1]);else if(n==="ref")Qi.get(t)?.();else t.removeAttribute(fr(t,n))}}},Gn=(t,i)=>{i[q][0]=0,st.push([t,i]);let r=i.tag[$t]||i.tag,n=r.defaultProps?{...r.defaultProps,...i.props}:i.props;try{return[r.call(null,n)]}finally{st.pop()}},wr=(t,i,r,n,s)=>{if(t.vR?.length)n.push(...t.vR),delete t.vR;if(typeof t.tag==="function")t[q][1][pt]?.forEach((o)=>s.push(o));t.vC.forEach((o)=>{if(it(o))r.push(o);else if(typeof o.tag==="function"||o.tag===""){o.c=i;let u=r.length;if(wr(o,i,r,n,s),o.s){for(let c=u;c<r.length;c++)r[c].s=!0;o.s=!1}}else if(r.push(o),o.vR?.length)n.push(...o.vR),delete o.vR})},Wn=(t)=>{for(;;t=t.tag===Wt||!t.vC||!t.pP?t.nN:t.vC[0]){if(!t)return null;if(t.tag!==Wt&&t.e)return t.e}},Pr=(t)=>{if(!it(t)){if(t[q]?.[1][pt]?.forEach((i)=>i[2]?.()),Qi.get(t.e)?.(),t.p===2)t.vC?.forEach((i)=>i.p=2);t.vC?.forEach(Pr)}if(!t.p)t.e?.remove(),delete t.e;if(typeof t.tag==="function")Gt.delete(t),Rt.delete(t),delete t[q][3],t.a=!0},ki=(t,i,r)=>{t.c=i,mr(t,i,r)},Fr=(t,i)=>{if(!i)return;for(let r=0,n=t.length;r<n;r++)if(t[r]===i)return r;return},$r=Symbol(),mr=(t,i,r)=>{let n=[],s=[],o=[];wr(t,i,n,s,o),s.forEach(Pr);let u=r?void 0:i.childNodes,c,l=null;if(r)c=-1;else if(!u.length)c=0;else{let v=Fr(u,Wn(t.nN));if(v!==void 0)l=u[v],c=v;else c=Fr(u,n.find((F)=>F.tag!==Wt&&F.e)?.e)??-1;if(c===-1)r=!0}for(let v=0,F=n.length;v<F;v++,c++){let f=n[v],g;if(f.s&&f.e)g=f.e,f.s=!1;else{let w=r||!f.e;if(it(f)){if(f.e&&f.d)f.e.textContent=f.t;f.d=!1,g=f.e||=document.createTextNode(f.t)}else g=f.e||=f.n?document.createElementNS(f.n,f.tag):document.createElement(f.tag),Zn(g,f.props,f.pP),mr(f,g,w)}if(f.tag===Wt)c--;else if(r){if(!g.parentNode)i.appendChild(g)}else if(u[c]!==g&&u[c-1]!==g)if(u[c+1]===g)i.appendChild(u[c]);else i.insertBefore(g,l||u[c]||null)}if(t.pP)delete t.pP;if(o.length){let v=[],F=[];if(o.forEach(([,f,,g,w])=>{if(f)v.push(f);if(g)F.push(g);w?.()}),v.forEach((f)=>f()),F.length)requestAnimationFrame(()=>{F.forEach((f)=>f())})}},On=(t,i)=>!!(t&&t.length===i.length&&t.every((r,n)=>r[1]===i[n][1])),Rt=new WeakMap,St=(t,i,r)=>{let n=!r&&i.pC;if(r)i.pC||=i.vC;let s;try{if(r||=typeof i.tag=="function"?Gn(t,i):lt(i.props.children),r[0]?.tag===""&&r[0][gt])s=r[0][gt],t[5].push([t,s,i]);let o=n?[...i.pC]:i.vC?[...i.vC]:void 0,u=[],c;for(let l=0;l<r.length;l++){if(Array.isArray(r[l]))r.splice(l,1,...r[l].flat());let v=Mr(r[l]);if(v){if(typeof v.tag==="function"&&!v.tag[qt]){if(tt.length>0)v[q][2]=tt.map((f)=>[f,f.values.at(-1)]);if(t[5]?.length)v[q][3]=t[5].at(-1)}let F;if(o&&o.length){let f=o.findIndex(it(v)?(g)=>it(g):v.key!==void 0?(g)=>g.key===v.key&&g.tag===v.tag:(g)=>g.tag===v.tag);if(f!==-1)F=o[f],o.splice(f,1)}if(F)if(it(v)){if(F.t!==v.t)F.t=v.t,F.d=!0;v=F}else{let f=F.pP=F.props;if(F.props=v.props,F.f||=v.f||i.f,typeof v.tag==="function"){let g=F[q][2];if(F[q][2]=v[q][2]||[],F[q][3]=v[q][3],!F.f&&((F.o||F)===v.o||F.tag[Jt]?.(f,F.props))&&On(g,F[q][2]))F.s=!0}v=F}else if(!it(v)&&mt){let f=N(mt);if(f)v.n=f}if(!it(v)&&!v.s)St(t,v),delete v.f;if(u.push(v),c&&!c.s&&!v.s)for(let f=c;f&&!it(f);f=f.vC?.at(-1))f.nN=v;c=v}}if(i.vR=n?[...i.vC,...o||[]]:o||[],i.vC=u,n)delete i.pC}catch(o){if(i.f=!0,o===$r)if(s)return;else throw o;let[u,c,l]=i[q]?.[3]||[];if(c){let v=()=>Ot([0,!1,t[2]],l),F=Rt.get(l)||[];F.push(v),Rt.set(l,F);let f=c(o,()=>{let g=Rt.get(l);if(g){let w=g.indexOf(v);if(w!==-1)return g.splice(w,1),v()}});if(f){if(t[0]===1)t[1]=!0;else if(St(t,l,[f]),(c.length===1||t!==u)&&l.c){ki(l,l.c,!1);return}throw $r}}throw o}finally{if(s)t[5].pop()}},Mr=(t)=>{if(t===void 0||t===null||typeof t==="boolean")return;else if(typeof t==="string"||typeof t==="number")return{t:t.toString(),d:!0};else{if("vR"in t)t={tag:t.tag,props:t.props,key:t.key,f:t.f,type:t.tag,ref:t.props.ref,o:t.o||t};if(typeof t.tag==="function")t[q]=[0,[]];else{let i=zn[t.tag];if(i)mt||=Bt(""),t.props.children=[{tag:mt,props:{value:t.n=`http://www.w3.org/${i}`,children:t.props.children}}]}return t}},Ar=(t,i,r)=>{if(t.c===i)t.c=r,t.vC.forEach((n)=>Ar(n,i,r))},gr=(t,i)=>{i[q][2]?.forEach(([r,n])=>{r.values.push(n)});try{St(t,i,void 0)}catch{return}if(i.a){delete i.a;return}if(i[q][2]?.forEach(([r])=>{r.values.pop()}),t[0]!==1||!t[1])ki(i,i.c,!1)},Gt=new WeakMap,yr=[],Ot=async(t,i)=>{t[5]||=[];let r=Gt.get(i);if(r)r[0](void 0);let n,s=new Promise((o)=>n=o);if(Gt.set(i,[n,()=>{if(t[2])t[2](t,i,(o)=>{gr(o,i)}).then(()=>n(i));else gr(t,i),n(i)}]),yr.length)yr.at(-1).add(i);else{await Promise.resolve();let o=Gt.get(i);if(o)Gt.delete(i),o[1]()}return s},bn=(t,i)=>{let r=[];r[5]=[],r[4]=!0,St(r,t,void 0),r[4]=!1;let n=document.createDocumentFragment();ki(t,n,!0),Ar(t,n,i),i.replaceChildren(n)},bt=(t,i)=>{bn(Mr({tag:"",props:{children:t}}),i)};var Ci=(t,i,r)=>({tag:Wt,props:{children:t},key:r,e:i,p:1});var Un=0,pt=1,Qn=2,kn=3,Cn=4,qi=new WeakMap,Ji=(t,i)=>!t||!i||t.length!==i.length||i.some((r,n)=>r!==t[n]);var qn=void 0;var Tr=[];var L=(t)=>{let i=()=>typeof t==="function"?t():t,r=st.at(-1);if(!r)return[i(),()=>{}];let[,n]=r,s=n[q][1][Un]||=[],o=n[q][0]++;return s[o]||=[i(),(u)=>{let c=qn,l=s[o];if(typeof u==="function")u=u(l[0]);if(!Object.is(u,l[0]))if(l[0]=u,Tr.length){let[v,F]=Tr.at(-1);Promise.all([v===3?n:Ot([v,!1,c],n),F]).then(([f])=>{if(!f||!(v===2||v===3))return;let g=f.vC;requestAnimationFrame(()=>{setTimeout(()=>{if(g!==f.vC)return;Ot([v===3?1:0,!1,c],f)})})})}else Ot([0,!1,c],n)}]};var Jn=(t,i,r)=>{let n=st.at(-1);if(!n)return;let[,s]=n,o=s[q][1][pt]||=[],u=s[q][0]++,[c,,l]=o[u]||=[];if(Ji(c,r)){if(l)l();let v=()=>{F[t]=void 0,F[2]=i()},F=[r,void 0,void 0,void 0,void 0];F[t]=v,o[u]=F}},U=(t,i)=>Jn(3,t,i);var P=(t,i)=>{let r=st.at(-1);if(!r)return t;let[,n]=r,s=n[q][1][Qn]||=[],o=n[q][0]++,u=s[o];if(Ji(u?.[1],i))s[o]=[t,i];else t=s[o][0];return t},I=(t)=>{let i=st.at(-1);if(!i)return{current:t};let[,r]=i,n=r[q][1][Cn]||=[],s=r[q][0]++;return n[s]||={current:t}},Ii=(t)=>{let i=qi.get(t);if(i){if(i.length===2)throw i[1];return i[0]}throw t.then((r)=>qi.set(t,[r]),(r)=>qi.set(t,[void 0,r])),t},Xi=(t,i)=>{let r=st.at(-1);if(!r)return t();let[,n]=r,s=n[q][1][kn]||=[],o=n[q][0]++,u=s[o];if(Ji(u?.[1],i))s[o]=[t(),i];return s[o][0]};var Br=Bt({pending:!1,data:null,method:null,action:null}),Hr=new Set,Lr=(t)=>{Hr.add(t),t.finally(()=>Hr.delete(t))};var Ki=(t,i)=>{return Xi(()=>(r)=>{let n;if(t){if(typeof t==="function")n=t(r)||(()=>{t(null)});else if(t&&"current"in t)t.current=r,n=()=>{t.current=null}}let s=i(r);return()=>{s?.(),n?.()}},[t])},_r=Object.create(null),Yr=Object.create(null),Ut=(t,i,r,n,s)=>{if(i?.itemProp)return{tag:t,props:i,type:t,ref:i.ref};let o=document.head,{onLoad:u,onError:c,precedence:l,blocking:v,...F}=i,f=null,g=!1,w=ht[t],A=void 0;if(w.length>0){let B=o.querySelectorAll(t);t:for(let _ of B)for(let T of ht[t])if(_.getAttribute(T)===i[T]){f=_;break t}if(!f){let _=w.reduce((T,k)=>i[k]===void 0?T:`${T}-${k}-${i[k]}`,t);g=!Yr[_],f=Yr[_]||=(()=>{let T=document.createElement(t);for(let k of w){if(i[k]!==void 0)T.setAttribute(k,i[k]);if(i.rel)T.setAttribute("rel",i.rel)}return T})()}}else A=o.querySelectorAll(t);if(l=n?l??"":void 0,n)F[wt]=l;let Q=P((B)=>{if(w.length>0){let _=!1;for(let T of o.querySelectorAll(t)){if(_&&T.getAttribute(wt)!==l){o.insertBefore(B,T);return}if(T.getAttribute(wt)===l)_=!0}o.appendChild(B)}else if(A){let _=!1;for(let T of A)if(T===B){_=!0;break}if(!_)o.insertBefore(B,o.contains(A[0])?A[0]:o.querySelector(t));A=void 0}},[l]),m=Ki(i.ref,(B)=>{let _=w[0];if(r===2)B.innerHTML="";if(g||A)Q(B);if(!c&&!u)return;let T=_r[B.getAttribute(_)]||=new Promise((k,S)=>{B.addEventListener("load",k),B.addEventListener("error",S)});if(u)T=T.then(u);if(c)T=T.catch(c);T.catch(()=>{})});if(s&&v==="render"){let B=ht[t][0];if(i[B]){let _=i[B],T=_r[_]||=new Promise((k,S)=>{Q(f),f.addEventListener("load",k),f.addEventListener("error",S)});Ii(T)}}let z={tag:t,type:t,props:{...F,ref:m},ref:m};if(z.p=r,f)z.e=f;return Ci(z,o)},In=(t)=>{let i=hr();if((i&&N(i))?.endsWith("svg"))return{tag:"title",props:t,type:"title",ref:t.ref};return Ut("title",t,void 0,!1,!1)},Xn=(t)=>{if(!t||["src","async"].some((i)=>!t[i]))return{tag:"script",props:t,type:"script",ref:t.ref};return Ut("script",t,1,!1,!0)},Kn=(t)=>{if(!t||!["href","precedence"].every((i)=>(i in t)))return{tag:"style",props:t,type:"style",ref:t.ref};return t["data-href"]=t.href,delete t.href,Ut("style",t,2,!0,!0)},Rn=(t)=>{if(!t||["onLoad","onError"].some((i)=>(i in t))||t.rel==="stylesheet"&&(!("precedence"in t)||("disabled"in t)))return{tag:"link",props:t,type:"link",ref:t.ref};return Ut("link",t,1,"precedence"in t,!0)},Sn=(t)=>{return Ut("meta",t,void 0,!1,!1)},zr=Symbol(),pn=(t)=>{let{action:i,...r}=t;if(typeof i!=="function")r.action=i;let[n,s]=L([null,!1]),o=P(async(v)=>{let F=v.isTrusted?i:v.detail[zr];if(typeof F!=="function")return;v.preventDefault();let f=new FormData(v.target);s([f,!0]);let g=F(f);if(g instanceof Promise)Lr(g),await g;s([null,!0])},[]),u=Ki(t.ref,(v)=>{return v.addEventListener("submit",o),()=>{v.removeEventListener("submit",o)}}),[c,l]=n;return n[1]=!1,{tag:Br,props:{value:{pending:c!==null,data:c,method:c?"post":null,action:c?i:null},children:{tag:"form",props:{...r,ref:u},type:"form",ref:u}},f:l}},Zr=(t,{formAction:i,...r})=>{if(typeof i==="function"){let n=P((s)=>{s.preventDefault(),s.currentTarget.form.dispatchEvent(new CustomEvent("submit",{detail:{[zr]:i}}))},[]);r.ref=Ki(r.ref,(s)=>{return s.addEventListener("click",n),()=>{s.removeEventListener("click",n)}})}return{tag:t,props:r,type:t,ref:r.ref}},en=(t)=>Zr("input",t),dn=(t)=>Zr("button",t);Object.assign(Lt,{title:In,script:Xn,style:Kn,link:Rn,meta:Sn,form:pn,input:en,button:dn});var Mt="#222244,#2D2B55,#B362FF,#FFFFFF,#2D2B55,#A599E9,#3AD900,#FAD000,#3B3768,#7E74A8",Ri=[{name:"meet-ai Default",schema:"#194234,#9c2e33,#E7C12e,#194234,#9c2e33,#FFFFFF,#ee6030,#9C2E33,#9c2e33,#FFFFFF"},{name:"One Dark Pro",schema:"#282C34,#2C313A,#528BFF,#FFFFFF,#2C313A,#ABB2BF,#98C379,#E06C75,#3E4451,#5C6370"},{name:"Dracula",schema:"#282A36,#343746,#BD93F9,#FFFFFF,#343746,#F8F8F2,#50FA7B,#FF79C6,#44475A,#6272A4"},{name:"GitHub Dark",schema:"#0D1117,#161B22,#1F6FEB,#FFFFFF,#161B22,#C9D1D9,#3FB950,#F85149,#21262D,#8B949E"},{name:"Nord",schema:"#2E3440,#3B4252,#88C0D0,#ECEFF4,#3B4252,#D8DEE9,#A3BE8C,#BF616A,#434C5E,#4C566A"},{name:"Monokai",schema:"#272822,#3E3D32,#F92672,#FFFFFF,#3E3D32,#F8F8F2,#A6E22E,#F92672,#49483E,#75715E"},{name:"Solarized Dark",schema:"#002B36,#073642,#2AA198,#FFFFFF,#073642,#839496,#859900,#DC322F,#073642,#586E75"},{name:"Tokyo Night",schema:"#1A1B26,#24283B,#7AA2F7,#FFFFFF,#24283B,#A9B1D6,#73DACA,#F7768E,#2F3549,#565F89"},{name:"Catppuccin Mocha",schema:"#1E1E2E,#313244,#89B4FA,#FFFFFF,#313244,#CDD6F4,#A6E3A1,#F38BA8,#45475A,#6C7086"},{name:"Gruvbox Dark",schema:"#282828,#3C3836,#FABD2F,#282828,#3C3836,#EBDBB2,#B8BB26,#FB4934,#504945,#928374"},{name:"Ayu Dark",schema:"#0B0E14,#131721,#E6B450,#0B0E14,#131721,#BFBDB6,#AAD94C,#F07178,#11151C,#565B66"},{name:"Ayu Mirage",schema:"#1F2430,#272D38,#FFCC66,#1F2430,#272D38,#CCCAC2,#D5FF80,#F28779,#171B24,#5C6166"},{name:"Ayu Light",schema:"#FAFAFA,#F0F0F0,#FF9940,#FFFFFF,#F0F0F0,#575F66,#86B300,#F07171,#E8E8E8,#ABB0B6"},{name:"Night Owl",schema:"#011627,#0B2942,#7E57C2,#FFFFFF,#0B2942,#D6DEEB,#ADDB67,#EF5350,#122D42,#5F7E97"},{name:"One Light",schema:"#FAFAFA,#EAEAEB,#4078F2,#FFFFFF,#EAEAEB,#383A42,#50A14F,#E45649,#D4D4D4,#A0A1A7"},{name:"Shades of Purple",schema:"#222244,#2D2B55,#B362FF,#FFFFFF,#2D2B55,#A599E9,#3AD900,#FAD000,#3B3768,#7E74A8"}],Si=["Column BG","Menu Hover","Active Item","Active Text","Hover Item","Text Color","Presence","Badge","Divider","Alt Text"],j={apiKey:"meet-ai-key",handle:"meet-ai-handle",colorSchema:"meet-ai-color-schema"};function et(){return localStorage.getItem(j.apiKey)}function Or(t){localStorage.setItem(j.apiKey,t)}function Dn(){localStorage.removeItem(j.apiKey)}function vt(){let t=et(),i={"Content-Type":"application/json"};if(t)i.Authorization="Bearer "+t;return i}async function br(){let t=await fetch("/api/rooms",{headers:vt()});if(t.status===401)return Dn(),location.href="/key",[];return t.json()}async function Ur(t){let i=await fetch(`/api/rooms/${t}/messages`,{headers:vt()});if(!i.ok)return[];return i.json()}async function Qr(t,i){let r=await fetch(`/api/rooms/${t}/messages?since_seq=${i}`,{headers:vt()});if(!r.ok)return[];return r.json()}async function kr(t){let i=await fetch(`/api/rooms/${t}/logs`,{headers:vt()});if(!i.ok)return[];return(await i.json()).map((n)=>({...n,type:"log"}))}async function Qt(t,i,r,n){let s=await fetch(`/api/rooms/${t}/messages`,{method:"POST",headers:vt(),body:JSON.stringify({sender:i,content:r,...n?.length&&{attachment_ids:n}})});if(!s.ok)throw Error("HTTP "+s.status);return s.json()}async function dt(t){let i=await fetch("/api/auth/claim/"+encodeURIComponent(t));if(!i.ok)throw Error("Link expired or invalid");return i.json()}async function Cr(){let t=await fetch("/api/auth/share",{method:"POST",headers:vt()});if(!t.ok)throw Error("Failed to create share link");return t.json()}async function qr(t,i){let r=et(),n={};if(r)n.Authorization="Bearer "+r;let s=new FormData;s.append("file",i);let o=await fetch(`/api/rooms/${t}/upload`,{method:"POST",headers:n,body:s});if(!o.ok)throw Error("Upload failed: HTTP "+o.status);return o.json()}async function Jr(t){let i=await fetch(`/api/rooms/${t}/attachment-counts`,{headers:vt()});if(!i.ok)return{};return i.json()}function a(t,i,r){let n;if(!i||!("children"in i))n=Kt(t,i,[]);else{let s=i.children;n=Array.isArray(s)?Kt(t,i,s):Kt(t,i,[s])}return n.key=r,n}function Nt({onLogin:t}){let[i,r]=L(""),[n,s]=L(!1),o=I(null);U(()=>{o.current?.focus()},[]);let u=P(async()=>{let l=o.current?.value.trim();if(!l)return;r(""),s(!0);try{if(l.startsWith("http")&&l.includes("/auth/")){let v=l.split("/auth/").pop()?.split("?")[0]?.split("#")[0];if(!v){r("Invalid link"),s(!1);return}let F=await dt(v);t(F.api_key)}else if(l.startsWith("mai_"))t(l);else r("Invalid link or key"),s(!1)}catch(v){r(v.message||"Connection error. Try again."),s(!1)}},[t]),c=P((l)=>{if(l.key==="Enter")l.preventDefault(),u()},[u]);return a("div",{class:"main",style:"height:100dvh",children:a("div",{class:"login-prompt",children:[a("h2",{children:"Welcome to meet-ai"},void 0,!1,void 0,this),a("p",{children:"Paste a login link from another device or enter your API key to continue."},void 0,!1,void 0,this),a("div",{class:"login-prompt-form",children:[a("input",{ref:o,type:"text",placeholder:"Paste login link or API key",autocomplete:"off",spellcheck:!1,onKeyDown:c},void 0,!1,void 0,this),a("button",{onClick:u,disabled:n,children:n?"...":"Go"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"login-error",children:i},void 0,!1,void 0,this),a("div",{class:"login-or",children:["or ",a("a",{href:"/",children:"get an API key"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function Dt({token:t,onLogin:i}){let[r,n]=L(""),[s,o]=L(!1),u=window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches,c=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,l=/Android/.test(navigator.userAgent),v=P(async()=>{o(!0),n("");try{let g=await dt(t);i(g.api_key)}catch(g){n(g.message||"Connection error. Try again."),o(!1)}},[t,i]),F=s?"Connecting...":u?"Connect":"Connect in browser",f=null;if(!u)if(c)f=a("div",{class:"install-steps",children:[a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"1"},void 0,!1,void 0,this),a("div",{class:"step-text",children:["Tap the ",a("strong",{children:"Share"},void 0,!1,void 0,this)," button at the bottom of Safari"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"2"},void 0,!1,void 0,this),a("div",{class:"step-text",children:["Scroll down and tap ",a("strong",{children:"Add to Home Screen"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"3"},void 0,!1,void 0,this),a("div",{class:"step-text",children:["Tap ",a("strong",{children:"Add"},void 0,!1,void 0,this)," in the top right corner"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"4"},void 0,!1,void 0,this),a("div",{class:"step-text",children:["Open the app from your Home Screen and tap ",a("strong",{children:"Connect"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);else if(l)f=a("div",{class:"install-steps",children:[a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"1"},void 0,!1,void 0,this),a("div",{class:"step-text",children:["Tap the ",a("strong",{children:"menu"},void 0,!1,void 0,this)," button ⋮ in Chrome"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"2"},void 0,!1,void 0,this),a("div",{class:"step-text",children:["Tap ",a("strong",{children:"Install app"},void 0,!1,void 0,this)," or ",a("strong",{children:"Add to Home screen"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"3"},void 0,!1,void 0,this),a("div",{class:"step-text",children:["Open the app from your Home Screen and tap ",a("strong",{children:"Connect"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);else f=a("div",{class:"install-steps",children:[a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"1"},void 0,!1,void 0,this),a("div",{class:"step-text",children:"Install the app using your browser's install option"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"install-step",children:[a("div",{class:"step-num",children:"2"},void 0,!1,void 0,this),a("div",{class:"step-text",children:["Open the app and tap ",a("strong",{children:"Connect"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);return a("div",{class:"main",style:"height:100dvh",children:a("div",{class:"token-screen",children:[a("h2",{children:u?"Connect to chat":"Install meet-ai"},void 0,!1,void 0,this),a("p",{children:u?"Tap the button below to activate your session.":"Add meet-ai to your Home Screen for the best experience."},void 0,!1,void 0,this),u?a("div",{class:"token-card",children:[a("button",{type:"button",class:"connect-btn",onClick:v,disabled:s,children:F},void 0,!1,void 0,this),a("div",{class:"connect-error",children:r},void 0,!1,void 0,this)]},void 0,!0,void 0,this):a(x,{children:[f&&a("div",{class:"token-card",children:f},void 0,!1,void 0,this),a("div",{class:"separator"},void 0,!1,void 0,this),a("p",{class:"alt-text",children:"Or connect directly in this browser:"},void 0,!1,void 0,this),a("div",{class:"token-card",children:[a("button",{type:"button",class:"connect-btn",onClick:v,disabled:s,children:F},void 0,!1,void 0,this),a("div",{class:"connect-error",children:r},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function Et({onSettingsClick:t,onCloseClick:i}){return a("div",{class:"sidebar-header",children:[a("span",{children:"meet-ai"},void 0,!1,void 0,this),a("div",{class:"sidebar-header-actions",children:[a("button",{title:"Color Settings",onClick:t,children:a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"},void 0,!1,void 0,this),a("circle",{cx:"12",cy:"12",r:"3"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),a("button",{class:"sidebar-close-btn",title:"Close sidebar",onClick:i,children:a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("path",{d:"M18 6L6 18"},void 0,!1,void 0,this),a("path",{d:"M6 6l12 12"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function Vt({rooms:t,currentRoomId:i,onSelectRoom:r}){return a(x,{children:[a("div",{class:"sidebar-section-label",children:"Channels"},void 0,!1,void 0,this),a("div",{class:"room-list",children:t.map((n)=>a("div",{class:`room-item${n.id===i?" active":""}`,onClick:()=>r(n),children:[a("span",{class:"room-hash",children:"#"},void 0,!1,void 0,this)," ",n.name]},n.id,!0,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function xt({onIOSInstall:t}){let[i,r]=L(null),[n,s]=L(!1),[o,u]=L(!1);U(()=>{if(window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches)return;if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){s(!0),u(!0);return}let F=(g)=>{g.preventDefault(),r(g),u(!0)};window.addEventListener("beforeinstallprompt",F);let f=()=>{u(!1),r(null)};return window.addEventListener("appinstalled",f),()=>{window.removeEventListener("beforeinstallprompt",F),window.removeEventListener("appinstalled",f)}},[]);let c=P(async()=>{if(n){t();return}if(i){await i.prompt();let{outcome:l}=await i.userChoice;if(l==="accepted")u(!1);r(null)}},[n,i,t]);if(!o)return null;return a("button",{class:"install-btn",title:"Install app",onClick:c,children:[a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},void 0,!1,void 0,this),a("polyline",{points:"7 10 12 15 17 10"},void 0,!1,void 0,this),a("line",{x1:"12",y1:"15",x2:"12",y2:"3"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"Install"]},void 0,!0,void 0,this)}function jt({userName:t,onNameChange:i,onInstallClick:r}){let[n,s]=L(!1),[o,u]=L(t),c=P(()=>{u(t),s(!0)},[t]),l=P(()=>{let F=o.trim();if(F)i(F);s(!1)},[o,i]),v=P((F)=>{if(F.key==="Enter")F.preventDefault(),l();if(F.key==="Escape")u(t),s(!1)},[l,t]);return a("div",{class:"sidebar-footer",children:[a("span",{class:"user-presence",style:"width:8px;height:8px;border-radius:50%;background:var(--c-presence);flex-shrink:0;"},void 0,!1,void 0,this),n?a("input",{type:"text",value:o,maxLength:30,style:"background:var(--c-hover-item);color:inherit;border:1px solid var(--c-sidebar-border);border-radius:4px;padding:2px 6px;font-size:16px;width:130px;outline:none;font-weight:600;",onInput:(F)=>u(F.target.value),onKeyDown:v,onBlur:l,ref:(F)=>F?.focus()},void 0,!1,void 0,this):a("span",{class:"user-handle",title:"Click to change your name",onClick:c,children:t},void 0,!1,void 0,this),a("div",{class:"sidebar-footer-actions",children:[a(xt,{onIOSInstall:r},void 0,!1,void 0,this),a("button",{title:"API Key settings",onClick:()=>{location.href="/key"},children:a("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:a("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function ti({rooms:t,currentRoomId:i,userName:r,isOpen:n,onSelectRoom:s,onNameChange:o,onSettingsClick:u,onClose:c,onInstallClick:l}){return a("aside",{class:`sidebar${n?" open":""}`,children:[a(Et,{onSettingsClick:u,onCloseClick:c},void 0,!1,void 0,this),a(Vt,{rooms:t,currentRoomId:i,onSelectRoom:s},void 0,!1,void 0,this),a(jt,{userName:r,onNameChange:o,onInstallClick:l},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function ii({onClick:t}){return a("div",{class:"sidebar-backdrop",onClick:t,style:"display:block"},void 0,!1,void 0,this)}function ri({roomName:t,showInvite:i,showTeamToggle:r,onMobileToggle:n,onTeamToggle:s,onInviteClick:o}){return a("div",{class:"main-header",children:[a("div",{class:"main-header-left",children:[a("button",{class:"mobile-toggle",onClick:n,children:"☰"},void 0,!1,void 0,this),a("span",{class:"channel-hash",children:"#"},void 0,!1,void 0,this),a("span",{class:"channel-name",children:t},void 0,!1,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"main-header-right",children:[i&&a("button",{class:"invite-btn",title:"Open on phone",onClick:o,children:a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},void 0,!1,void 0,this),a("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),r&&a("button",{class:"team-toggle",title:"Team members",onClick:s,children:a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},void 0,!1,void 0,this),a("circle",{cx:"9",cy:"7",r:"4"},void 0,!1,void 0,this),a("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"},void 0,!1,void 0,this),a("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function ni({message:t="Select or create a channel to start chatting",showBackLink:i}){return a("div",{class:"empty-state",children:[a("div",{class:"icon",children:"#"},void 0,!1,void 0,this),a("div",{children:t},void 0,!1,void 0,this),i&&a("div",{style:"font-size:13px;margin-top:4px",children:a("a",{href:"/chat",style:"color:var(--c-primary)",children:"Back to channels"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function ai({rooms:t,onSelectRoom:i}){if(t.length===0)return a(ni,{message:"No channels yet — create one to get started"},void 0,!1,void 0,this);let r=[...t].reverse();return a("div",{class:"lobby-view",children:a("div",{class:"lobby-room-list",children:r.map((n)=>a("div",{class:"lobby-room-item",onClick:()=>i(n),children:[a("span",{class:"lobby-room-name",children:[a("span",{class:"room-hash",children:"#"},void 0,!1,void 0,this)," ",n.name]},void 0,!0,void 0,this),a("span",{class:"lobby-room-chevron",children:"›"},void 0,!1,void 0,this)]},n.id,!0,void 0,this))},void 0,!1,void 0,this)},void 0,!1,void 0,this)}function pi(t){let i=t.split(",").map((r)=>r.trim());while(i.length<10)i.push("#888888");return i}function si(t){if(t=t.replace("#",""),t.length===3)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];let i=parseInt(t,16);return[i>>16&255,i>>8&255,i&255]}function ot(t){let[i,r,n]=si(t).map((s)=>{return s=s/255,s<=0.04045?s/12.92:Math.pow((s+0.055)/1.055,2.4)});return 0.2126*i+0.7152*r+0.0722*n}function E(t,i){let r=ot(t),n=ot(i),s=Math.max(r,n),o=Math.min(r,n);return(s+0.05)/(o+0.05)}function Ir(t,i,r){if(E(t,i)>=r)return t;let n=E("#FFFFFF",i),s=E("#000000",i);return n>=s?"#FFFFFF":"#000000"}function En(t){if(ot(t)>=0.5)return"#FFFFFF";let[r,n,s]=si(t);return"#"+[r,n,s].map((o)=>Math.max(0,Math.round(o*0.78+2)).toString(16).padStart(2,"0")).join("")}function Vn(t,i){if(ot(t)>=0.5)return"#1D1C1D";return i||"#ABB2BF"}function xn(t,i){if(ot(t)>=0.5)return"#E0E0E0";return i||"#3e4451"}function rt(t){let i=pi(t),r=document.documentElement,n=ot(i[0])<0.5,s=Ir(i[5],i[0],3),o=Ir(i[3],i[2],3);r.style.setProperty("--c-sidebar-bg",i[0]),r.style.setProperty("--c-sidebar-text",s),r.style.setProperty("--c-active-item",i[2]),r.style.setProperty("--c-active-item-text",o),r.style.setProperty("--c-hover-item",i[4]||i[1]),r.style.setProperty("--c-presence",i[6]),r.style.setProperty("--c-primary",i[6]),r.style.setProperty("--c-sidebar-border",i[8]||(n?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"));let u=En(i[0]),c=Vn(u,s),l=xn(i[0],i[8]);r.style.setProperty("--c-header-bg",u),r.style.setProperty("--c-header-text",c),r.style.setProperty("--c-chat-bg",u),r.style.setProperty("--c-msg-text",c),r.style.setProperty("--c-border",l),document.body.style.background=u,r.style.setProperty("--c-input-bg",n?i[0]:u);let v=E("#FFFFFF",i[6]),F=E("#000000",i[6]);r.style.setProperty("--c-primary-text",v>=F?"#FFFFFF":"#000000")}function oi(t){let i=0;for(let n=0;n<t.length;n++)i=t.charCodeAt(n)+((i<<5)-i);return`hsl(${(i%360+360)%360}, 60%, 45%)`}function Xr(t){let i=0;for(let n=0;n<t.length;n++)i=t.charCodeAt(n)+((i<<5)-i);return`hsl(${(i%360+360)%360}, 50%, 35%)`}var ei=(()=>{let t=document.createElement("div");return t.style.display="none",document.body.appendChild(t),t})();function di(t){ei.style.color="",ei.style.color=t;let r=getComputedStyle(ei).color.match(/(\d+)/g);if(!r||r.length<3)return t;return"#"+r.slice(0,3).map((n)=>parseInt(n).toString(16).padStart(2,"0")).join("")}function ft(t){let i=di(t),r=getComputedStyle(document.documentElement).getPropertyValue("--c-chat-bg").trim()||"#FFFFFF";if(E(i,r)>=3)return t;let n=ot(r),[s,o,u]=si(i);if(n<0.5){for(let c=1.5;c<=3;c+=0.3){let l="#"+[s,o,u].map((v)=>Math.min(255,Math.round(v*c)).toString(16).padStart(2,"0")).join("");if(E(l,r)>=3)return l}return"#CCCCCC"}else{for(let c=0.5;c>=0.2;c-=0.1){let l="#"+[s,o,u].map((v)=>Math.round(v*c).toString(16).padStart(2,"0")).join("");if(E(l,r)>=3)return l}return"#555555"}}var kt=rr(Kr(),1),Sr=rr(Rr(),1);kt.default.extend(Sr.default);function xi(t){return kt.default.utc(t)}function pr(t){if(!t)return"";let i=kt.default.utc(t).local();return i.isValid()?i.format("HH:mm"):""}function ui(t){if(!t)return"";let i=kt.default.utc(t).local();return i.isValid()?i.format("HH:mm:ss"):""}function er(t){return DOMPurify.sanitize(marked.parse(t,{breaks:!0}))}function dr(t){if(window.highlightAllCode)window.highlightAllCode(t)}function jn(t){let i=document.createElement("div");return i.textContent=t,i.innerHTML}function ci({sender:t,content:i,color:r,timestamp:n,tempId:s,status:o="sent",onRetry:u,attachmentCount:c}){let l=I(null),v=r?ft(r):oi(t),F=r?ft(r):Xr(t),f=t.slice(0,2).toUpperCase(),g=di(F),w=E("#FFFFFF",g)>=E("#000000",g)?"#FFFFFF":"#000000",A=o==="pending"?" msg-pending":o==="failed"?" msg-failed":"",Q=o==="pending"?"sending":o==="failed"?"failed":pr(n);return U(()=>{if(l.current)l.current.innerHTML=er(i),dr(l.current)},[i]),a("div",{class:`msg${A}`,"data-temp-id":s,"data-content":s?i:void 0,children:[a("div",{class:"msg-avatar",style:`background:${F};color:${w}`,children:jn(f)},void 0,!1,void 0,this),a("div",{class:"msg-body",children:[a("div",{class:"msg-header",children:[a("span",{class:"msg-sender",style:`color:${v}`,children:t},void 0,!1,void 0,this),a("span",{class:"msg-time",children:Q},void 0,!1,void 0,this),o==="failed"&&u&&a("span",{class:"msg-retry",onClick:u,style:"display:inline",children:"retry"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"msg-content",ref:l},void 0,!1,void 0,this),c&&c>0?a("div",{class:"msg-attachments-label",children:["\uD83D\uDCCE"," ",c," attachment",c>1?"s":""]},void 0,!0,void 0,this):null]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function ta(t){let i=[...new Set(t.map((n)=>n.sender))],r=t.length;if(i.length===1)return`${r} log ${r===1?"entry":"entries"} from ${i[0]}`;return`${r} log entries from ${i.length} agents`}function li({logs:t}){let[i,r]=L(!1);if(t.length===0)return null;let n=ui(t[0].created_at),s=t.length>1?ui(t[t.length-1].created_at):null,o=s&&s!==n?`${n} - ${s}`:n;return a("div",{class:"log-group",children:[a("div",{class:"log-group-header",onClick:()=>r(!i),children:[a("span",{class:"log-group-toggle",children:i?"▾":"▸"},void 0,!1,void 0,this),a("span",{class:"log-group-summary",children:ta(t)},void 0,!1,void 0,this),a("span",{class:"log-group-time",children:o},void 0,!1,void 0,this)]},void 0,!0,void 0,this),i&&a("div",{class:"log-group-entries",children:t.map((u,c)=>{let l=u.color?ft(u.color):oi(u.sender);return a("div",{class:"log-entry",children:[a("span",{class:"log-entry-time",children:ui(u.created_at)},void 0,!1,void 0,this),a("span",{class:"log-entry-sender",style:`color:${l}`,children:[u.sender,":"]},void 0,!0,void 0,this),a("span",{class:"log-entry-content",children:u.content},void 0,!1,void 0,this)]},`${u.sender}-${u.created_at}-${c}`,!0,void 0,this)})},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function vi({count:t,onClick:i}){if(t===0)return null;return a("div",{class:"new-messages-pill",onClick:i,children:[t," new message",t===1?"":"s"," ↓"]},void 0,!0,void 0,this)}function Nr(t){let i=I(!0),[r,n]=L(!0),s=I(0);U(()=>{let c=t.current;if(!c)return;let l=()=>{let v=c.scrollHeight-c.scrollTop-c.clientHeight<150;i.current=v,n(v)};return c.addEventListener("scroll",l,{passive:!0}),()=>c.removeEventListener("scroll",l)},[t]);let o=P(()=>i.current??!0,[]),u=P(()=>{cancelAnimationFrame(s.current),s.current=requestAnimationFrame(()=>{let c=t.current;if(!c)return;c.scrollTop=c.scrollHeight,i.current=!0,n(!0)})},[t]);return U(()=>()=>cancelAnimationFrame(s.current),[]),{isAtBottom:o,atBottom:r,scrollToBottom:u}}function ia(t){let i=new Map,r=[];for(let u=0;u<t.length;u++){let c=t[u];if(c.type==="log"&&c.message_id){let l=i.get(c.message_id)||[];l.push(c),i.set(c.message_id,l)}else r.push({index:u,msg:c})}let n=[],s=[];function o(){if(s.length>0)n.push({kind:"log-group",logs:s}),s=[]}for(let{index:u,msg:c}of r)if(c.type==="log")s.push(c);else{o();let l=c.id?i.get(c.id):void 0;if(c.sender!=="hook")n.push({kind:"message",msg:c,index:u});if(l&&l.length>0)n.push({kind:"log-group",logs:l})}return o(),n}function fi({messages:t,attachmentCounts:i,unreadCount:r,forceScrollCounter:n,onScrollToBottom:s,onRetry:o,connected:u=!0}){let c=I(null),{isAtBottom:l,atBottom:v,scrollToBottom:F}=Nr(c),f=I(0),g=I(!0);if(t.length>(f.current??0))g.current=l();U(()=>{if(t.length>(f.current??0)&&g.current)F();f.current=t.length},[t.length]),U(()=>{if(v&&r>0)s()},[v,r,s]),U(()=>{if(n>0)F()},[n]),U(()=>{F()},[]);let w=ia(t);return a("div",{class:"messages",ref:c,children:[!u&&a("div",{class:"reconnecting-bar",children:"Reconnecting..."},void 0,!1,void 0,this),w.map((A,Q)=>{if(A.kind==="log-group"){let B=A.logs[0];return a(li,{logs:A.logs},`log-group-${B.sender}-${B.created_at}-${Q}`,!1,void 0,this)}let m=A.msg,z=m.id&&i?i[m.id]:void 0;return a(ci,{sender:m.sender,content:m.content,color:m.color,timestamp:m.created_at,tempId:m.tempId,status:m.status,onRetry:m.tempId&&o?()=>o(m.tempId):void 0,attachmentCount:z},m.tempId||`${m.sender}-${m.created_at}-${A.index}`,!1,void 0,this)}),a(vi,{count:r,onClick:()=>{F(),s()}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function ra(t,i){let{selectionStart:r,selectionEnd:n,value:s}=t,o=s.slice(r,n),u;switch(i){case"bold":u=`**${o||"text"}**`;break;case"italic":u=`*${o||"text"}*`;break;case"code":u=o.includes(`
`)?`\`\`\`
${o||"code"}
\`\`\``:`\`${o||"code"}\``;break;case"link":u=`[${o||"text"}](url)`;break;default:return}t.value=s.slice(0,r)+u+s.slice(n),t.focus();let c=r+u.length;t.setSelectionRange(c,c)}var V=(t)=>t.preventDefault();function Fi({textareaRef:t,onSend:i,onAttach:r}){let n=(s)=>{if(t.current)ra(t.current,s)};return a("div",{class:"chat-input-toolbar",children:[r&&a("button",{class:"fmt-btn",title:"Attach file",onMouseDown:V,onTouchStart:V,onTouchEnd:r,onClick:r,children:a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:a("path",{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),a("button",{class:"fmt-btn",title:"Bold",onMouseDown:V,onTouchStart:V,onTouchEnd:()=>n("bold"),onClick:()=>n("bold"),children:a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:a("path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),a("button",{class:"fmt-btn",title:"Italic",onMouseDown:V,onTouchStart:V,onTouchEnd:()=>n("italic"),onClick:()=>n("italic"),children:a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("line",{x1:"19",x2:"10",y1:"4",y2:"4"},void 0,!1,void 0,this),a("line",{x1:"14",x2:"5",y1:"20",y2:"20"},void 0,!1,void 0,this),a("line",{x1:"15",x2:"9",y1:"4",y2:"20"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),a("button",{class:"fmt-btn",title:"Code",onMouseDown:V,onTouchStart:V,onTouchEnd:()=>n("code"),onClick:()=>n("code"),children:a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("polyline",{points:"16 18 22 12 16 6"},void 0,!1,void 0,this),a("polyline",{points:"8 6 2 12 8 18"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),a("button",{class:"fmt-btn",title:"Link",onMouseDown:V,onTouchStart:V,onTouchEnd:()=>n("link"),onClick:()=>n("link"),children:a("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},void 0,!1,void 0,this),a("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),a("div",{class:"toolbar-spacer"},void 0,!1,void 0,this),a("button",{class:"send-btn",title:"Send",onMouseDown:V,onTouchStart:V,onTouchEnd:i,onClick:i,children:a("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"},void 0,!1,void 0,this),a("path",{d:"m21.854 2.147-10.94 10.939"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Dr(t){let i=P(()=>{let n=t.current;if(!n)return;n.style.height="auto",n.style.height=Math.min(n.scrollHeight,200)+"px"},[t]),r=P(()=>{let n=t.current;if(!n)return;n.value="",n.style.height="auto"},[t]);return{resize:i,reset:r}}var na=5242880;function $i({roomName:t,onSend:i,onUploadFile:r}){let n=I(null),s=I(null),{resize:o,reset:u}=Dr(n),[c,l]=L([]),v=P(async(m)=>{let z=[];for(let B of m)if(B.size>na)z.push({file:B,status:"error",error:"File exceeds 5MB limit"});else z.push({file:B,status:"pending"});l((B)=>[...B,...z]);for(let B of z){if(B.status==="error")continue;l((_)=>_.map((T)=>T.file===B.file?{...T,status:"uploading"}:T));try{let _=await r(B.file);l((T)=>T.map((k)=>k.file===B.file?{...k,status:"done",attachmentId:_.id}:k))}catch{l((_)=>_.map((T)=>T.file===B.file?{...T,status:"error",error:"Upload failed"}:T))}}},[r]),F=P((m)=>{l((z)=>z.filter((B)=>B.file!==m))},[]),f=P(()=>{let m=n.current,z=m?.value.trim();if(!z||!m)return;let B=c.filter((_)=>_.status==="done"&&_.attachmentId).map((_)=>_.attachmentId);i(z,B),l([]),u(),m.focus(),requestAnimationFrame(()=>m.focus())},[i,u,c]),g=P((m)=>{if(m.key==="Enter"&&!m.shiftKey&&!matchMedia("(pointer: coarse)").matches)m.preventDefault(),f()},[f]),w=P((m)=>{let z=m.clipboardData?.items;if(!z)return;let B=[];for(let _=0;_<z.length;_++)if(z[_].kind==="file"){let T=z[_].getAsFile();if(T)B.push(T)}if(B.length>0)m.preventDefault(),v(B)},[v]),A=P(()=>{s.current?.click()},[]),Q=P((m)=>{let z=m.target;if(z.files&&z.files.length>0)v(Array.from(z.files)),z.value=""},[v]);return a("div",{class:"chat-input-area",children:a("div",{class:"chat-input-box",children:[c.length>0&&a("div",{class:"chat-attachments-bar",children:c.map((m)=>a("div",{class:`chat-attachment-chip ${m.status}`,children:[a("span",{class:"chip-name",children:m.file.name},void 0,!1,void 0,this),m.status==="uploading"&&a("span",{class:"chip-status",children:"uploading..."},void 0,!1,void 0,this),m.status==="error"&&a("span",{class:"chip-error",children:m.error},void 0,!1,void 0,this),m.status==="done"&&a("span",{class:"chip-status",children:"ready"},void 0,!1,void 0,this),a("button",{class:"chip-remove",onClick:()=>F(m.file),title:"Remove",children:"×"},void 0,!1,void 0,this)]},m.file.name+m.file.size,!0,void 0,this))},void 0,!1,void 0,this),a("textarea",{ref:n,placeholder:`Message #${t}`,rows:1,onInput:o,onKeyDown:g,onPaste:w},void 0,!1,void 0,this),a("input",{ref:s,type:"file",multiple:!0,style:"display:none",onChange:Q},void 0,!1,void 0,this),a(Fi,{textareaRef:n,onSend:f,onAttach:A},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}var ji=1000,aa=30000;function Er(t,i,r,n){let s=I(null),o=I(r);o.current=r;let u=I(n?.onTeamInfo);u.current=n?.onTeamInfo;let c=I(0),l=I(ji),[v,F]=L(!0),[f,g]=L(null);return U(()=>{if(!t||!i)return;async function w(){if(!t||c.current===0)return;try{let m=await Qr(t,c.current);for(let z of m){if(z.seq&&z.seq>c.current)c.current=z.seq;o.current?.(z)}}catch{}}function A(){if(s.current)s.current.close();let m=location.protocol==="https:"?"wss:":"ws:",z=`?token=${encodeURIComponent(i)}`,B=new WebSocket(`${m}//${location.host}/api/rooms/${t}/ws${z}`);B.onopen=()=>{F(!0),l.current=ji,w()},B.onmessage=(_)=>{try{let T=JSON.parse(_.data);if(T.type==="team_info"){u.current?.(T);return}if(T.type==="tasks_info"){g(T);return}let k=T;if(!k.sender||!k.content)return;if(k.seq&&k.seq>c.current)c.current=k.seq;o.current?.(k)}catch{}},B.onerror=()=>console.error("WebSocket error"),B.onclose=()=>{F(!1);let _=l.current;l.current=Math.min(_*2,aa),setTimeout(()=>{if(s.current===B)A()},_)},s.current=B}A();let Q=()=>{if(document.visibilityState==="visible")if(!s.current||s.current.readyState!==WebSocket.OPEN)l.current=ji,A();else w()};return document.addEventListener("visibilitychange",Q),()=>{if(document.removeEventListener("visibilitychange",Q),s.current){let m=s.current;s.current=null,m.close()}}},[t,i]),{wsRef:s,connected:v,tasksInfo:f}}function gi(){return new Promise((t,i)=>{let r=indexedDB.open("meet-ai-queue",1);r.onupgradeneeded=()=>{let n=r.result;if(!n.objectStoreNames.contains("outbox"))n.createObjectStore("outbox",{keyPath:"tempId"})},r.onsuccess=()=>t(r.result),r.onerror=()=>i(r.error)})}async function sa(t){let r=(await gi()).transaction("outbox","readwrite");if(r.objectStore("outbox").put(t),await new Promise((n,s)=>{r.oncomplete=()=>n(),r.onerror=()=>s(r.error)}),"serviceWorker"in navigator&&"SyncManager"in window)await(await navigator.serviceWorker.ready).sync.register("send-messages")}async function oa(t){try{(await gi()).transaction("outbox","readwrite").objectStore("outbox").delete(t)}catch{}}async function ua(t){let n=(await gi()).transaction("outbox","readonly").objectStore("outbox").getAll();return(await new Promise((o,u)=>{n.onsuccess=()=>o(n.result),n.onerror=()=>u(n.error)})).filter((o)=>o.roomId===t)}async function ca(){let r=(await gi()).transaction("outbox","readonly").objectStore("outbox").getAll();return new Promise((n,s)=>{r.onsuccess=()=>n(r.result),r.onerror=()=>s(r.error)})}function Vr(){let t=P(sa,[]),i=P(oa,[]),r=P(ua,[]),n=P(ca,[]);return{queue:t,remove:i,getForRoom:r,getAll:n}}async function xr(){if(!("Notification"in window))return"denied";if(Notification.permission!=="default")return Notification.permission;return Notification.requestPermission()}function jr(t,i){if(!("Notification"in window))return;if(Notification.permission!=="granted")return;if(document.visibilityState!=="hidden")return;if(t.type==="log")return;if(t.sender===i)return;let r=new Notification(t.sender,{body:t.content.slice(0,100),tag:t.id??t.message_id??void 0,icon:"/favicon.ico"});r.onclick=()=>{window.focus(),r.close()}}function yi({room:t,apiKey:i,userName:r,onTeamInfo:n,onTasksInfo:s}){let[o,u]=L([]),[c,l]=L({}),[v,F]=L(0),[f,g]=L(0),{queue:w,remove:A,getForRoom:Q}=Vr();U(()=>{let b=!1;async function W(){let[H,O,J]=await Promise.all([Ur(t.id),kr(t.id),Jr(t.id)]);if(b)return;let Y=[...H,...O].sort((h,y)=>xi(h.created_at).valueOf()-xi(y.created_at).valueOf());u(Y.map((h)=>({...h,status:"sent"}))),l(J);try{let h=await Q(t.id);if(b||h.length===0)return;if(u((y)=>[...y,...h.map((M)=>({sender:M.sender,content:M.content,created_at:new Date(M.timestamp).toISOString(),tempId:M.tempId,status:"failed"}))]),navigator.onLine)for(let y of h)try{if(await Qt(y.roomId,y.sender,y.content),await A(y.tempId),!b)u((M)=>M.map(($)=>$.tempId===y.tempId?{...$,status:"sent"}:$))}catch{}}catch{}}return W(),()=>{b=!0}},[t.id]),U(()=>{xr()},[]);let m=P((b)=>{if(jr(b,r),b.sender===r)u((W)=>{let H=W.findIndex((O)=>O.tempId&&O.content===b.content);if(H!==-1){let O=[...W];return O.splice(H,1),[...O,{...b,status:"sent"}]}return[...W,{...b,status:"sent"}]});else u((W)=>[...W,{...b,status:"sent"}]),F((W)=>W+1)},[r]),z=P((b)=>{n?.(b)},[n]),{connected:B,tasksInfo:_}=Er(t.id,i,m,{onTeamInfo:z});U(()=>{s?.(_)},[_]),U(()=>{let b=async()=>{try{let W=await Q(t.id);for(let H of W){u((O)=>O.map((J)=>J.tempId===H.tempId?{...J,status:"pending"}:J));try{await Qt(H.roomId,H.sender,H.content),await A(H.tempId),u((O)=>O.map((J)=>J.tempId===H.tempId?{...J,status:"sent"}:J))}catch{u((O)=>O.map((J)=>J.tempId===H.tempId?{...J,status:"failed"}:J))}}}catch{}};return window.addEventListener("online",b),()=>window.removeEventListener("online",b)},[t.id]);let T=P(async(b)=>{return qr(t.id,b)},[t.id]),k=P(async(b,W=[])=>{let H="pending-"+Date.now()+"-"+Math.random().toString(36).slice(2,6);u((O)=>[...O,{sender:r,content:b,created_at:new Date().toISOString(),tempId:H,status:"pending"}]),g((O)=>O+1);try{let O=await Qt(t.id,r,b,W.length>0?W:void 0);if(u((J)=>J.map((Y)=>Y.tempId===H?{...Y,status:"sent"}:Y)),W.length>0&&O.id)l((J)=>({...J,[O.id]:W.length}))}catch{await w({tempId:H,roomId:t.id,sender:r,content:b,apiKey:i,timestamp:Date.now()}),u((O)=>O.map((J)=>J.tempId===H?{...J,status:"failed"}:J))}},[t.id,r,i]),S=P(async(b)=>{let W=o.find((H)=>H.tempId===b);if(!W)return;u((H)=>H.map((O)=>O.tempId===b?{...O,status:"pending"}:O));try{await Qt(t.id,r,W.content),u((H)=>H.map((O)=>O.tempId===b?{...O,status:"sent"}:O)),await A(b)}catch{u((H)=>H.map((O)=>O.tempId===b?{...O,status:"failed"}:O))}},[t.id,r,o]);return a(x,{children:[a(fi,{messages:o,attachmentCounts:c,unreadCount:v,forceScrollCounter:f,onScrollToBottom:()=>F(0),onRetry:S,connected:B},void 0,!1,void 0,this),a($i,{roomName:t.name,onSend:k,onUploadFile:T},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function hi({currentRoom:t,rooms:i,apiKey:r,userName:n,showInvite:s,showTeamToggle:o,onMobileToggle:u,onTeamToggle:c,onInviteClick:l,onSelectRoom:v,onTeamInfo:F,onTasksInfo:f}){let g=t?.name??"Select a channel";return a("div",{class:"main",children:[a(ri,{roomName:g,showInvite:s&&!!t,showTeamToggle:o,onMobileToggle:u,onTeamToggle:c,onInviteClick:l},void 0,!1,void 0,this),t?a(yi,{room:t,apiKey:r,userName:n,onTeamInfo:F,onTasksInfo:f},t.id,!1,void 0,this):a(ai,{rooms:i,onSelectRoom:v},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function tn({member:t,inactive:i}){return a("div",{class:`team-member${i?" team-member--inactive":""}`,children:[a("span",{class:"team-member-dot",style:{background:i?"#555":ft(t.color)}},void 0,!1,void 0,this),a("span",{class:"team-member-name",children:t.name},void 0,!1,void 0,this),a("span",{class:"team-member-model",children:t.model},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function tr({task:t}){let i=t.status==="completed"?"✓":t.status==="in_progress"?"●":"○",r=`task-status task-status--${t.status.replace("_","-")}`;return a("div",{class:"task-row",children:[a("span",{class:r,children:i},void 0,!1,void 0,this),a("span",{class:"task-subject",children:t.subject},void 0,!1,void 0,this),t.owner&&a("span",{class:"task-owner",children:t.owner},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function la({teamInfo:t,tasksInfo:i}){let r=t.members.filter((l)=>l.status==="active"),n=t.members.filter((l)=>l.status==="inactive"),s=i?.tasks??[],o=s.filter((l)=>l.status==="in_progress"),u=s.filter((l)=>l.status==="pending"),c=s.filter((l)=>l.status==="completed");return a(x,{children:[r.length>0&&a("div",{class:"team-section",children:[a("div",{class:"team-section-label",children:"Active"},void 0,!1,void 0,this),r.map((l)=>a(tn,{member:l},l.name,!1,void 0,this))]},void 0,!0,void 0,this),n.length>0&&a("div",{class:"team-section",children:[a("div",{class:"team-section-label",children:"Inactive"},void 0,!1,void 0,this),n.map((l)=>a(tn,{member:l,inactive:!0},l.name,!1,void 0,this))]},void 0,!0,void 0,this),s.length>0&&a("div",{class:"team-section",children:[a("div",{class:"team-section-label",children:["Tasks",a("span",{class:"tasks-count",children:[c.length,"/",s.length]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),o.map((l)=>a(tr,{task:l},l.id,!1,void 0,this)),u.map((l)=>a(tr,{task:l},l.id,!1,void 0,this)),c.map((l)=>a(tr,{task:l},l.id,!1,void 0,this))]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function wi({teamInfo:t,tasksInfo:i,isOpen:r,onClose:n}){let s=I(null);U(()=>{let c=s.current;if(!c)return;if(!t){c.innerHTML="";return}bt(a(la,{teamInfo:t,tasksInfo:i},void 0,!1,void 0,this),c)},[t,i]);let o=t?.members.filter((c)=>c.status==="active").length??0,u=t?.members.length??0;return a("div",{class:`team-sidebar${r?" open":""}`,children:[a("div",{class:"team-sidebar-header",children:[a("span",{children:"Team"},void 0,!1,void 0,this),a("span",{class:"team-sidebar-count",children:t?`${o}/${u}`:""},void 0,!1,void 0,this),a("button",{class:"team-sidebar-close-btn",onClick:n,children:"×"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),a("div",{ref:s},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Pi({schema:t}){let i=pi(t);return a("div",{class:"color-preview",children:i.map((r,n)=>a("div",{class:"color-swatch",style:`background:${r}`,title:Si[n],children:Si[n]},n,!1,void 0,this))},void 0,!1,void 0,this)}function mi({currentSchema:t,onSave:i,onClose:r}){let[n,s]=L(t),[o,u]=L(()=>{let A=Ri.find((Q)=>Q.schema===t);return A?A.schema:""}),c=t,l=P((A)=>{let Q=A.target.value;s(Q),u(""),rt(Q.trim())},[]),v=P((A)=>{let Q=A.target.value;if(u(Q),Q)s(Q),rt(Q)},[]),F=P(()=>{i(n.trim())},[n,i]),f=P(()=>{rt(c),r()},[c,r]),g=P(()=>{s(Mt),u(Mt),rt(Mt)},[]),w=P((A)=>{if(A.target.classList.contains("settings-overlay"))rt(c),r()},[c,r]);return a("div",{class:"settings-overlay",onClick:w,children:a("div",{class:"settings-panel",children:[a("h2",{children:"Color Schema"},void 0,!1,void 0,this),a("label",{children:"Theme Presets"},void 0,!1,void 0,this),a("select",{value:o,onChange:v,children:[a("option",{value:"",children:"Custom"},void 0,!1,void 0,this),Ri.map((A)=>a("option",{value:A.schema,children:A.name},A.name,!1,void 0,this))]},void 0,!0,void 0,this),a("label",{children:"Schema string (10 comma-separated hex colors)"},void 0,!1,void 0,this),a("input",{type:"text",value:n,onInput:l},void 0,!1,void 0,this),a(Pi,{schema:n},void 0,!1,void 0,this),a("div",{class:"btn-row",children:[a("button",{class:"btn-reset",onClick:g,children:"Reset"},void 0,!1,void 0,this),a("button",{class:"btn-cancel",onClick:f,children:"Cancel"},void 0,!1,void 0,this),a("button",{class:"btn-save",onClick:F,children:"Save"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function Mi({onClose:t,onToast:i}){let[r,n]=L(null),[s,o]=L(null),[u,c]=L(!1);U(()=>{let F=!1;async function f(){try{let g=await Cr();if(F)return;n(g.url)}catch(g){if(!F)o(g.message||"Failed to create share link")}}return f(),()=>{F=!0}},[]),U(()=>{if(!r)return;let F=document.getElementById("qr-container");if(!F)return;try{let f=qrcode(0,"M");f.addData(r),f.make(),F.innerHTML=f.createImgTag(5,8)}catch{}},[r]);let l=P(async()=>{if(!r)return;try{await navigator.clipboard.writeText(r),c(!0),setTimeout(()=>c(!1),2000)}catch{let F=document.getElementById("qr-url");if(F){let f=document.createRange();f.selectNodeContents(F),window.getSelection()?.removeAllRanges(),window.getSelection()?.addRange(f)}}},[r]),v=P((F)=>{if(F.target.classList.contains("qr-overlay"))t()},[t]);return a("div",{class:"qr-overlay",onClick:v,children:a("div",{class:"qr-panel",children:[a("h2",{children:"Login on another device"},void 0,!1,void 0,this),a("p",{class:"qr-subtitle",children:"Scan with your phone camera to sign in"},void 0,!1,void 0,this),a("div",{class:"qr-container",id:"qr-container",children:[!r&&!s&&a("div",{style:"width:200px;height:200px;display:flex;align-items:center;justify-content:center;margin:0 auto",children:a("div",{style:"width:32px;height:32px;border:3px solid var(--c-border);border-top-color:var(--c-primary);border-radius:50%;animation:spin 0.8s linear infinite"},void 0,!1,void 0,this)},void 0,!1,void 0,this),s&&a("p",{style:"color:#F85149",children:s},void 0,!1,void 0,this)]},void 0,!0,void 0,this),r&&a("div",{class:"qr-url",id:"qr-url",onClick:l,title:"Click to copy",children:r},void 0,!1,void 0,this),a("div",{class:"qr-copied",children:u?"Copied to clipboard!":""},void 0,!1,void 0,this),a("div",{class:"qr-expires",children:"Expires in 5 minutes"},void 0,!1,void 0,this),a("button",{class:"btn-close",onClick:t,children:"Close"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function Ai({onClose:t}){return a("div",{class:"ios-install-overlay",onClick:t,children:a("div",{class:"ios-install-panel",onClick:(i)=>i.stopPropagation(),children:[a("h3",{children:"Install meet-ai"},void 0,!1,void 0,this),a("div",{class:"ios-install-steps",children:[a("div",{class:"ios-install-step",children:[a("span",{class:"ios-step-num",children:"1"},void 0,!1,void 0,this),a("span",{class:"ios-step-text",children:["Tap the ",a("strong",{children:"Share"},void 0,!1,void 0,this)," button",a("svg",{class:"ios-share-icon",width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[a("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"},void 0,!1,void 0,this),a("polyline",{points:"16 6 12 2 8 6"},void 0,!1,void 0,this),a("line",{x1:"12",y1:"2",x2:"12",y2:"15"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),"in the toolbar"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"ios-install-step",children:[a("span",{class:"ios-step-num",children:"2"},void 0,!1,void 0,this),a("span",{class:"ios-step-text",children:["Scroll down and tap ",a("strong",{children:"Add to Home Screen"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),a("div",{class:"ios-install-step",children:[a("span",{class:"ios-step-num",children:"3"},void 0,!1,void 0,this),a("span",{class:"ios-step-text",children:["Tap ",a("strong",{children:"Add"},void 0,!1,void 0,this)," in the top right"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),a("button",{class:"ios-install-close",onClick:t,children:"Got it"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function Ti({text:t,onDone:i}){return U(()=>{let r=setTimeout(i,2100);return()=>clearTimeout(r)},[i]),a("div",{class:"toast",children:t},void 0,!1,void 0,this)}function rn(t,i){let r=I(null),n=I(i);n.current=i,U(()=>{if(!t)return;function s(){let o=location.protocol==="https:"?"wss:":"ws:",u=`?token=${encodeURIComponent(t)}`,c=new WebSocket(`${o}//${location.host}/api/lobby/ws${u}`);c.onmessage=(l)=>{try{let v=JSON.parse(l.data);if(v.type==="room_created")n.current?.(v.id,v.name)}catch{}},c.onclose=()=>{setTimeout(()=>{if(r.current===c)s()},3000)},r.current=c}return s(),()=>{if(r.current){let o=r.current;r.current=null,o.close()}}},[t])}function Hi(){let t=location.pathname.match(/^\/chat\/([a-f0-9-]+)$/i);return t?t[1]:null}function nn(t,i){U(()=>{let s=()=>{let o=Hi();i(o)};return window.addEventListener("popstate",s),()=>window.removeEventListener("popstate",s)},[t,i]);let r=P((s)=>{history.pushState({roomId:s},"","/chat/"+s)},[]),n=P((s)=>{history.replaceState(null,"",s)},[]);return{pushRoom:r,replaceUrl:n}}function Bi({apiKey:t,userName:i,colorSchema:r,onNameChange:n,onSchemaChange:s}){let[o,u]=L([]),[c,l]=L(null),[v,F]=L(!1),[f,g]=L(!1),[w,A]=L(!1),[Q,m]=L(null),[z,B]=L(null),[_,T]=L(null),[k,S]=L(!1),[b,W]=L(!1),H=window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches;U(()=>{let $=!1;async function G(){let Z=await br();if($)return;u(Z);let C=Hi();if(C){let X=Z.find((K)=>K.id===C);if(X)l(X)}}return G(),()=>{$=!0}},[]);let O=P(($,G)=>{u((Z)=>[...Z,{id:$,name:G}])},[]);rn(t,O);let{pushRoom:J,replaceUrl:Y}=nn(o,P(($)=>{if($){let G=o.find((Z)=>Z.id===$);l(G??null)}else l(null)},[o])),h=P(($)=>{l($),F(!1),J($.id)},[J]),y=P(()=>{F(!1),W(!0)},[]),M=P(($)=>{s($),g(!1)},[s]);return U(()=>{if(!Hi())history.replaceState({roomId:null},"",location.pathname)},[]),a(x,{children:[a(ti,{rooms:o,currentRoomId:c?.id??null,userName:i,isOpen:v,onSelectRoom:h,onNameChange:n,onSettingsClick:()=>g(!0),onClose:()=>F(!1),onInstallClick:y},void 0,!1,void 0,this),v&&a(ii,{onClick:()=>F(!1)},void 0,!1,void 0,this),a(hi,{currentRoom:c,rooms:o,apiKey:t,userName:i,showInvite:!H,showTeamToggle:!!z,onMobileToggle:()=>F(($)=>!$),onTeamToggle:()=>S(($)=>!$),onInviteClick:()=>A(!0),onSelectRoom:h,onTeamInfo:B,onTasksInfo:T},void 0,!1,void 0,this),a(wi,{teamInfo:z,tasksInfo:_,isOpen:k,onClose:()=>S(!1)},void 0,!1,void 0,this),a("div",{class:"team-sidebar-backdrop",onClick:()=>S(!1),style:{display:k?"block":"none"}},void 0,!1,void 0,this),f&&a(mi,{currentSchema:r,onSave:M,onClose:()=>g(!1)},void 0,!1,void 0,this),w&&a(Mi,{onClose:()=>A(!1),onToast:($)=>{m($),A(!1)}},void 0,!1,void 0,this),b&&a(Ai,{onClose:()=>W(!1)},void 0,!1,void 0,this),Q&&a(Ti,{text:Q,onDone:()=>m(null)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function ir(t,i){let[r,n]=L(()=>{return localStorage.getItem(t)??i}),s=P((o)=>{n(o),localStorage.setItem(t,o)},[t]);return[r,s]}var an=["curious","bold","swift","quiet","bright","keen","calm","wild","lazy","witty","brave","sly","warm","cool","zen"],sn=["panda","fox","otter","hawk","wolf","owl","lynx","bear","deer","raven","hare","seal","wren","crane","moth"];function va(){let t=an[Math.floor(Math.random()*an.length)],i=sn[Math.floor(Math.random()*sn.length)],r=Math.floor(Math.random()*100);return`${t}-${i}-${r}`}function on(){let t=localStorage.getItem(j.handle);if(!t)t=va(),localStorage.setItem(j.handle,t);return t}function Li(){let[t,i]=L(()=>et()),[r,n]=ir(j.handle,on()),[s,o]=ir(j.colorSchema,Mt),u=new URLSearchParams(location.search).get("token");U(()=>{rt(s)},[s]);let c=P((v)=>{Or(v),i(v),history.replaceState(null,"","/chat"),location.reload()},[]),l=P((v)=>{o(v),rt(v)},[]);if(u&&t)history.replaceState(null,"",location.pathname);if(u&&!t)return a(Dt,{token:u,onLogin:c},void 0,!1,void 0,this);if(!t)return a(Nt,{onLogin:c},void 0,!1,void 0,this);return a(Bi,{apiKey:t,userName:r,colorSchema:s,onNameChange:n,onSchemaChange:l},void 0,!1,void 0,this)}var un=document.getElementById("root");if(un)bt(a(Li,{},void 0,!1,void 0,this),un);
