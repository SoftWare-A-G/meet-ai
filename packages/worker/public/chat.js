var Ir=Object.defineProperty;var Tr=(t,i)=>{for(var r in i)Ir(t,r,{get:i[r],enumerable:!0,configurable:!0,set:(a)=>i[r]=()=>a})};var Mr={Stringify:1,BeforeStream:2,Stream:3},G=(t,i)=>{let r=new String(t);return r.isEscaped=!0,r.callbacks=i,r},Lr=/[&<>'"]/,xt=async(t,i)=>{let r="";i||=[];let a=await Promise.all(t);for(let n=a.length-1;;n--){if(r+=a[n],n--,n<0)break;let o=a[n];if(typeof o==="object")i.push(...o.callbacks||[]);let v=o.isEscaped;if(o=await(typeof o==="object"?o.toString():o),typeof o==="object")i.push(...o.callbacks||[]);if(o.isEscaped??v)r+=o;else{let c=[r];O(o,c),r=c[0]}}return G(r,i)},O=(t,i)=>{let r=t.search(Lr);if(r===-1){i[0]+=t;return}let a,n,o=0;for(n=r;n<t.length;n++){switch(t.charCodeAt(n)){case 34:a="&quot;";break;case 39:a="&#39;";break;case 38:a="&amp;";break;case 60:a="&lt;";break;case 62:a="&gt;";break;default:continue}i[0]+=t.substring(o,n)+a,o=n+1}i[0]+=t.substring(o,n)},jt=(t)=>{let i=t.callbacks;if(!i?.length)return t;let r=[t],a={};return i.forEach((n)=>n({phase:Mr.Stringify,buffer:r,context:a})),r[0]};var N=Symbol("RENDERER"),E=Symbol("ERROR_HANDLER"),L=Symbol("STASH"),gt=Symbol("INTERNAL"),ft=Symbol("MEMO"),p=Symbol("PERMALINK");var et=(t)=>{return t[gt]=!0,t};var ti=(t)=>({value:i,children:r})=>{if(!r)return;let a={children:[{tag:et(()=>{t.push(i)}),props:{}}]};if(Array.isArray(r))a.children.push(...r.flat());else a.children.push(r);a.children.push({tag:et(()=>{t.pop()}),props:{}});let n={tag:"",props:a,type:""};return n[E]=(o)=>{throw t.pop(),o},n},rt=(t)=>{let i=[t],r=ti(i);return r.values=i,r.Provider=r,C.push(r),r};var C=[],Hi=(t)=>{let i=[t],r=(a)=>{i.push(a.value);let n;try{n=a.children?(Array.isArray(a.children)?new ii("",{},a.children):a.children).toString():""}catch(o){throw i.pop(),o}if(n instanceof Promise)return n.finally(()=>i.pop()).then((o)=>G(o,o.callbacks));else return i.pop(),G(n)};return r.values=i,r.Provider=r,r[N]=ti(i),C.push(r),r},W=(t)=>{return t.values.at(-1)};var D={title:[],script:["src"],style:["data-href"],link:["href"],meta:["name","httpEquiv","charset","itemProp"]},at={},V="data-precedence";var ot={};Tr(ot,{title:()=>Hr,style:()=>br,script:()=>_r,meta:()=>Gr,link:()=>zr,input:()=>kr,form:()=>Wr,button:()=>Yr});var K=(t)=>Array.isArray(t)?t:[t];var _i=new WeakMap,bi=(t,i,r,a)=>({buffer:n,context:o})=>{if(!n)return;let v=_i.get(o)||{};_i.set(o,v);let c=v[t]||=[],m=!1,u=D[t];if(u.length>0)t:for(let[,l]of c)for(let F of u)if((l?.[F]??null)===r?.[F]){m=!0;break t}if(m)n[0]=n[0].replaceAll(i,"");else if(u.length>0)c.push([i,r,a]);else c.unshift([i,r,a]);if(n[0].indexOf("</head>")!==-1){let l;if(a===void 0)l=c.map(([F])=>F);else{let F=[];l=c.map(([g,,T])=>{let $=F.indexOf(T);if($===-1)F.push(T),$=F.length-1;return[g,$]}).sort((g,T)=>g[1]-T[1]).map(([g])=>g)}l.forEach((F)=>{n[0]=n[0].replaceAll(F,"")}),n[0]=n[0].replace(/(?=<\/head>)/,l.join(""))}},nt=(t,i,r)=>G(new k(t,r,K(i??[])).toString()),st=(t,i,r,a)=>{if("itemProp"in r)return nt(t,i,r);let{precedence:n,blocking:o,...v}=r;if(n=a?n??"":void 0,a)v[V]=n;let c=new k(t,v,K(i||[])).toString();if(c instanceof Promise)return c.then((m)=>G(c,[...m.callbacks||[],bi(t,m,v,n)]));else return G(c,[bi(t,c,v,n)])},Hr=({children:t,...i})=>{let r=wt();if(r){let a=W(r);if(a==="svg"||a==="head")return new k("title",i,K(t??[]))}return st("title",t,i,!1)},_r=({children:t,...i})=>{let r=wt();if(["src","async"].some((a)=>!i[a])||r&&W(r)==="head")return nt("script",t,i);return st("script",t,i,!1)},br=({children:t,...i})=>{if(!["href","precedence"].every((r)=>(r in i)))return nt("style",t,i);return i["data-href"]=i.href,delete i.href,st("style",t,i,!0)},zr=({children:t,...i})=>{if(["onLoad","onError"].some((r)=>(r in i))||i.rel==="stylesheet"&&(!("precedence"in i)||("disabled"in i)))return nt("link",t,i);return st("link",t,i,"precedence"in i)},Gr=({children:t,...i})=>{let r=wt();if(r&&W(r)==="head")return nt("meta",t,i);return st("meta",t,i,!1)},zi=(t,{children:i,...r})=>new k(t,r,K(i??[])),Wr=(t)=>{if(typeof t.action==="function")t.action=p in t.action?t.action[p]:void 0;return zi("form",t)},Gi=(t,i)=>{if(typeof i.formAction==="function")i.formAction=p in i.formAction?i.formAction[p]:void 0;return zi(t,i)},kr=(t)=>Gi("input",t),Yr=(t)=>Gi("button",t);var Zr=new Map([["className","class"],["htmlFor","for"],["crossOrigin","crossorigin"],["httpEquiv","http-equiv"],["itemProp","itemprop"],["fetchPriority","fetchpriority"],["noModule","nomodule"],["formAction","formaction"]]),d=(t)=>Zr.get(t)||t,yt=(t,i)=>{for(let[r,a]of Object.entries(t)){let n=r[0]==="-"||!/[A-Z]/.test(r)?r:r.replace(/[A-Z]/g,(o)=>`-${o.toLowerCase()}`);i(n,a==null?null:typeof a==="number"?!n.match(/^(?:a|border-im|column(?:-c|s)|flex(?:$|-[^b])|grid-(?:ar|[^a])|font-w|li|or|sca|st|ta|wido|z)|ty$/)?`${a}px`:`${a}`:a)}};var vt=void 0,wt=()=>vt,Rr=(t)=>/[A-Z]/.test(t)&&t.match(/^(?:al|basel|clip(?:Path|Rule)$|co|do|fill|fl|fo|gl|let|lig|i|marker[EMS]|o|pai|pointe|sh|st[or]|text[^L]|tr|u|ve|w)/)?t.replace(/([A-Z])/g,"-$1").toLowerCase():t,Cr=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],Qr=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],ai=(t,i)=>{for(let r=0,a=t.length;r<a;r++){let n=t[r];if(typeof n==="string")O(n,i);else if(typeof n==="boolean"||n===null||n===void 0)continue;else if(n instanceof k)n.toStringToBuffer(i);else if(typeof n==="number"||n.isEscaped)i[0]+=n;else if(n instanceof Promise)i.unshift("",n);else ai(n,i)}},k=class{tag;props;key;children;isEscaped=!0;localContexts;constructor(t,i,r){this.tag=t,this.props=i,this.children=r}get type(){return this.tag}get ref(){return this.props.ref||null}toString(){let t=[""];this.localContexts?.forEach(([i,r])=>{i.values.push(r)});try{this.toStringToBuffer(t)}finally{this.localContexts?.forEach(([i])=>{i.values.pop()})}return t.length===1?"callbacks"in t?jt(G(t[0],t.callbacks)).toString():t[0]:xt(t,t.callbacks)}toStringToBuffer(t){let i=this.tag,r=this.props,{children:a}=this;t[0]+=`<${i}`;let n=vt&&W(vt)==="svg"?(o)=>Rr(d(o)):(o)=>d(o);for(let[o,v]of Object.entries(r))if(o=n(o),o==="children");else if(o==="style"&&typeof v==="object"){let c="";yt(v,(m,u)=>{if(u!=null)c+=`${c?";":""}${m}:${u}`}),t[0]+=' style="',O(c,t),t[0]+='"'}else if(typeof v==="string")t[0]+=` ${o}="`,O(v,t),t[0]+='"';else if(v===null||v===void 0);else if(typeof v==="number"||v.isEscaped)t[0]+=` ${o}="${v}"`;else if(typeof v==="boolean"&&Qr.includes(o)){if(v)t[0]+=` ${o}=""`}else if(o==="dangerouslySetInnerHTML"){if(a.length>0)throw Error("Can only set one of `children` or `props.dangerouslySetInnerHTML`.");a=[G(v.__html)]}else if(v instanceof Promise)t[0]+=` ${o}="`,t.unshift('"',v);else if(typeof v==="function"){if(!o.startsWith("on")&&o!=="ref")throw Error(`Invalid prop '${o}' of type 'function' supplied to '${i}'.`)}else t[0]+=` ${o}="`,O(v.toString(),t),t[0]+='"';if(Cr.includes(i)&&a.length===0){t[0]+="/>";return}t[0]+=">",ai(a,t),t[0]+=`</${i}>`}},ri=class extends k{toStringToBuffer(t){let{children:i}=this,r={...this.props};if(i.length)r.children=i.length===1?i[0]:i;let a=this.tag.call(null,r);if(typeof a==="boolean"||a==null)return;else if(a instanceof Promise)if(C.length===0)t.unshift("",a);else{let n=C.map((o)=>[o,o.values.at(-1)]);t.unshift("",a.then((o)=>{if(o instanceof k)o.localContexts=n;return o}))}else if(a instanceof k)a.toStringToBuffer(t);else if(typeof a==="number"||a.isEscaped){if(t[0]+=a,a.callbacks)t.callbacks||=[],t.callbacks.push(...a.callbacks)}else O(a,t)}},ii=class extends k{toStringToBuffer(t){ai(this.children,t)}};var Wi=!1,Pt=(t,i,r)=>{if(!Wi){for(let a in at)ot[a][N]=at[a];Wi=!0}if(typeof t==="function")return new ri(t,i,r);else if(ot[t])return new ri(ot[t],i,r);else if(t==="svg"||t==="head")return vt||=Hi(""),new k(t,i,[new ri(vt,{value:t},r)]);else return new k(t,i,r)};var Q=({children:t})=>{return new ii("",{children:t},Array.isArray(t)?t:t?[t]:[])};var ut="_hp",Ur={Change:"Input",DoubleClick:"DblClick"},qr={svg:"2000/svg",math:"1998/Math/MathML"},J=[],si=new WeakMap,x=void 0,Ui=()=>x,U=(t)=>("t"in t),ni={onClick:["click",!1]},ki=(t)=>{if(!t.startsWith("on"))return;if(ni[t])return ni[t];let i=t.match(/^on([A-Z][a-zA-Z]+?(?:PointerCapture)?)(Capture)?$/);if(i){let[,r,a]=i;return ni[t]=[(Ur[r]||r).toLowerCase(),!!a]}return},Yi=(t,i)=>x&&t instanceof SVGElement&&/[A-Z]/.test(i)&&((i in t.style)||i.match(/^(?:o|pai|str|u|ve)/))?i.replace(/([A-Z])/g,"-$1").toLowerCase():i,Or=(t,i,r)=>{i||={};for(let a in i){let n=i[a];if(a!=="children"&&(!r||r[a]!==n)){a=d(a);let o=ki(a);if(o){if(r?.[a]!==n){if(r)t.removeEventListener(o[0],r[a],o[1]);if(n!=null){if(typeof n!=="function")throw Error(`Event handler for "${a}" is not a function`);t.addEventListener(o[0],n,o[1])}}}else if(a==="dangerouslySetInnerHTML"&&n)t.innerHTML=n.__html;else if(a==="ref"){let v;if(typeof n==="function")v=n(t)||(()=>n(null));else if(n&&"current"in n)n.current=t,v=()=>n.current=null;si.set(t,v)}else if(a==="style"){let v=t.style;if(typeof n==="string")v.cssText=n;else if(v.cssText="",n!=null)yt(n,v.setProperty.bind(v))}else{if(a==="value"){let c=t.nodeName;if(c==="INPUT"||c==="TEXTAREA"||c==="SELECT"){if(t.value=n===null||n===void 0||n===!1?null:n,c==="TEXTAREA"){t.textContent=n;continue}else if(c==="SELECT"){if(t.selectedIndex===-1)t.selectedIndex=0;continue}}}else if(a==="checked"&&t.nodeName==="INPUT"||a==="selected"&&t.nodeName==="OPTION")t[a]=n;let v=Yi(t,a);if(n===null||n===void 0||n===!1)t.removeAttribute(v);else if(n===!0)t.setAttribute(v,"");else if(typeof n==="string"||typeof n==="number")t.setAttribute(v,n);else t.setAttribute(v,n.toString())}}}if(r)for(let a in r){let n=r[a];if(a!=="children"&&!(a in i)){a=d(a);let o=ki(a);if(o)t.removeEventListener(o[0],n,o[1]);else if(a==="ref")si.get(t)?.();else t.removeAttribute(Yi(t,a))}}},Jr=(t,i)=>{i[L][0]=0,J.push([t,i]);let r=i.tag[N]||i.tag,a=r.defaultProps?{...r.defaultProps,...i.props}:i.props;try{return[r.call(null,a)]}finally{J.pop()}},qi=(t,i,r,a,n)=>{if(t.vR?.length)a.push(...t.vR),delete t.vR;if(typeof t.tag==="function")t[L][1][Bt]?.forEach((o)=>n.push(o));t.vC.forEach((o)=>{if(U(o))r.push(o);else if(typeof o.tag==="function"||o.tag===""){o.c=i;let v=r.length;if(qi(o,i,r,a,n),o.s){for(let c=v;c<r.length;c++)r[c].s=!0;o.s=!1}}else if(r.push(o),o.vR?.length)a.push(...o.vR),delete o.vR})},Xr=(t)=>{for(;;t=t.tag===ut||!t.vC||!t.pP?t.nN:t.vC[0]){if(!t)return null;if(t.tag!==ut&&t.e)return t.e}},Oi=(t)=>{if(!U(t)){if(t[L]?.[1][Bt]?.forEach((i)=>i[2]?.()),si.get(t.e)?.(),t.p===2)t.vC?.forEach((i)=>i.p=2);t.vC?.forEach(Oi)}if(!t.p)t.e?.remove(),delete t.e;if(typeof t.tag==="function")ct.delete(t),At.delete(t),delete t[L][3],t.a=!0},oi=(t,i,r)=>{t.c=i,Ji(t,i,r)},Zi=(t,i)=>{if(!i)return;for(let r=0,a=t.length;r<a;r++)if(t[r]===i)return r;return},Ri=Symbol(),Ji=(t,i,r)=>{let a=[],n=[],o=[];qi(t,i,a,n,o),n.forEach(Oi);let v=r?void 0:i.childNodes,c,m=null;if(r)c=-1;else if(!v.length)c=0;else{let u=Zi(v,Xr(t.nN));if(u!==void 0)m=v[u],c=u;else c=Zi(v,a.find((l)=>l.tag!==ut&&l.e)?.e)??-1;if(c===-1)r=!0}for(let u=0,l=a.length;u<l;u++,c++){let F=a[u],g;if(F.s&&F.e)g=F.e,F.s=!1;else{let T=r||!F.e;if(U(F)){if(F.e&&F.d)F.e.textContent=F.t;F.d=!1,g=F.e||=document.createTextNode(F.t)}else g=F.e||=F.n?document.createElementNS(F.n,F.tag):document.createElement(F.tag),Or(g,F.props,F.pP),Ji(F,g,T)}if(F.tag===ut)c--;else if(r){if(!g.parentNode)i.appendChild(g)}else if(v[c]!==g&&v[c-1]!==g)if(v[c+1]===g)i.appendChild(v[c]);else i.insertBefore(g,m||v[c]||null)}if(t.pP)delete t.pP;if(o.length){let u=[],l=[];if(o.forEach(([,F,,g,T])=>{if(F)u.push(F);if(g)l.push(g);T?.()}),u.forEach((F)=>F()),l.length)requestAnimationFrame(()=>{l.forEach((F)=>F())})}},Kr=(t,i)=>!!(t&&t.length===i.length&&t.every((r,a)=>r[1]===i[a][1])),At=new WeakMap,$t=(t,i,r)=>{let a=!r&&i.pC;if(r)i.pC||=i.vC;let n;try{if(r||=typeof i.tag=="function"?Jr(t,i):K(i.props.children),r[0]?.tag===""&&r[0][E])n=r[0][E],t[5].push([t,n,i]);let o=a?[...i.pC]:i.vC?[...i.vC]:void 0,v=[],c;for(let m=0;m<r.length;m++){if(Array.isArray(r[m]))r.splice(m,1,...r[m].flat());let u=Xi(r[m]);if(u){if(typeof u.tag==="function"&&!u.tag[gt]){if(C.length>0)u[L][2]=C.map((F)=>[F,F.values.at(-1)]);if(t[5]?.length)u[L][3]=t[5].at(-1)}let l;if(o&&o.length){let F=o.findIndex(U(u)?(g)=>U(g):u.key!==void 0?(g)=>g.key===u.key&&g.tag===u.tag:(g)=>g.tag===u.tag);if(F!==-1)l=o[F],o.splice(F,1)}if(l)if(U(u)){if(l.t!==u.t)l.t=u.t,l.d=!0;u=l}else{let F=l.pP=l.props;if(l.props=u.props,l.f||=u.f||i.f,typeof u.tag==="function"){let g=l[L][2];if(l[L][2]=u[L][2]||[],l[L][3]=u[L][3],!l.f&&((l.o||l)===u.o||l.tag[ft]?.(F,l.props))&&Kr(g,l[L][2]))l.s=!0}u=l}else if(!U(u)&&x){let F=W(x);if(F)u.n=F}if(!U(u)&&!u.s)$t(t,u),delete u.f;if(v.push(u),c&&!c.s&&!u.s)for(let F=c;F&&!U(F);F=F.vC?.at(-1))F.nN=u;c=u}}if(i.vR=a?[...i.vC,...o||[]]:o||[],i.vC=v,a)delete i.pC}catch(o){if(i.f=!0,o===Ri)if(n)return;else throw o;let[v,c,m]=i[L]?.[3]||[];if(c){let u=()=>Ft([0,!1,t[2]],m),l=At.get(m)||[];l.push(u),At.set(m,l);let F=c(o,()=>{let g=At.get(m);if(g){let T=g.indexOf(u);if(T!==-1)return g.splice(T,1),u()}});if(F){if(t[0]===1)t[1]=!0;else if($t(t,m,[F]),(c.length===1||t!==v)&&m.c){oi(m,m.c,!1);return}throw Ri}}throw o}finally{if(n)t[5].pop()}},Xi=(t)=>{if(t===void 0||t===null||typeof t==="boolean")return;else if(typeof t==="string"||typeof t==="number")return{t:t.toString(),d:!0};else{if("vR"in t)t={tag:t.tag,props:t.props,key:t.key,f:t.f,type:t.tag,ref:t.props.ref,o:t.o||t};if(typeof t.tag==="function")t[L]=[0,[]];else{let i=qr[t.tag];if(i)x||=rt(""),t.props.children=[{tag:x,props:{value:t.n=`http://www.w3.org/${i}`,children:t.props.children}}]}return t}},Ki=(t,i,r)=>{if(t.c===i)t.c=r,t.vC.forEach((a)=>Ki(a,i,r))},Ci=(t,i)=>{i[L][2]?.forEach(([r,a])=>{r.values.push(a)});try{$t(t,i,void 0)}catch{return}if(i.a){delete i.a;return}if(i[L][2]?.forEach(([r])=>{r.values.pop()}),t[0]!==1||!t[1])oi(i,i.c,!1)},ct=new WeakMap,Qi=[],Ft=async(t,i)=>{t[5]||=[];let r=ct.get(i);if(r)r[0](void 0);let a,n=new Promise((o)=>a=o);if(ct.set(i,[a,()=>{if(t[2])t[2](t,i,(o)=>{Ci(o,i)}).then(()=>a(i));else Ci(t,i),a(i)}]),Qi.length)Qi.at(-1).add(i);else{await Promise.resolve();let o=ct.get(i);if(o)ct.delete(i),o[1]()}return n},hr=(t,i)=>{let r=[];r[5]=[],r[4]=!0,$t(r,t,void 0),r[4]=!1;let a=document.createDocumentFragment();oi(t,a,!0),Ki(t,a,i),i.replaceChildren(a)},vi=(t,i)=>{hr(Xi({tag:"",props:{children:t}}),i)};var ci=(t,i,r)=>({tag:ut,props:{children:t},key:r,e:i,p:1});var Sr=0,Bt=1,Nr=2,Er=3,pr=4,ui=new WeakMap,Fi=(t,i)=>!t||!i||t.length!==i.length||i.some((r,a)=>r!==t[a]);var Dr=void 0;var hi=[];var P=(t)=>{let i=()=>typeof t==="function"?t():t,r=J.at(-1);if(!r)return[i(),()=>{}];let[,a]=r,n=a[L][1][Sr]||=[],o=a[L][0]++;return n[o]||=[i(),(v)=>{let c=Dr,m=n[o];if(typeof v==="function")v=v(m[0]);if(!Object.is(v,m[0]))if(m[0]=v,hi.length){let[u,l]=hi.at(-1);Promise.all([u===3?a:Ft([u,!1,c],a),l]).then(([F])=>{if(!F||!(u===2||u===3))return;let g=F.vC;requestAnimationFrame(()=>{setTimeout(()=>{if(g!==F.vC)return;Ft([u===3?1:0,!1,c],F)})})})}else Ft([0,!1,c],a)}]};var Vr=(t,i,r)=>{let a=J.at(-1);if(!a)return;let[,n]=a,o=n[L][1][Bt]||=[],v=n[L][0]++,[c,,m]=o[v]||=[];if(Fi(c,r)){if(m)m();let u=()=>{l[t]=void 0,l[2]=i()},l=[r,void 0,void 0,void 0,void 0];l[t]=u,o[v]=l}},M=(t,i)=>Vr(3,t,i);var f=(t,i)=>{let r=J.at(-1);if(!r)return t;let[,a]=r,n=a[L][1][Nr]||=[],o=a[L][0]++,v=n[o];if(Fi(v?.[1],i))n[o]=[t,i];else t=n[o][0];return t},_=(t)=>{let i=J.at(-1);if(!i)return{current:t};let[,r]=i,a=r[L][1][pr]||=[],n=r[L][0]++;return a[n]||={current:t}},mi=(t)=>{let i=ui.get(t);if(i){if(i.length===2)throw i[1];return i[0]}throw t.then((r)=>ui.set(t,[r]),(r)=>ui.set(t,[void 0,r])),t},li=(t,i)=>{let r=J.at(-1);if(!r)return t();let[,a]=r,n=a[L][1][Er]||=[],o=a[L][0]++,v=n[o];if(Fi(v?.[1],i))n[o]=[t(),i];return n[o][0]};var Ni=rt({pending:!1,data:null,method:null,action:null}),Si=new Set,Ei=(t)=>{Si.add(t),t.finally(()=>Si.delete(t))};var gi=(t,i)=>{return li(()=>(r)=>{let a;if(t){if(typeof t==="function")a=t(r)||(()=>{t(null)});else if(t&&"current"in t)t.current=r,a=()=>{t.current=null}}let n=i(r);return()=>{n?.(),a?.()}},[t])},pi=Object.create(null),Di=Object.create(null),mt=(t,i,r,a,n)=>{if(i?.itemProp)return{tag:t,props:i,type:t,ref:i.ref};let o=document.head,{onLoad:v,onError:c,precedence:m,blocking:u,...l}=i,F=null,g=!1,T=D[t],$=void 0;if(T.length>0){let w=o.querySelectorAll(t);t:for(let A of w)for(let I of D[t])if(A.getAttribute(I)===i[I]){F=A;break t}if(!F){let A=T.reduce((I,z)=>i[z]===void 0?I:`${I}-${z}-${i[z]}`,t);g=!Di[A],F=Di[A]||=(()=>{let I=document.createElement(t);for(let z of T){if(i[z]!==void 0)I.setAttribute(z,i[z]);if(i.rel)I.setAttribute("rel",i.rel)}return I})()}}else $=o.querySelectorAll(t);if(m=a?m??"":void 0,a)l[V]=m;let y=f((w)=>{if(T.length>0){let A=!1;for(let I of o.querySelectorAll(t)){if(A&&I.getAttribute(V)!==m){o.insertBefore(w,I);return}if(I.getAttribute(V)===m)A=!0}o.appendChild(w)}else if($){let A=!1;for(let I of $)if(I===w){A=!0;break}if(!A)o.insertBefore(w,o.contains($[0])?$[0]:o.querySelector(t));$=void 0}},[m]),H=gi(i.ref,(w)=>{let A=T[0];if(r===2)w.innerHTML="";if(g||$)y(w);if(!c&&!v)return;let I=pi[w.getAttribute(A)]||=new Promise((z,tt)=>{w.addEventListener("load",z),w.addEventListener("error",tt)});if(v)I=I.then(v);if(c)I=I.catch(c);I.catch(()=>{})});if(n&&u==="render"){let w=D[t][0];if(i[w]){let A=i[w],I=pi[A]||=new Promise((z,tt)=>{y(F),F.addEventListener("load",z),F.addEventListener("error",tt)});mi(I)}}let B={tag:t,type:t,props:{...l,ref:H},ref:H};if(B.p=r,F)B.e=F;return ci(B,o)},dr=(t)=>{let i=Ui();if((i&&W(i))?.endsWith("svg"))return{tag:"title",props:t,type:"title",ref:t.ref};return mt("title",t,void 0,!1,!1)},xr=(t)=>{if(!t||["src","async"].some((i)=>!t[i]))return{tag:"script",props:t,type:"script",ref:t.ref};return mt("script",t,1,!1,!0)},jr=(t)=>{if(!t||!["href","precedence"].every((i)=>(i in t)))return{tag:"style",props:t,type:"style",ref:t.ref};return t["data-href"]=t.href,delete t.href,mt("style",t,2,!0,!0)},er=(t)=>{if(!t||["onLoad","onError"].some((i)=>(i in t))||t.rel==="stylesheet"&&(!("precedence"in t)||("disabled"in t)))return{tag:"link",props:t,type:"link",ref:t.ref};return mt("link",t,1,"precedence"in t,!0)},ta=(t)=>{return mt("meta",t,void 0,!1,!1)},Vi=Symbol(),ia=(t)=>{let{action:i,...r}=t;if(typeof i!=="function")r.action=i;let[a,n]=P([null,!1]),o=f(async(u)=>{let l=u.isTrusted?i:u.detail[Vi];if(typeof l!=="function")return;u.preventDefault();let F=new FormData(u.target);n([F,!0]);let g=l(F);if(g instanceof Promise)Ei(g),await g;n([null,!0])},[]),v=gi(t.ref,(u)=>{return u.addEventListener("submit",o),()=>{u.removeEventListener("submit",o)}}),[c,m]=a;return a[1]=!1,{tag:Ni,props:{value:{pending:c!==null,data:c,method:c?"post":null,action:c?i:null},children:{tag:"form",props:{...r,ref:v},type:"form",ref:v}},f:m}},di=(t,{formAction:i,...r})=>{if(typeof i==="function"){let a=f((n)=>{n.preventDefault(),n.currentTarget.form.dispatchEvent(new CustomEvent("submit",{detail:{[Vi]:i}}))},[]);r.ref=gi(r.ref,(n)=>{return n.addEventListener("click",a),()=>{n.removeEventListener("click",a)}})}return{tag:t,props:r,type:t,ref:r.ref}},ra=(t)=>di("input",t),aa=(t)=>di("button",t);Object.assign(at,{title:dr,script:xr,style:jr,link:er,meta:ta,form:ia,input:ra,button:aa});var j="#222244,#2D2B55,#B362FF,#FFFFFF,#2D2B55,#A599E9,#3AD900,#FAD000,#3B3768,#7E74A8",fi=[{name:"meet-ai Default",schema:"#194234,#9c2e33,#E7C12e,#194234,#9c2e33,#FFFFFF,#ee6030,#9C2E33,#9c2e33,#FFFFFF"},{name:"One Dark Pro",schema:"#282C34,#2C313A,#528BFF,#FFFFFF,#2C313A,#ABB2BF,#98C379,#E06C75,#3E4451,#5C6370"},{name:"Dracula",schema:"#282A36,#343746,#BD93F9,#FFFFFF,#343746,#F8F8F2,#50FA7B,#FF79C6,#44475A,#6272A4"},{name:"GitHub Dark",schema:"#0D1117,#161B22,#1F6FEB,#FFFFFF,#161B22,#C9D1D9,#3FB950,#F85149,#21262D,#8B949E"},{name:"Nord",schema:"#2E3440,#3B4252,#88C0D0,#ECEFF4,#3B4252,#D8DEE9,#A3BE8C,#BF616A,#434C5E,#4C566A"},{name:"Monokai",schema:"#272822,#3E3D32,#F92672,#FFFFFF,#3E3D32,#F8F8F2,#A6E22E,#F92672,#49483E,#75715E"},{name:"Solarized Dark",schema:"#002B36,#073642,#2AA198,#FFFFFF,#073642,#839496,#859900,#DC322F,#073642,#586E75"},{name:"Tokyo Night",schema:"#1A1B26,#24283B,#7AA2F7,#FFFFFF,#24283B,#A9B1D6,#73DACA,#F7768E,#2F3549,#565F89"},{name:"Catppuccin Mocha",schema:"#1E1E2E,#313244,#89B4FA,#FFFFFF,#313244,#CDD6F4,#A6E3A1,#F38BA8,#45475A,#6C7086"},{name:"Gruvbox Dark",schema:"#282828,#3C3836,#FABD2F,#282828,#3C3836,#EBDBB2,#B8BB26,#FB4934,#504945,#928374"},{name:"Ayu Dark",schema:"#0B0E14,#131721,#E6B450,#0B0E14,#131721,#BFBDB6,#AAD94C,#F07178,#11151C,#565B66"},{name:"Ayu Mirage",schema:"#1F2430,#272D38,#FFCC66,#1F2430,#272D38,#CCCAC2,#D5FF80,#F28779,#171B24,#5C6166"},{name:"Ayu Light",schema:"#FAFAFA,#F0F0F0,#FF9940,#FFFFFF,#F0F0F0,#575F66,#86B300,#F07171,#E8E8E8,#ABB0B6"},{name:"Night Owl",schema:"#011627,#0B2942,#7E57C2,#FFFFFF,#0B2942,#D6DEEB,#ADDB67,#EF5350,#122D42,#5F7E97"},{name:"One Light",schema:"#FAFAFA,#EAEAEB,#4078F2,#FFFFFF,#EAEAEB,#383A42,#50A14F,#E45649,#D4D4D4,#A0A1A7"},{name:"Shades of Purple",schema:"#222244,#2D2B55,#B362FF,#FFFFFF,#2D2B55,#A599E9,#3AD900,#FAD000,#3B3768,#7E74A8"}],wi=["Column BG","Menu Hover","Active Item","Active Text","Hover Item","Text Color","Presence","Badge","Divider","Alt Text"],Z={apiKey:"meet-ai-key",handle:"meet-ai-handle",colorSchema:"meet-ai-color-schema"};function yi(){return localStorage.getItem(Z.apiKey)}function ei(t){localStorage.setItem(Z.apiKey,t)}function sa(){localStorage.removeItem(Z.apiKey)}function It(){let t=yi(),i={"Content-Type":"application/json"};if(t)i.Authorization="Bearer "+t;return i}async function tr(){let t=await fetch("/api/rooms",{headers:It()});if(t.status===401)return sa(),location.href="/key",[];return t.json()}async function ir(t){let i=await fetch(`/api/rooms/${t}/messages`,{headers:It()});if(!i.ok)return[];return i.json()}async function lt(t,i,r){let a=await fetch(`/api/rooms/${t}/messages`,{method:"POST",headers:It(),body:JSON.stringify({sender:i,content:r})});if(!a.ok)throw Error("HTTP "+a.status)}async function Tt(t){let i=await fetch("/api/auth/claim/"+encodeURIComponent(t));if(!i.ok)throw Error("Link expired or invalid");return i.json()}async function rr(){let t=await fetch("/api/auth/share",{method:"POST",headers:It()});if(!t.ok)throw Error("Failed to create share link");return t.json()}function s(t,i,r){let a;if(!i||!("children"in i))a=Pt(t,i,[]);else{let n=i.children;a=Array.isArray(n)?Pt(t,i,n):Pt(t,i,[n])}return a.key=r,a}function Mt({onLogin:t}){let[i,r]=P(""),[a,n]=P(!1),o=_(null);M(()=>{o.current?.focus()},[]);let v=f(async()=>{let m=o.current?.value.trim();if(!m)return;r(""),n(!0);try{if(m.startsWith("http")&&m.includes("/auth/")){let u=m.split("/auth/").pop()?.split("?")[0]?.split("#")[0];if(!u){r("Invalid link"),n(!1);return}let l=await Tt(u);t(l.api_key)}else if(m.startsWith("mai_"))t(m);else r("Invalid link or key"),n(!1)}catch(u){r(u.message||"Connection error. Try again."),n(!1)}},[t]),c=f((m)=>{if(m.key==="Enter")m.preventDefault(),v()},[v]);return s("div",{class:"main",style:"height:100dvh",children:s("div",{class:"login-prompt",children:[s("h2",{children:"Welcome to meet-ai"},void 0,!1,void 0,this),s("p",{children:"Paste a login link from another device or enter your API key to continue."},void 0,!1,void 0,this),s("div",{class:"login-prompt-form",children:[s("input",{ref:o,type:"text",placeholder:"Paste login link or API key",autocomplete:"off",spellcheck:!1,onKeyDown:c},void 0,!1,void 0,this),s("button",{onClick:v,disabled:a,children:a?"...":"Go"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"login-error",children:i},void 0,!1,void 0,this),s("div",{class:"login-or",children:["or ",s("a",{href:"/",children:"get an API key"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function Lt({token:t,onLogin:i}){let[r,a]=P(""),[n,o]=P(!1),v=window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches,c=/iPad|iPhone|iPod/.test(navigator.userAgent)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,m=/Android/.test(navigator.userAgent),u=f(async()=>{o(!0),a("");try{let g=await Tt(t);i(g.api_key)}catch(g){a(g.message||"Connection error. Try again."),o(!1)}},[t,i]),l=n?"Connecting...":v?"Connect":"Connect in browser",F=null;if(!v)if(c)F=s("div",{class:"install-steps",children:[s("div",{class:"install-step",children:[s("div",{class:"step-num",children:"1"},void 0,!1,void 0,this),s("div",{class:"step-text",children:["Tap the ",s("strong",{children:"Share"},void 0,!1,void 0,this)," button at the bottom of Safari"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"install-step",children:[s("div",{class:"step-num",children:"2"},void 0,!1,void 0,this),s("div",{class:"step-text",children:["Scroll down and tap ",s("strong",{children:"Add to Home Screen"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"install-step",children:[s("div",{class:"step-num",children:"3"},void 0,!1,void 0,this),s("div",{class:"step-text",children:["Tap ",s("strong",{children:"Add"},void 0,!1,void 0,this)," in the top right corner"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"install-step",children:[s("div",{class:"step-num",children:"4"},void 0,!1,void 0,this),s("div",{class:"step-text",children:["Open the app from your Home Screen and tap ",s("strong",{children:"Connect"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);else if(m)F=s("div",{class:"install-steps",children:[s("div",{class:"install-step",children:[s("div",{class:"step-num",children:"1"},void 0,!1,void 0,this),s("div",{class:"step-text",children:["Tap the ",s("strong",{children:"menu"},void 0,!1,void 0,this)," button ⋮ in Chrome"]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"install-step",children:[s("div",{class:"step-num",children:"2"},void 0,!1,void 0,this),s("div",{class:"step-text",children:["Tap ",s("strong",{children:"Install app"},void 0,!1,void 0,this)," or ",s("strong",{children:"Add to Home screen"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"install-step",children:[s("div",{class:"step-num",children:"3"},void 0,!1,void 0,this),s("div",{class:"step-text",children:["Open the app from your Home Screen and tap ",s("strong",{children:"Connect"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);else F=s("div",{class:"install-steps",children:[s("div",{class:"install-step",children:[s("div",{class:"step-num",children:"1"},void 0,!1,void 0,this),s("div",{class:"step-text",children:"Install the app using your browser's install option"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"install-step",children:[s("div",{class:"step-num",children:"2"},void 0,!1,void 0,this),s("div",{class:"step-text",children:["Open the app and tap ",s("strong",{children:"Connect"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this);return s("div",{class:"main",style:"height:100dvh",children:s("div",{class:"token-screen",children:[s("h2",{children:v?"Connect to chat":"Install meet-ai"},void 0,!1,void 0,this),s("p",{children:v?"Tap the button below to activate your session.":"Add meet-ai to your Home Screen for the best experience."},void 0,!1,void 0,this),v?s("div",{class:"token-card",children:[s("button",{type:"button",class:"connect-btn",onClick:u,disabled:n,children:l},void 0,!1,void 0,this),s("div",{class:"connect-error",children:r},void 0,!1,void 0,this)]},void 0,!0,void 0,this):s(Q,{children:[F&&s("div",{class:"token-card",children:F},void 0,!1,void 0,this),s("div",{class:"separator"},void 0,!1,void 0,this),s("p",{class:"alt-text",children:"Or connect directly in this browser:"},void 0,!1,void 0,this),s("div",{class:"token-card",children:[s("button",{type:"button",class:"connect-btn",onClick:u,disabled:n,children:l},void 0,!1,void 0,this),s("div",{class:"connect-error",children:r},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function Ht({onSettingsClick:t,onCloseClick:i}){return s("div",{class:"sidebar-header",children:[s("span",{children:"meet-ai"},void 0,!1,void 0,this),s("div",{class:"sidebar-header-actions",children:[s("button",{title:"Color Settings",onClick:t,children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"},void 0,!1,void 0,this),s("circle",{cx:"12",cy:"12",r:"3"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("button",{class:"sidebar-close-btn",title:"Close sidebar",onClick:i,children:s("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("line",{x1:"18",y1:"6",x2:"6",y2:"18"},void 0,!1,void 0,this),s("line",{x1:"6",y1:"6",x2:"18",y2:"18"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function _t({rooms:t,currentRoomId:i,onSelectRoom:r}){return s(Q,{children:[s("div",{class:"sidebar-section-label",children:"Channels"},void 0,!1,void 0,this),s("div",{class:"room-list",children:t.map((a)=>s("div",{class:`room-item${a.id===i?" active":""}`,onClick:()=>r(a),children:[s("span",{class:"room-hash",children:"#"},void 0,!1,void 0,this)," ",a.name]},a.id,!0,void 0,this))},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function bt({userName:t,onNameChange:i}){let[r,a]=P(!1),[n,o]=P(t),v=f(()=>{o(t),a(!0)},[t]),c=f(()=>{let u=n.trim();if(u)i(u);a(!1)},[n,i]),m=f((u)=>{if(u.key==="Enter")u.preventDefault(),c();if(u.key==="Escape")o(t),a(!1)},[c,t]);return s("div",{class:"sidebar-footer",children:[s("span",{class:"user-presence",style:"width:8px;height:8px;border-radius:50%;background:var(--c-presence);flex-shrink:0;"},void 0,!1,void 0,this),r?s("input",{type:"text",value:n,maxLength:30,style:"background:var(--c-hover-item);color:inherit;border:1px solid var(--c-sidebar-border);border-radius:4px;padding:2px 6px;font-size:16px;width:130px;outline:none;font-weight:600;",onInput:(u)=>o(u.target.value),onKeyDown:m,onBlur:c,ref:(u)=>u?.focus()},void 0,!1,void 0,this):s("span",{class:"user-handle",title:"Click to change your name",onClick:v,children:t},void 0,!1,void 0,this),s("div",{class:"sidebar-footer-actions",children:s("button",{title:"API Key settings",onClick:()=>{location.href="/key"},children:s("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:s("path",{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function zt({rooms:t,currentRoomId:i,userName:r,isOpen:a,onSelectRoom:n,onNameChange:o,onSettingsClick:v,onClose:c}){return s("aside",{class:`sidebar${a?" open":""}`,children:[s(Ht,{onSettingsClick:v,onCloseClick:c},void 0,!1,void 0,this),s(_t,{rooms:t,currentRoomId:i,onSelectRoom:n},void 0,!1,void 0,this),s(bt,{userName:r,onNameChange:o},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Gt({onClick:t}){return s("div",{class:"sidebar-backdrop",onClick:t,style:"display:block"},void 0,!1,void 0,this)}function Wt({roomName:t,showInvite:i,showTeamToggle:r,onMobileToggle:a,onTeamToggle:n,onInviteClick:o}){return s("div",{class:"main-header",children:[s("div",{class:"main-header-left",children:[s("button",{class:"mobile-toggle",onClick:a,children:"☰"},void 0,!1,void 0,this),s("span",{class:"channel-hash",children:"#"},void 0,!1,void 0,this),s("span",{class:"channel-name",children:t},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"main-header-right",children:[i&&s("button",{class:"invite-btn",title:"Open on phone",onClick:o,children:s("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("rect",{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"},void 0,!1,void 0,this),s("line",{x1:"12",y1:"18",x2:"12.01",y2:"18"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),r&&s("button",{class:"team-toggle",title:"Team members",onClick:n,children:s("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"},void 0,!1,void 0,this),s("circle",{cx:"9",cy:"7",r:"4"},void 0,!1,void 0,this),s("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"},void 0,!1,void 0,this),s("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function kt({message:t="Select or create a channel to start chatting",showBackLink:i}){return s("div",{class:"empty-state",children:[s("div",{class:"icon",children:"#"},void 0,!1,void 0,this),s("div",{children:t},void 0,!1,void 0,this),i&&s("div",{style:"font-size:13px;margin-top:4px",children:s("a",{href:"/chat",style:"color:var(--c-primary)",children:"Back to channels"},void 0,!1,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Pi(t){let i=t.split(",").map((r)=>r.trim());while(i.length<10)i.push("#888888");return i}function Yt(t){if(t=t.replace("#",""),t.length===3)t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2];let i=parseInt(t,16);return[i>>16&255,i>>8&255,i&255]}function X(t){let[i,r,a]=Yt(t).map((n)=>{return n=n/255,n<=0.04045?n/12.92:Math.pow((n+0.055)/1.055,2.4)});return 0.2126*i+0.7152*r+0.0722*a}function Y(t,i){let r=X(t),a=X(i),n=Math.max(r,a),o=Math.min(r,a);return(n+0.05)/(o+0.05)}function ar(t,i,r){if(Y(t,i)>=r)return t;let a=Y("#FFFFFF",i),n=Y("#000000",i);return a>=n?"#FFFFFF":"#000000"}function oa(t){if(X(t)>=0.5)return"#FFFFFF";let[r,a,n]=Yt(t);return"#"+[r,a,n].map((o)=>Math.max(0,Math.round(o*0.78+2)).toString(16).padStart(2,"0")).join("")}function va(t,i){if(X(t)>=0.5)return"#1D1C1D";return i||"#ABB2BF"}function ca(t,i){if(X(t)>=0.5)return"#E0E0E0";return i||"#3e4451"}function q(t){let i=Pi(t),r=document.documentElement,a=X(i[0])<0.5,n=ar(i[5],i[0],3),o=ar(i[3],i[2],3);r.style.setProperty("--c-sidebar-bg",i[0]),r.style.setProperty("--c-sidebar-text",n),r.style.setProperty("--c-active-item",i[2]),r.style.setProperty("--c-active-item-text",o),r.style.setProperty("--c-hover-item",i[4]||i[1]),r.style.setProperty("--c-presence",i[6]),r.style.setProperty("--c-primary",i[6]),r.style.setProperty("--c-sidebar-border",i[8]||(a?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.1)"));let v=oa(i[0]),c=va(v,n),m=ca(i[0],i[8]);r.style.setProperty("--c-header-bg",v),r.style.setProperty("--c-header-text",c),r.style.setProperty("--c-chat-bg",v),r.style.setProperty("--c-msg-text",c),r.style.setProperty("--c-border",m),document.body.style.background=v,r.style.setProperty("--c-input-bg",a?i[0]:v);let u=Y("#FFFFFF",i[6]),l=Y("#000000",i[6]);r.style.setProperty("--c-primary-text",u>=l?"#FFFFFF":"#000000")}function Zt(t){let i=0;for(let a=0;a<t.length;a++)i=t.charCodeAt(a)+((i<<5)-i);return`hsl(${(i%360+360)%360}, 60%, 45%)`}function nr(t){let i=0;for(let a=0;a<t.length;a++)i=t.charCodeAt(a)+((i<<5)-i);return`hsl(${(i%360+360)%360}, 50%, 35%)`}var Ai=(()=>{let t=document.createElement("div");return t.style.display="none",document.body.appendChild(t),t})();function $i(t){Ai.style.color="",Ai.style.color=t;let r=getComputedStyle(Ai).color.match(/(\d+)/g);if(!r||r.length<3)return t;return"#"+r.slice(0,3).map((a)=>parseInt(a).toString(16).padStart(2,"0")).join("")}function h(t){let i=$i(t),r=getComputedStyle(document.documentElement).getPropertyValue("--c-chat-bg").trim()||"#FFFFFF";if(Y(i,r)>=3)return t;let a=X(r),[n,o,v]=Yt(i);if(a<0.5){for(let c=1.5;c<=3;c+=0.3){let m="#"+[n,o,v].map((u)=>Math.min(255,Math.round(u*c)).toString(16).padStart(2,"0")).join("");if(Y(m,r)>=3)return m}return"#CCCCCC"}else{for(let c=0.5;c>=0.2;c-=0.1){let m="#"+[n,o,v].map((u)=>Math.round(u*c).toString(16).padStart(2,"0")).join("");if(Y(m,r)>=3)return m}return"#555555"}}function sr(t){return DOMPurify.sanitize(marked.parse(t,{breaks:!0}))}function or(t){if(window.highlightAllCode)window.highlightAllCode(t)}function ua(t){let i=document.createElement("div");return i.textContent=t,i.innerHTML}function Fa(t){if(!t)return"";try{let i=new Date(t);if(isNaN(i.getTime()))return"";return i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}}function Rt({sender:t,content:i,color:r,timestamp:a,tempId:n,status:o="sent",onRetry:v}){let c=_(null),m=r?h(r):Zt(t),u=r?h(r):nr(t),l=t.slice(0,2).toUpperCase(),F=$i(u),g=Y("#FFFFFF",F)>=Y("#000000",F)?"#FFFFFF":"#000000",T=o==="pending"?" msg-pending":o==="failed"?" msg-failed":"",$=o==="pending"?"sending":o==="failed"?"failed":Fa(a);return M(()=>{if(c.current)c.current.innerHTML=sr(i),or(c.current)},[i]),s("div",{class:`msg${T}`,"data-temp-id":n,"data-content":n?i:void 0,children:[s("div",{class:"msg-avatar",style:`background:${u};color:${g}`,children:ua(l)},void 0,!1,void 0,this),s("div",{class:"msg-body",children:[s("div",{class:"msg-header",children:[s("span",{class:"msg-sender",style:`color:${m}`,children:t},void 0,!1,void 0,this),s("span",{class:"msg-time",children:$},void 0,!1,void 0,this),o==="failed"&&v&&s("span",{class:"msg-retry",onClick:v,style:"display:inline",children:"retry"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),s("div",{class:"msg-content",ref:c},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function Bi(t){if(!t)return"";try{let i=new Date(t);if(isNaN(i.getTime()))return"";return i.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch{return""}}function ma(t){let i=[...new Set(t.map((a)=>a.sender))],r=t.length;if(i.length===1)return`${r} log ${r===1?"entry":"entries"} from ${i[0]}`;return`${r} log entries from ${i.length} agents`}function Ct({logs:t}){let[i,r]=P(!1);if(t.length===0)return null;let a=Bi(t[0].created_at),n=t.length>1?Bi(t[t.length-1].created_at):null,o=n&&n!==a?`${a} - ${n}`:a;return s("div",{class:"log-group",children:[s("div",{class:"log-group-header",onClick:()=>r(!i),children:[s("span",{class:"log-group-toggle",children:i?"▾":"▸"},void 0,!1,void 0,this),s("span",{class:"log-group-summary",children:ma(t)},void 0,!1,void 0,this),s("span",{class:"log-group-time",children:o},void 0,!1,void 0,this)]},void 0,!0,void 0,this),i&&s("div",{class:"log-group-entries",children:t.map((v,c)=>{let m=v.color?h(v.color):Zt(v.sender);return s("div",{class:"log-entry",children:[s("span",{class:"log-entry-time",children:Bi(v.created_at)},void 0,!1,void 0,this),s("span",{class:"log-entry-sender",style:`color:${m}`,children:[v.sender,":"]},void 0,!0,void 0,this),s("span",{class:"log-entry-content",children:v.content},void 0,!1,void 0,this)]},`${v.sender}-${v.created_at}-${c}`,!0,void 0,this)})},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Qt({count:t,onClick:i}){if(t===0)return null;return s("div",{class:"new-messages-pill",onClick:i,children:[t," new message",t===1?"":"s"," ↓"]},void 0,!0,void 0,this)}function vr(t){let i=_(!0),[r,a]=P(!0);M(()=>{let v=t.current;if(!v)return;let c=()=>{let m=v.scrollHeight-v.scrollTop-v.clientHeight<80;i.current=m,a(m)};return v.addEventListener("scroll",c,{passive:!0}),()=>v.removeEventListener("scroll",c)},[t]);let n=f(()=>i.current??!0,[]),o=f(()=>{let v=t.current;if(!v)return;v.scrollTop=v.scrollHeight,i.current=!0,a(!0)},[t]);return{isAtBottom:n,atBottom:r,scrollToBottom:o}}function la(t){let i=[],r=[];function a(){if(r.length>0)i.push({kind:"log-group",logs:r}),r=[]}for(let n=0;n<t.length;n++){let o=t[n];if(o.type==="log")r.push(o);else a(),i.push({kind:"message",msg:o,index:n})}return a(),i}function Ut({messages:t,unreadCount:i,onScrollToBottom:r,onRetry:a}){let n=_(null),{isAtBottom:o,atBottom:v,scrollToBottom:c}=vr(n),m=_(0);M(()=>{if(t.length>(m.current??0)&&o())c();m.current=t.length},[t.length]),M(()=>{if(v&&i>0)r()},[v,i,r]),M(()=>{c()},[]);let u=la(t);return s("div",{class:"messages",ref:n,children:[u.map((l,F)=>{if(l.kind==="log-group"){let T=l.logs[0];return s(Ct,{logs:l.logs},`log-group-${T.sender}-${T.created_at}-${F}`,!1,void 0,this)}let g=l.msg;return s(Rt,{sender:g.sender,content:g.content,color:g.color,timestamp:g.created_at,tempId:g.tempId,status:g.status,onRetry:g.tempId&&a?()=>a(g.tempId):void 0},g.tempId||`${g.sender}-${g.created_at}-${l.index}`,!1,void 0,this)}),s(Qt,{count:i,onClick:()=>{c(),r()}},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function ga(t,i){let{selectionStart:r,selectionEnd:a,value:n}=t,o=n.slice(r,a),v;switch(i){case"bold":v=`**${o||"text"}**`;break;case"italic":v=`*${o||"text"}*`;break;case"code":v=o.includes(`
`)?`\`\`\`
${o||"code"}
\`\`\``:`\`${o||"code"}\``;break;case"link":v=`[${o||"text"}](url)`;break;default:return}t.value=n.slice(0,r)+v+n.slice(a),t.focus();let c=r+v.length;t.setSelectionRange(c,c)}var R=(t)=>t.preventDefault();function qt({textareaRef:t,onSend:i}){let r=(a)=>{if(t.current)ga(t.current,a)};return s("div",{class:"chat-input-toolbar",children:[s("button",{class:"fmt-btn",title:"Bold",onMouseDown:R,onTouchStart:R,onTouchEnd:()=>r("bold"),onClick:()=>r("bold"),children:s("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:s("path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8"},void 0,!1,void 0,this)},void 0,!1,void 0,this)},void 0,!1,void 0,this),s("button",{class:"fmt-btn",title:"Italic",onMouseDown:R,onTouchStart:R,onTouchEnd:()=>r("italic"),onClick:()=>r("italic"),children:s("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("line",{x1:"19",x2:"10",y1:"4",y2:"4"},void 0,!1,void 0,this),s("line",{x1:"14",x2:"5",y1:"20",y2:"20"},void 0,!1,void 0,this),s("line",{x1:"15",x2:"9",y1:"4",y2:"20"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("button",{class:"fmt-btn",title:"Code",onMouseDown:R,onTouchStart:R,onTouchEnd:()=>r("code"),onClick:()=>r("code"),children:s("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("polyline",{points:"16 18 22 12 16 6"},void 0,!1,void 0,this),s("polyline",{points:"8 6 2 12 8 18"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("button",{class:"fmt-btn",title:"Link",onMouseDown:R,onTouchStart:R,onTouchEnd:()=>r("link"),onClick:()=>r("link"),children:s("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"},void 0,!1,void 0,this),s("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this),s("div",{class:"toolbar-spacer"},void 0,!1,void 0,this),s("button",{class:"send-btn",title:"Send",onMouseDown:R,onTouchStart:R,onTouchEnd:i,onClick:i,children:s("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",children:[s("path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"},void 0,!1,void 0,this),s("path",{d:"m21.854 2.147-10.94 10.939"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function cr(t){let i=f(()=>{let a=t.current;if(!a)return;a.style.height="auto",a.style.height=Math.min(a.scrollHeight,200)+"px"},[t]),r=f(()=>{let a=t.current;if(!a)return;a.value="",a.style.height="auto"},[t]);return{resize:i,reset:r}}function Ot({roomName:t,onSend:i}){let r=_(null),{resize:a,reset:n}=cr(r),o=f(()=>{let c=r.current,m=c?.value.trim();if(!m||!c)return;i(m),n(),c.focus(),requestAnimationFrame(()=>c.focus())},[i,n]),v=f((c)=>{if(c.key==="Enter"&&!c.shiftKey&&!matchMedia("(pointer: coarse)").matches)c.preventDefault(),o()},[o]);return s("div",{class:"chat-input-area",children:s("div",{class:"chat-input-box",children:[s("textarea",{ref:r,placeholder:`Message #${t}`,rows:1,onInput:a,onKeyDown:v},void 0,!1,void 0,this),s(qt,{textareaRef:r,onSend:o},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function ur(t,i,r,a){let n=_(null),o=_(r);o.current=r;let v=_(a?.onTeamInfo);return v.current=a?.onTeamInfo,M(()=>{if(!t||!i)return;function c(){if(n.current)n.current.close();let u=location.protocol==="https:"?"wss:":"ws:",l=`?token=${encodeURIComponent(i)}`,F=new WebSocket(`${u}//${location.host}/api/rooms/${t}/ws${l}`);F.onmessage=(g)=>{try{let T=JSON.parse(g.data);if(T.type==="team_info"){v.current?.(T);return}let $=T;if(!$.sender||!$.content)return;o.current?.($)}catch{}},F.onerror=()=>console.error("WebSocket error"),F.onclose=()=>{setTimeout(()=>{if(n.current===F)c()},2000)},n.current=F}c();let m=()=>{if(document.visibilityState==="visible"){if(!n.current||n.current.readyState!==WebSocket.OPEN)c()}};return document.addEventListener("visibilitychange",m),()=>{if(document.removeEventListener("visibilitychange",m),n.current){let u=n.current;n.current=null,u.close()}}},[t,i]),n}function Jt(){return new Promise((t,i)=>{let r=indexedDB.open("meet-ai-queue",1);r.onupgradeneeded=()=>{let a=r.result;if(!a.objectStoreNames.contains("outbox"))a.createObjectStore("outbox",{keyPath:"tempId"})},r.onsuccess=()=>t(r.result),r.onerror=()=>i(r.error)})}async function fa(t){let r=(await Jt()).transaction("outbox","readwrite");if(r.objectStore("outbox").put(t),await new Promise((a,n)=>{r.oncomplete=()=>a(),r.onerror=()=>n(r.error)}),"serviceWorker"in navigator&&"SyncManager"in window)await(await navigator.serviceWorker.ready).sync.register("send-messages")}async function wa(t){try{(await Jt()).transaction("outbox","readwrite").objectStore("outbox").delete(t)}catch{}}async function ya(t){let a=(await Jt()).transaction("outbox","readonly").objectStore("outbox").getAll();return(await new Promise((o,v)=>{a.onsuccess=()=>o(a.result),a.onerror=()=>v(a.error)})).filter((o)=>o.roomId===t)}async function Pa(){let r=(await Jt()).transaction("outbox","readonly").objectStore("outbox").getAll();return new Promise((a,n)=>{r.onsuccess=()=>a(r.result),r.onerror=()=>n(r.error)})}function Fr(){let t=f(fa,[]),i=f(wa,[]),r=f(ya,[]),a=f(Pa,[]);return{queue:t,remove:i,getForRoom:r,getAll:a}}function Xt({room:t,apiKey:i,userName:r,onTeamInfo:a}){let[n,o]=P([]),[v,c]=P(0),{queue:m,remove:u,getForRoom:l}=Fr();M(()=>{let y=!1;async function H(){let B=await ir(t.id);if(y)return;o(B.map((w)=>({...w,status:"sent"})));try{let w=await l(t.id);if(y||w.length===0)return;if(o((A)=>[...A,...w.map((I)=>({sender:I.sender,content:I.content,created_at:new Date(I.timestamp).toISOString(),tempId:I.tempId,status:"failed"}))]),navigator.onLine)for(let A of w)try{if(await lt(A.roomId,A.sender,A.content),await u(A.tempId),!y)o((I)=>I.map((z)=>z.tempId===A.tempId?{...z,status:"sent"}:z))}catch{}}catch{}}return H(),()=>{y=!0}},[t.id]);let F=f((y)=>{if(y.sender===r)o((H)=>{let B=H.findIndex((w)=>w.tempId&&w.content===y.content);if(B!==-1){let w=[...H];return w.splice(B,1),[...w,{...y,status:"sent"}]}return[...H,{...y,status:"sent"}]});else o((H)=>[...H,{...y,status:"sent"}]),c((H)=>H+1)},[r]),g=f((y)=>{a?.(y)},[a]);ur(t.id,i,F,{onTeamInfo:g}),M(()=>{let y=async()=>{try{let H=await l(t.id);for(let B of H){o((w)=>w.map((A)=>A.tempId===B.tempId?{...A,status:"pending"}:A));try{await lt(B.roomId,B.sender,B.content),await u(B.tempId),o((w)=>w.map((A)=>A.tempId===B.tempId?{...A,status:"sent"}:A))}catch{o((w)=>w.map((A)=>A.tempId===B.tempId?{...A,status:"failed"}:A))}}}catch{}};return window.addEventListener("online",y),()=>window.removeEventListener("online",y)},[t.id]);let T=f(async(y)=>{let H="pending-"+Date.now()+"-"+Math.random().toString(36).slice(2,6);o((B)=>[...B,{sender:r,content:y,created_at:new Date().toISOString(),tempId:H,status:"pending"}]);try{await lt(t.id,r,y),o((B)=>B.map((w)=>w.tempId===H?{...w,status:"sent"}:w))}catch{await m({tempId:H,roomId:t.id,sender:r,content:y,apiKey:i,timestamp:Date.now()}),o((B)=>B.map((w)=>w.tempId===H?{...w,status:"failed"}:w))}},[t.id,r,i]),$=f(async(y)=>{let H=n.find((B)=>B.tempId===y);if(!H)return;o((B)=>B.map((w)=>w.tempId===y?{...w,status:"pending"}:w));try{await lt(t.id,r,H.content),o((B)=>B.map((w)=>w.tempId===y?{...w,status:"sent"}:w)),await u(y)}catch{o((B)=>B.map((w)=>w.tempId===y?{...w,status:"failed"}:w))}},[t.id,r,n]);return s(Q,{children:[s(Ut,{messages:n,unreadCount:v,onScrollToBottom:()=>c(0),onRetry:$},void 0,!1,void 0,this),s(Ot,{roomName:t.name,onSend:T},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Kt({currentRoom:t,apiKey:i,userName:r,showInvite:a,showTeamToggle:n,onMobileToggle:o,onTeamToggle:v,onInviteClick:c,onTeamInfo:m}){let u=t?.name??"Select a channel";return s("div",{class:"main",children:[s(Wt,{roomName:u,showInvite:a&&!!t,showTeamToggle:n,onMobileToggle:o,onTeamToggle:v,onInviteClick:c},void 0,!1,void 0,this),t?s(Xt,{room:t,apiKey:i,userName:r,onTeamInfo:m},t.id,!1,void 0,this):s(kt,{},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function mr({member:t,inactive:i}){return s("div",{class:`team-member${i?" team-member--inactive":""}`,children:[s("span",{class:"team-member-dot",style:{background:i?"#555":h(t.color)}},void 0,!1,void 0,this),s("span",{class:"team-member-name",children:t.name},void 0,!1,void 0,this),s("span",{class:"team-member-model",children:t.model},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function ht({teamInfo:t,isOpen:i,onClose:r}){let a=t.members.filter((o)=>o.status==="active"),n=t.members.filter((o)=>o.status==="inactive");return s("div",{class:`team-sidebar${i?" open":""}`,children:[s("div",{class:"team-sidebar-header",children:[s("span",{children:t.team_name},void 0,!1,void 0,this),s("span",{class:"team-sidebar-count",children:[a.length,"/",t.members.length]},void 0,!0,void 0,this),s("button",{class:"team-sidebar-close-btn",onClick:r,children:"×"},void 0,!1,void 0,this)]},void 0,!0,void 0,this),a.length>0&&s("div",{class:"team-section",children:[s("div",{class:"team-section-label",children:"Active"},void 0,!1,void 0,this),a.map((o)=>s(mr,{member:o},o.name,!1,void 0,this))]},void 0,!0,void 0,this),n.length>0&&s("div",{class:"team-section",children:[s("div",{class:"team-section-label",children:"Inactive"},void 0,!1,void 0,this),n.map((o)=>s(mr,{member:o,inactive:!0},o.name,!1,void 0,this))]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)}function St({schema:t}){let i=Pi(t);return s("div",{class:"color-preview",children:i.map((r,a)=>s("div",{class:"color-swatch",style:`background:${r}`,title:wi[a],children:wi[a]},a,!1,void 0,this))},void 0,!1,void 0,this)}function Nt({currentSchema:t,onSave:i,onClose:r}){let[a,n]=P(t),[o,v]=P(()=>{let $=fi.find((y)=>y.schema===t);return $?$.schema:""}),c=t,m=f(($)=>{let y=$.target.value;n(y),v(""),q(y.trim())},[]),u=f(($)=>{let y=$.target.value;if(v(y),y)n(y),q(y)},[]),l=f(()=>{i(a.trim())},[a,i]),F=f(()=>{q(c),r()},[c,r]),g=f(()=>{n(j),v(j),q(j)},[]),T=f(($)=>{if($.target.classList.contains("settings-overlay"))q(c),r()},[c,r]);return s("div",{class:"settings-overlay",onClick:T,children:s("div",{class:"settings-panel",children:[s("h2",{children:"Color Schema"},void 0,!1,void 0,this),s("label",{children:"Theme Presets"},void 0,!1,void 0,this),s("select",{value:o,onChange:u,children:[s("option",{value:"",children:"Custom"},void 0,!1,void 0,this),fi.map(($)=>s("option",{value:$.schema,children:$.name},$.name,!1,void 0,this))]},void 0,!0,void 0,this),s("label",{children:"Schema string (10 comma-separated hex colors)"},void 0,!1,void 0,this),s("input",{type:"text",value:a,onInput:m},void 0,!1,void 0,this),s(St,{schema:a},void 0,!1,void 0,this),s("div",{class:"btn-row",children:[s("button",{class:"btn-reset",onClick:g,children:"Reset"},void 0,!1,void 0,this),s("button",{class:"btn-cancel",onClick:F,children:"Cancel"},void 0,!1,void 0,this),s("button",{class:"btn-save",onClick:l,children:"Save"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function Et({onClose:t,onToast:i}){let[r,a]=P(null),[n,o]=P(null),[v,c]=P(!1);M(()=>{let l=!1;async function F(){try{let g=await rr();if(l)return;a(g.url)}catch(g){if(!l)o(g.message||"Failed to create share link")}}return F(),()=>{l=!0}},[]),M(()=>{if(!r)return;let l=document.getElementById("qr-container");if(!l)return;try{let F=qrcode(0,"M");F.addData(r),F.make(),l.innerHTML=F.createImgTag(5,8)}catch{}},[r]);let m=f(async()=>{if(!r)return;try{await navigator.clipboard.writeText(r),c(!0),setTimeout(()=>c(!1),2000)}catch{let l=document.getElementById("qr-url");if(l){let F=document.createRange();F.selectNodeContents(l),window.getSelection()?.removeAllRanges(),window.getSelection()?.addRange(F)}}},[r]),u=f((l)=>{if(l.target.classList.contains("qr-overlay"))t()},[t]);return s("div",{class:"qr-overlay",onClick:u,children:s("div",{class:"qr-panel",children:[s("h2",{children:"Login on another device"},void 0,!1,void 0,this),s("p",{class:"qr-subtitle",children:"Scan with your phone camera to sign in"},void 0,!1,void 0,this),s("div",{class:"qr-container",id:"qr-container",children:[!r&&!n&&s("div",{style:"width:200px;height:200px;display:flex;align-items:center;justify-content:center;margin:0 auto",children:s("div",{style:"width:32px;height:32px;border:3px solid var(--c-border);border-top-color:var(--c-primary);border-radius:50%;animation:spin 0.8s linear infinite"},void 0,!1,void 0,this)},void 0,!1,void 0,this),n&&s("p",{style:"color:#F85149",children:n},void 0,!1,void 0,this)]},void 0,!0,void 0,this),r&&s("div",{class:"qr-url",id:"qr-url",onClick:m,title:"Click to copy",children:r},void 0,!1,void 0,this),s("div",{class:"qr-copied",children:v?"Copied to clipboard!":""},void 0,!1,void 0,this),s("div",{class:"qr-expires",children:"Expires in 5 minutes"},void 0,!1,void 0,this),s("button",{class:"btn-close",onClick:t,children:"Close"},void 0,!1,void 0,this)]},void 0,!0,void 0,this)},void 0,!1,void 0,this)}function pt({text:t,onDone:i}){return M(()=>{let r=setTimeout(i,2100);return()=>clearTimeout(r)},[i]),s("div",{class:"toast",children:t},void 0,!1,void 0,this)}function lr(t,i){let r=_(null),a=_(i);a.current=i,M(()=>{if(!t)return;function n(){let o=location.protocol==="https:"?"wss:":"ws:",v=`?token=${encodeURIComponent(t)}`,c=new WebSocket(`${o}//${location.host}/api/lobby/ws${v}`);c.onmessage=(m)=>{try{let u=JSON.parse(m.data);if(u.type==="room_created")a.current?.(u.id,u.name)}catch{}},c.onclose=()=>{setTimeout(()=>{if(r.current===c)n()},3000)},r.current=c}return n(),()=>{if(r.current){let o=r.current;r.current=null,o.close()}}},[t])}function Dt(){let t=location.pathname.match(/^\/chat\/([a-f0-9-]+)$/i);return t?t[1]:null}function gr(t,i){M(()=>{let n=()=>{let o=Dt();i(o)};return window.addEventListener("popstate",n),()=>window.removeEventListener("popstate",n)},[t,i]);let r=f((n)=>{history.pushState({roomId:n},"","/chat/"+n)},[]),a=f((n)=>{history.replaceState(null,"",n)},[]);return{pushRoom:r,replaceUrl:a}}function Vt({apiKey:t,userName:i,colorSchema:r,onNameChange:a,onSchemaChange:n}){let[o,v]=P([]),[c,m]=P(null),[u,l]=P(!1),[F,g]=P(!1),[T,$]=P(!1),[y,H]=P(null),[B,w]=P(null),[A,I]=P(!1),z=window.navigator.standalone===!0||window.matchMedia("(display-mode: standalone)").matches;M(()=>{let b=!1;async function it(){let S=await tr();if(b)return;v(S);let Mi=Dt();if(Mi){let Li=S.find((Br)=>Br.id===Mi);if(Li)m(Li)}}return it(),()=>{b=!0}},[]);let tt=f((b,it)=>{v((S)=>[...S,{id:b,name:it}])},[]);lr(t,tt);let{pushRoom:Ti,replaceUrl:$a}=gr(o,f((b)=>{if(b){let it=o.find((S)=>S.id===b);m(it??null)}else m(null)},[o])),Ar=f((b)=>{m(b),l(!1),Ti(b.id)},[Ti]),$r=f((b)=>{n(b),g(!1)},[n]);return M(()=>{if(!Dt())history.replaceState({roomId:null},"",location.pathname)},[]),s(Q,{children:[s(zt,{rooms:o,currentRoomId:c?.id??null,userName:i,isOpen:u,onSelectRoom:Ar,onNameChange:a,onSettingsClick:()=>g(!0),onClose:()=>l(!1)},void 0,!1,void 0,this),u&&s(Gt,{onClick:()=>l(!1)},void 0,!1,void 0,this),s(Kt,{currentRoom:c,apiKey:t,userName:i,showInvite:!z,showTeamToggle:!!B,onMobileToggle:()=>l((b)=>!b),onTeamToggle:()=>I((b)=>!b),onInviteClick:()=>$(!0),onTeamInfo:w},void 0,!1,void 0,this),B&&s(ht,{teamInfo:B,isOpen:A,onClose:()=>I(!1)},void 0,!1,void 0,this),A&&s("div",{class:"team-sidebar-backdrop",onClick:()=>I(!1),style:"display:block"},void 0,!1,void 0,this),F&&s(Nt,{currentSchema:r,onSave:$r,onClose:()=>g(!1)},void 0,!1,void 0,this),T&&s(Et,{onClose:()=>$(!1),onToast:(b)=>{H(b),$(!1)}},void 0,!1,void 0,this),y&&s(pt,{text:y,onDone:()=>H(null)},void 0,!1,void 0,this)]},void 0,!0,void 0,this)}function Ii(t,i){let[r,a]=P(()=>{return localStorage.getItem(t)??i}),n=f((o)=>{a(o),localStorage.setItem(t,o)},[t]);return[r,n]}var fr=["curious","bold","swift","quiet","bright","keen","calm","wild","lazy","witty","brave","sly","warm","cool","zen"],wr=["panda","fox","otter","hawk","wolf","owl","lynx","bear","deer","raven","hare","seal","wren","crane","moth"];function Aa(){let t=fr[Math.floor(Math.random()*fr.length)],i=wr[Math.floor(Math.random()*wr.length)],r=Math.floor(Math.random()*100);return`${t}-${i}-${r}`}function yr(){let t=localStorage.getItem(Z.handle);if(!t)t=Aa(),localStorage.setItem(Z.handle,t);return t}function dt(){let[t,i]=P(()=>yi()),[r,a]=Ii(Z.handle,yr()),[n,o]=Ii(Z.colorSchema,j),v=new URLSearchParams(location.search).get("token");M(()=>{q(n)},[n]);let c=f((u)=>{ei(u),i(u),history.replaceState(null,"","/chat"),location.reload()},[]),m=f((u)=>{o(u),q(u)},[]);if(v&&t)history.replaceState(null,"",location.pathname);if(v&&!t)return s(Lt,{token:v,onLogin:c},void 0,!1,void 0,this);if(!t)return s(Mt,{onLogin:c},void 0,!1,void 0,this);return s(Vt,{apiKey:t,userName:r,colorSchema:n,onNameChange:a,onSchemaChange:m},void 0,!1,void 0,this)}var Pr=document.getElementById("root");if(Pr)vi(s(dt,{},void 0,!1,void 0,this),Pr);
